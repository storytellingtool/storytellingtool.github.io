{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/dexie/dist/dexie.mjs","webpack:///./compiled/src/helpers/ServiceWorkerDB/index.js","webpack:///./compiled/src/helpers/blobArrayBufferConversion.js","webpack:///./compiled/src/service_worker.js","webpack:///./compiled/src/types/cache.js"],"names":["parentHotUpdateCallback","self","chunkId","moreModules","hotAvailableFilesMap","hotRequestedFilesMap","moduleId","Object","prototype","hasOwnProperty","call","hotUpdate","hotWaitingFiles","hotChunksLoading","hotUpdateDownloaded","hotAddUpdateChunk","hotCurrentChildModule","hotApplyOnUpdate","hotCurrentHash","hotRequestTimeout","hotCurrentModuleData","hotCurrentParents","hotCurrentParentsTemp","hotCreateRequire","me","installedModules","__webpack_require__","fn","request","hot","active","parents","indexOf","push","children","console","warn","ObjectFactory","name","configurable","enumerable","get","set","value","defineProperty","e","hotStatus","hotSetStatus","then","finishChunkLoading","err","hotWaitingFilesMap","hotEnsureUpdateChunk","t","mode","hotCreateModule","_acceptedDependencies","_declinedDependencies","_selfAccepted","_selfDeclined","_disposeHandlers","_main","accept","dep","callback","undefined","i","length","decline","dispose","addDisposeHandler","removeDisposeHandler","idx","splice","check","hotCheck","apply","hotApply","status","l","hotStatusHandlers","addStatusHandler","removeStatusHandler","data","newStatus","hotDeferred","hotUpdateNewHash","toModuleId","id","Error","requestTimeout","Promise","resolve","reject","XMLHttpRequest","requestPath","p","open","timeout","send","onreadystatechange","readyState","update","JSON","parse","responseText","c","h","promise","script","document","createElement","charset","src","head","appendChild","hotDownloadUpdateChunk","deferred","result","outdatedModules","options","cb","j","module","getAffectedStuff","updateModuleId","outdatedDependencies","queue","map","chain","queueItem","pop","type","parentId","parent","concat","addAllToSet","a","b","item","appliedUpdate","warnUnexpectedRequire","abortError","doApply","doDispose","chainInfo","join","onDeclined","ignoreDeclined","onUnaccepted","ignoreUnaccepted","onAccepted","onDisposed","outdatedSelfAcceptedModules","errorHandler","keys","forEach","installedChunks","hotDisposeChunk","dependency","moduleOutdatedDependencies","slice","disposeHandlers","child","modules","error","callbacks","onErrored","dependencyId","ignoreErrored","err2","originalError","exports","m","d","getter","o","r","Symbol","toStringTag","__esModule","ns","create","key","bind","n","object","property","s","__assign","assign","arguments","this","isArray","Array","_global","window","global","extend","obj","extension","getProto","getPrototypeOf","_hasOwn","hasOwn","prop","props","proto","setProp","functionOrGetSet","writable","derive","Child","from","Parent","getOwnPropertyDescriptor","_slice","args","start","end","override","origFunc","overridedFactory","assert","asap","setImmediate","setTimeout","getByKeyPath","keyPath","rv","val","period","innerObj","substr","setByKeyPath","isFrozen","currentKeyPath","remainingKeyPath","isNaN","parseInt","shallowClone","flatten","intrinsicTypes","split","num","filter","deepClone","any","constructor","getObjectDiff","prfx","ap","bp","iteratorSymbol","iterator","getIteratorOf","x","NO_CHAR_ARRAY","getArrayOf","arrayLike","it","next","done","debug","location","test","href","setDebug","libraryFilter","NEEDS_THROW_FOR_STACK","stack","getErrorWithStack","prettyStack","exception","numIgnoredFrames","message","frame","idbDomErrorNames","errorList","defaultTexts","VersionChanged","DatabaseClosed","Abort","TransactionInactive","DexieError","msg","_e","getMultiErrorMessage","failures","toString","v","ModifyError","successCount","failedKeys","BulkError","_stack","errnames","reduce","BaseException","exceptions","fullName","msgOrInner","inner","Syntax","SyntaxError","Type","TypeError","Range","RangeError","exceptionMap","fullNameExceptions","nop","mirror","pureFunctionChain","f1","f2","callBoth","on1","on2","hookCreatingChain","res","onsuccess","onerror","res2","hookDeletingChain","hookUpdatingChain","modifications","reverseStoppableEventChain","promisableChain","thiz","INTERNAL","LONG_STACKS_CLIP_LIMIT","ZONE_ECHO_LIMIT","nativePromiseInstanceAndProto","Function","P","resolvedNativePromise","nativePromiseProto","resolvedGlobalPromise","nativePromiseThen","NativePromise","AsyncFunction","patchGlobalPromise","stack_being_generated","schedulePhysicalTick","physicalTick","MutationObserver","hiddenDiv","observe","attributes","setAttribute","asap$1","microtickQueue","needsNewPhysicalTick","isOutsideMicroTick","unhandledErrors","rejectingErrors","currentFulfiller","rejectionMapper","globalPSD","ref","unhandleds","onunhandled","globalError","pgp","env","finalize","uh","PSD","numScheduledCalls","tickFinalizers","Promise$1","_listeners","onuncatched","_lib","psd","_PSD","_stackHolder","_prev","_numPrev","_state","_value","handleRejection","executePromiseTask","shouldExecuteTick","beginMicroTickScope","_then","propagateAllListeners","endMicroTickScope","ex","thenProp","microTaskId","totalEchoes","onFulfilled","onRejected","_this","possibleAwait","decrementExpectedAwaits","propagateToListener","Listener","nativeAwaitCompatibleWrap","linkToPreviousPromise","zone","reason","_promise","tryCatch","origProp","getPropertyDescriptor","some","addPossiblyUnhandledError","listeners","len","finalizePhysicalTick","listener","callListener","ret","markErrorAsHandled","prev","numPrev","wasRootExec","unhandledErrs","finalizers","PromiseReject","wrap","errorCatcher","outerScope","switchToZone","catch","handler","finally","onFinally","getStack","stacks","limit","errorName","failure","ms","Infinity","handle","Timeout","clearTimeout","snapShot","all","values","onPossibleParallellAsync","remaining","race","newPSD","newScope","usePSD","scheduler","follow","zoneProps","finalizer","run_at_end_of_this_or_next_physical_tick","task","awaits","echoes","taskCounter","zoneStack","zoneEchoes","zone_id_counter","props$$1","a1","a2","globalEnv","PromiseProp","nthen","getPatchedPromiseThen","gthen","incrementExpectedAwaits","sourceTaskId","possiblePromise","rejection","zoneEnterEcho","targetZone","zoneLeaveEcho","bEnteringZone","job","currentZone","GlobalPromise","targetEnv","a3","outerZone","origThen","onResolved","UNHANDLEDREJECTION","event","eventData","createEvent","initEvent","CustomEvent","detail","dispatchEvent","PromiseRejectionEvent","onunhandledrejection","_","defaultPrevented","maxString","String","fromCharCode","INVALID_KEY_ARGUMENT","STRING_EXPECTED","connections","isIEOrEdge","navigator","userAgent","hasIEDeleteObjectStoreBug","hangsOnDeleteLargeKeyRange","dexieStackFrameFilter","DBNAMES_DB","combine","filter1","filter2","AnyRange","lower","lowerOpen","upper","upperOpen","Table","_trans","writeLocked","trans","_tx","tableName","checkTableInTransaction","schema","NotFound","idbtrans","db","transless","tempTransaction","storeNames","openComplete","letThrough","_createTransaction","_dbSchema","_completion","isBeingOpened","_options","autoOpen","dbReadyPromise","keyOrCrit","where","first","core","hook","reading","fire","indexOrCrit","WhereClause","keyPaths","equals","compoundIndex","indexes","primKey","ix","compound","every","_maxKey","kp","stringify","idxByName","idb","_deps","indexedDB","cmp","_a","prevIndex","prevFilterFn","index","multi","filterFunction","toCollection","and","count","thenShortcut","offset","numRows","each","toArray","Collection","orderBy","reverse","mapToClass","mappedClass","readHook","unsubscribe","defineClass","content","add","mutate","numFailures","lastResult","primaryKey","outbound","keyOrObject","InvalidArgument","modify","put","delete","clear","range","bulkGet","keys$$1","getMany","bulkAdd","objects","pos","bulkPut","bulkDelete","Events","ctx","evs","eventName","subscriber","subscribe","addEventType","chainFunction","defaultFunction","cfg","context","subscribers","makeClassConstructor","isPlainKeyRange","ignoreLimitFilter","algorithm","or","justLimit","replayFilter","addFilter","addReplayFilter","factory","isLimitFilter","curr","getIndexOrStore","coreSchema","isPrimKey","getIndexByKeyPath","Schema","openCursor","coreTable","keysOnly","dir","unique","query","iter","coreTrans","set_1","union","cursor","advance","stop","fail","Uint8Array","_iterate","iterate","valueMapper","cursorPromise","wrappedFn","continue","advancer","_read","_ctx","table","_write","_addAlgorithm","clone","raw","Math","min","sortBy","parts","lastPart","lastIndex","getval","order","sorter","aVal","bVal","sort","valueMapper_1","a_1","offsetLeft","rowsLeft","until","bIncludeStopEntry","last","isMatch","indexName","_ondirectionchange","desc","eachKey","eachUniqueKey","eachPrimaryKey","primaryKeys","uniqueKeys","firstKey","lastKey","distinct","strKey","found","changes","modifyer","numKeys","anythingModified","extractKey","Dexie","totalFailures","applyMutateResult","expectedCount","nextChunk","addValues","putValues","putKeys","deleteKeys","origValue","ctx_1","coreRange","results","simpleCompare","simpleCompareReverse","collectionOrWhereClause","T","collection","emptyCollection","whereClause","rangeEqual","nextCasing","lowerKey","upperNeedle","lowerNeedle","llp","lwrKeyChar","addIgnoreCaseAlgorithm","match","needles","suffix","compare","upperNeedles","lowerNeedles","direction","nextKeySuffix","needlesLen","initDirection","toUpperCase","toLowerCase","upperFactory","lowerFactory","needleBounds","needle","nb","createRange","firstPossibleNeedle","lowestPossibleCasing","casing","between","includeLower","includeUpper","_cmp","above","aboveOrEqual","below","belowOrEqual","startsWith","str","startsWithIgnoreCase","equalsIgnoreCase","anyOfIgnoreCase","startsWithAnyOfIgnoreCase","anyOf","_ascending","_descending","notEqual","inAnyRange","includeLowers","includeUppers","noneOf","ranges","ascending","descending","_min","max","_max","sortDirection","rangeSorter","newRange","rangePos","keyIsBeyondCurrentEntry","keyIsBeforeCurrentEntry","checkKey","keyWithinCurrentRange","startsWithAnyOf","safariMultiStoreFix","getMaxKey","IdbKeyRange","only","eventRejectHandler","preventDefault","target","stopPropagation","Transaction","_lock","_reculock","lockOwnerFor","_unlock","_blockedFuncs","_locked","fnAndPSD","shift","idbdb","dbOpenError","MissingAPI","OpenFailed","transaction","ev","_reject","onabort","on","oncomplete","_resolve","bWriteLock","ReadOnly","_root","waitFor","promiseLike","root","_waitingFor","_waitingQueue","store","objectStore","spin","_spinCount","currentWaitPromise","abort","memoizedTables","_memoizedTables","tableSchema","transactionBoundTable","createIndexSpec","auto","nameFromKeyPath","createTableSchema","array","extractor","nameAndValue","getKeyExtractor","getSinglePathKeyExtractor","getEffectiveKeys","req","arrayify","_id_counter","getKeyPathAlias","createDBCore","tmpTrans","makeIDBKeyRange","upperBound","lowerBound","bound","tables","objectStoreNames","autoIncrement","indexByKeyPath","isPrimaryKey","indexNames","multiEntry","hasGetAll","extractSchema","wantResults","isAddOrPut","_reqno","setResult","args1","args2","keyCount","callbackCount","successHandler","_pos","nonInfinitLimit","source","idbKeyRange","getAll","getAllKeys","count_1","req_1","openKeyCursor","result_1","___id","_cursorContinue","_cursorContinuePrimaryKey","continuePrimaryKey","_cursorAdvance","doThrowCursorIsStopped","gotOne","iterationPromise","resolveIteration","rejectIteration","guardedCallback","createDbCoreTable","tableMap","MIN_KEY","MAX_KEY","createMiddlewareStacks","middlewares","IDBKeyRange","dbcore","stackImpl","down","createMiddlewareStack","generateMiddlewareStacks","_middlewares","tbl","setApiOnPlace","objs","tableNames","dbschema","removeTablesApi","lowerVersionFirst","_cfg","version","runUpgraders","oldVersion","idbUpgradeTrans","globalSchema","_storeNames","rejectTransaction","createTable","populate","versions","_versions","oldVersionStruct","Upgrade","anyContentUpgraderHasRun","oldSchema","newSchema","adjustToExistingIndexNames","diff","del","change","oldDef","newDef","def","recreate","oldIndexes","newIndexes","idxName","oldIdx","newIdx","getSchemaDiff","tuple","store_1","addIndex","deleteIndex","contentUpgrade","returnValue_1","upgradeSchema_1","promiseFollowed","decrementor","storeName","deleteObjectStore","deleteRemovedTables","runQueue","contains","updateTablesAndIndexes","createObjectStore","createIndex","_hasGetAll","dexieName","indexSpec","WorkerGlobalScope","databaseEnumerator","Version","_parseStoresSpec","stores","outSchema","trim","replace","parseIndexSyntax","storesSource","storesSpec","_allTables","upgrade","upgradeFunction","vip","dexieOpen","state","openCanceller","resolveDbReady","dbReadyResolve","upgradeTransaction","dbName","autoSchema","round","verno","onblocked","_fireOnBlocked","onupgradeneeded","allowEmptyDB","close","delreq","deleteDatabase","NoSuchDatabase","oldVer","pow","dbStoreNames","idbindex","readGlobalSchema","onversionchange","vcFired","onReadyBeingFired","ready","fireRemainders","remainders","awaitIterator","callNext","onSuccess","step","onError","throw","getNext","extractTransactionArgs","_tableArgs_","scopeFunc","enterTransactionScope","parentTransaction","returnValue","PrematureCommit","pad","virtualIndexMiddleware","level","indexLookup","allVirtualIndexes","addVirtualIndexes","keyTail","lowLevelIndex","keyPathAlias","indexList","keyLength","isVirtual","virtualIndex","_i","translateRequest","createVirtualCursor","hooksMiddleware","downCore","downTable","dxTrans","deleting","creating","updating","addPutOrDelete","deleteNextChunk","deleteRange","effectiveKeys","getExistingValues","existingValues","contexts","existingValue","generatedPrimaryKey","objectDiff","additionalChanges_1","requestedValue_1","deps","dependencies","addons","cancelOpen","bSticky","db_1","keyRangeGenerator","keyRange","whereCtx","readingHook","createCollectionConstructor","createTableConstructor","complete","wasActive","createTransactionConstructor","versionNumber","createVersionConstructor","orCollection","_IDBKeyRange","createWhereClauseConstructor","newVersion","use","addon","versionInstance","_whenReady","unuse","mw","hasArguments","doDelete","remove","backendDB","isOpen","hasBeenClosed","hasFailed","dynamicallyOpened","_transaction","idbMode","onlyIfCompatible","SubTransaction","enterTransaction","InvalidTable","Dexie$1","databaseName","exists","getDatabaseNames","ignoreTransaction","async","generatorFn","spawn","currentTransaction","promiseOrFunction","optionalTimeout","delByKeyPath","minKey","mozIndexedDB","webkitIndexedDB","msIndexedDB","webkitIDBKeyRange","semVer","default","maxKey","dbNamesTable","getDatabaseNamesNative","webkitGetDatabaseNames","dbnames","DatabaseEnumerator","initDatabaseEnumerator","domError","extendStatics","blobToArrayBuffer","blob","reader","FileReader","addEventListener","readAsArrayBuffer","__extends","setPrototypeOf","__proto__","__","__awaiter","thisArg","_arguments","generator","fulfilled","rejected","__generator","body","f","y","g","label","sent","trys","ops","verb","op","_super","ServiceWorkerDB","putAll","items","responses","response","headers","buffer","url","responseBody","blobMIMEType","responseStatus","responseStatusText","statusText","responseHeaders","itemData","flush","alert","worker","dequeue","innerPromise","rej","putInDB","Response","Blob","Headers","_b","_c","upsert","log","importScripts","passthroughRegex","isOniOS","jobQueue","NAME","keepFreshUrls","checkClaimedClientsIntervalId","setInterval","clients","matchAll","runJobQueue","waitUntil","claim","fetchHandler","URL_PREFIX","ASSETS_URL","fetchCache","FLUSH_URL","flushCache","WAIT_URL","respondWithProgress","CONFIG_DATA","config","fetchItem","_loop_1","stripUndefined","clearInterval","url_1","Request","fetch","cacheItem","respondWith","decodeURI","responsePromise","tryCacheBeforeFetching","credentials","cache","cloneAndCache","includes","onLine","cloneAndUpsert","cacheItemAndWait","json","urls","preCacheUrls","Set","RegExp","ignoreCacheRegex","typeConvert","Cache","origin","CONFIG","scope","updateViaCache"],"mappings":"aAGE,IAAIA,EAA0BC,KAAuB,iBACrDA,KAAuB,iBACvB,SAAkCC,EAASC,IAgR3C,SAA2BD,EAASC,GACnC,IAAKC,EAAqBF,KAAaG,EAAqBH,GAC3D,OAED,IAAK,IAAII,KADTD,EAAqBH,IAAW,EACXC,EAChBI,OAAOC,UAAUC,eAAeC,KAAKP,EAAaG,KACrDK,EAAUL,GAAYH,EAAYG,IAGV,KAApBM,GAA8C,IAArBC,GAC9BC,IAzRDC,CAAkBb,EAASC,GACvBH,GAAyBA,EAAwBE,EAASC,IAuD/D,IAKIa,EALAC,GAAmB,EAEnBC,EAAiB,uBACjBC,EAAoB,IACpBC,EAAuB,GAGvBC,EAAoB,GAEpBC,EAAwB,GAG5B,SAASC,EAAiBjB,GACzB,IAAIkB,EAAKC,EAAiBnB,GAC1B,IAAKkB,EAAI,OAAOE,EAChB,IAAIC,EAAK,SAASC,GAsBjB,OArBIJ,EAAGK,IAAIC,QACNL,EAAiBG,IACyC,IAAzDH,EAAiBG,GAASG,QAAQC,QAAQ1B,IAC7CmB,EAAiBG,GAASG,QAAQE,KAAK3B,IAGxCe,EAAoB,CAACf,GACrBU,EAAwBY,IAEa,IAAlCJ,EAAGU,SAASF,QAAQJ,IACvBJ,EAAGU,SAASD,KAAKL,KAGlBO,QAAQC,KACP,4BACCR,EACA,0BACAtB,GAEFe,EAAoB,IAEdK,EAAoBE,IAExBS,EAAgB,SAAuBC,GAC1C,MAAO,CACNC,cAAc,EACdC,YAAY,EACZC,IAAK,WACJ,OAAOf,EAAoBY,IAE5BI,IAAK,SAASC,GACbjB,EAAoBY,GAAQK,KAI/B,IAAK,IAAIL,KAAQZ,EAEfnB,OAAOC,UAAUC,eAAeC,KAAKgB,EAAqBY,IACjD,MAATA,GACS,MAATA,GAEA/B,OAAOqC,eAAejB,EAAIW,EAAMD,EAAcC,IA2BhD,OAxBAX,EAAGkB,EAAI,SAAS3C,GAGf,MAFkB,UAAd4C,GAAuBC,EAAa,WACxClC,IACOa,EAAoBmB,EAAE3C,GAAS8C,KAAKC,EAAoB,SAASC,GAEvE,MADAD,IACMC,IAGP,SAASD,IACRpC,IACkB,YAAdiC,IACEK,EAAmBjD,IACvBkD,EAAqBlD,GAEG,IAArBW,GAA8C,IAApBD,GAC7BE,OAKJa,EAAG0B,EAAI,SAASV,EAAOW,GAEtB,OADW,EAAPA,IAAUX,EAAQhB,EAAGgB,IAClBjB,EAAoB2B,EAAEV,GAAc,EAAPW,IAE9B3B,EAIR,SAAS4B,EAAgBjD,GACxB,IAAIuB,EAAM,CAET2B,sBAAuB,GACvBC,sBAAuB,GACvBC,eAAe,EACfC,eAAe,EACfC,iBAAkB,GAClBC,MAAO7C,IAA0BV,EAGjCwB,QAAQ,EACRgC,OAAQ,SAASC,EAAKC,GACrB,QAAYC,IAARF,EAAmBlC,EAAI6B,eAAgB,OACtC,GAAmB,mBAARK,EAAoBlC,EAAI6B,cAAgBK,OACnD,GAAmB,iBAARA,EACf,IAAK,IAAIG,EAAI,EAAGA,EAAIH,EAAII,OAAQD,IAC/BrC,EAAI2B,sBAAsBO,EAAIG,IAAMF,GAAY,kBAC7CnC,EAAI2B,sBAAsBO,GAAOC,GAAY,cAEnDI,QAAS,SAASL,GACjB,QAAYE,IAARF,EAAmBlC,EAAI8B,eAAgB,OACtC,GAAmB,iBAARI,EACf,IAAK,IAAIG,EAAI,EAAGA,EAAIH,EAAII,OAAQD,IAC/BrC,EAAI4B,sBAAsBM,EAAIG,KAAM,OACjCrC,EAAI4B,sBAAsBM,IAAO,GAEvCM,QAAS,SAASL,GACjBnC,EAAI+B,iBAAiB3B,KAAK+B,IAE3BM,kBAAmB,SAASN,GAC3BnC,EAAI+B,iBAAiB3B,KAAK+B,IAE3BO,qBAAsB,SAASP,GAC9B,IAAIQ,EAAM3C,EAAI+B,iBAAiB5B,QAAQgC,GACnCQ,GAAO,GAAG3C,EAAI+B,iBAAiBa,OAAOD,EAAK,IAIhDE,MAAOC,EACPC,MAAOC,EACPC,OAAQ,SAASC,GAChB,IAAKA,EAAG,OAAOjC,EACfkC,EAAkB/C,KAAK8C,IAExBE,iBAAkB,SAASF,GAC1BC,EAAkB/C,KAAK8C,IAExBG,oBAAqB,SAASH,GAC7B,IAAIP,EAAMQ,EAAkBhD,QAAQ+C,GAChCP,GAAO,GAAGQ,EAAkBP,OAAOD,EAAK,IAI7CW,KAAM/D,EAAqBd,IAG5B,OADAU,OAAwBiD,EACjBpC,EAGR,IAAImD,EAAoB,GACpBlC,EAAY,OAEhB,SAASC,EAAaqC,GACrBtC,EAAYsC,EACZ,IAAK,IAAIlB,EAAI,EAAGA,EAAIc,EAAkBb,OAAQD,IAC7Cc,EAAkBd,GAAGxD,KAAK,KAAM0E,GAIlC,IAKIC,EAGA1E,EAAW2E,EARX1E,EAAkB,EAClBC,EAAmB,EACnBsC,EAAqB,GACrB9C,EAAuB,GACvBD,EAAuB,GAM3B,SAASmF,EAAWC,GAEnB,OADgBA,EAAK,KAAOA,GACTA,EAAKA,EAGzB,SAASb,EAASC,GACjB,GAAkB,SAAd9B,EACH,MAAM,IAAI2C,MAAM,0CAIjB,OAFAxE,EAAmB2D,EACnB7B,EAAa,UA5Ne2C,EA6NDvE,EA5N3BuE,EAAiBA,GAAkB,IAC5B,IAAIC,QAAQ,SAASC,EAASC,GACpC,GAA8B,oBAAnBC,eACV,OAAOD,EAAO,IAAIJ,MAAM,uBAEzB,IACC,IAAI7D,EAAU,IAAIkE,eACdC,EAAcrE,EAAoBsE,EAAI,GAAK9E,EAAiB,mBAChEU,EAAQqE,KAAK,MAAOF,GAAa,GACjCnE,EAAQsE,QAAUR,EAClB9D,EAAQuE,KAAK,MACZ,MAAOjD,GACR,OAAO2C,EAAO3C,GAEftB,EAAQwE,mBAAqB,WAC5B,GAA2B,IAAvBxE,EAAQyE,WACZ,GAAuB,IAAnBzE,EAAQkD,OAEXe,EACC,IAAIJ,MAAM,uBAAyBM,EAAc,qBAE5C,GAAuB,MAAnBnE,EAAQkD,OAElBc,SACM,GAAuB,MAAnBhE,EAAQkD,QAAqC,MAAnBlD,EAAQkD,OAE5Ce,EAAO,IAAIJ,MAAM,uBAAyBM,EAAc,iBAClD,CAEN,IACC,IAAIO,EAASC,KAAKC,MAAM5E,EAAQ6E,cAC/B,MAAO5D,GAER,YADAgD,EAAOhD,GAGR+C,EAAQU,QAyLmCtD,KAAK,SAASsD,GAC3D,IAAKA,EAEJ,OADAvD,EAAa,QACN,KAER1C,EAAuB,GACvB8C,EAAqB,GACrB/C,EAAuBkG,EAAOI,EAC9BpB,EAAmBgB,EAAOK,EAE1B5D,EAAa,WACb,IAAI6D,EAAU,IAAIjB,QAAQ,SAASC,EAASC,GAC3CR,EAAc,CACbO,QAASA,EACTC,OAAQA,KAGVlF,EAAY,GAcZ,OATCyC,EAJa,GAOC,YAAdN,GACqB,IAArBjC,GACoB,IAApBD,GAEAE,IAEM8F,IA5PT,IAA6BlB,EA+Q7B,SAAStC,EAAqBlD,GACxBE,EAAqBF,IAGzBG,EAAqBH,IAAW,EAChCU,IA7RF,SAAgCV,GAC/B,IAAI2G,EAASC,SAASC,cAAc,UACpCF,EAAOG,QAAU,QACjBH,EAAOI,IAAMvF,EAAoBsE,EAAI,GAAK9F,EAAU,IAAMgB,EAAiB,iBAE3E4F,SAASI,KAAKC,YAAYN,GAyRzBO,CAAuBlH,IAJvBiD,EAAmBjD,IAAW,EAQhC,SAASY,IACRiC,EAAa,SACb,IAAIsE,EAAWhC,EAEf,GADAA,EAAc,KACTgC,EACL,GAAIpG,EAIH0E,QAAQC,UACN5C,KAAK,WACL,OAAO6B,EAAS5D,KAEhB+B,KACA,SAASsE,GACRD,EAASzB,QAAQ0B,IAElB,SAASpE,GACRmE,EAASxB,OAAO3C,SAGb,CACN,IAAIqE,EAAkB,GACtB,IAAK,IAAI/B,KAAM7E,EACVJ,OAAOC,UAAUC,eAAeC,KAAKC,EAAW6E,IACnD+B,EAAgBtF,KAAKsD,EAAWC,IAGlC6B,EAASzB,QAAQ2B,IAInB,SAAS1C,EAAS2C,GACjB,GAAkB,UAAd1E,EACH,MAAM,IAAI2C,MAAM,2CAGjB,IAAIgC,EACAvD,EACAwD,EACAC,EACArH,EAEJ,SAASsH,EAAiBC,GAUzB,IATA,IAAIN,EAAkB,CAACM,GACnBC,EAAuB,GAEvBC,EAAQR,EAAgBS,IAAI,SAASxC,GACxC,MAAO,CACNyC,MAAO,CAACzC,GACRA,GAAIA,KAGCuC,EAAM5D,OAAS,GAAG,CACxB,IAAI+D,EAAYH,EAAMI,MAClB7H,EAAW4H,EAAU1C,GACrByC,EAAQC,EAAUD,MAEtB,IADAN,EAASlG,EAAiBnB,MACXqH,EAAO9F,IAAI6B,cAA1B,CACA,GAAIiE,EAAO9F,IAAI8B,cACd,MAAO,CACNyE,KAAM,gBACNH,MAAOA,EACP3H,SAAUA,GAGZ,GAAIqH,EAAO9F,IAAIgC,MACd,MAAO,CACNuE,KAAM,aACNH,MAAOA,EACP3H,SAAUA,GAGZ,IAAK,IAAI4D,EAAI,EAAGA,EAAIyD,EAAO5F,QAAQoC,OAAQD,IAAK,CAC/C,IAAImE,EAAWV,EAAO5F,QAAQmC,GAC1BoE,EAAS7G,EAAiB4G,GAC9B,GAAKC,EAAL,CACA,GAAIA,EAAOzG,IAAI4B,sBAAsBnD,GACpC,MAAO,CACN8H,KAAM,WACNH,MAAOA,EAAMM,OAAO,CAACF,IACrB/H,SAAUA,EACV+H,SAAUA,IAG+B,IAAvCd,EAAgBvF,QAAQqG,KACxBC,EAAOzG,IAAI2B,sBAAsBlD,IAC/BwH,EAAqBO,KACzBP,EAAqBO,GAAY,IAClCG,EAAYV,EAAqBO,GAAW,CAAC/H,aAGvCwH,EAAqBO,GAC5Bd,EAAgBtF,KAAKoG,GACrBN,EAAM9F,KAAK,CACVgG,MAAOA,EAAMM,OAAO,CAACF,IACrB7C,GAAI6C,SAKP,MAAO,CACND,KAAM,WACN9H,SAAUuH,EACVN,gBAAiBA,EACjBO,qBAAsBA,GAIxB,SAASU,EAAYC,EAAGC,GACvB,IAAK,IAAIxE,EAAI,EAAGA,EAAIwE,EAAEvE,OAAQD,IAAK,CAClC,IAAIyE,EAAOD,EAAExE,IACY,IAArBuE,EAAEzG,QAAQ2G,IAAcF,EAAExG,KAAK0G,IA7ErCnB,EAAUA,GAAW,GAmFrB,IAAIM,EAAuB,GACvBP,EAAkB,GAClBqB,EAAgB,GAEhBC,EAAwB,WAC3B1G,QAAQC,KACP,4BAA8BkF,EAAOhH,SAAW,yBAIlD,IAAK,IAAIkF,KAAM7E,EACd,GAAIJ,OAAOC,UAAUC,eAAeC,KAAKC,EAAW6E,GAAK,CAGxD,IAAI8B,EAFJhH,EAAWiF,EAAWC,GAYtB,IAAIsD,GAAa,EACbC,GAAU,EACVC,GAAY,EACZC,EAAY,GAIhB,QAfC3B,EADG3G,EAAU6E,GACJoC,EAAiBtH,GAEjB,CACR8H,KAAM,WACN9H,SAAUkF,IAQDyC,QACVgB,EAAY,yBAA2B3B,EAAOW,MAAMiB,KAAK,SAElD5B,EAAOc,MACd,IAAK,gBACAZ,EAAQ2B,YAAY3B,EAAQ2B,WAAW7B,GACtCE,EAAQ4B,iBACZN,EAAa,IAAIrD,MAChB,oCACC6B,EAAOhH,SACP2I,IAEH,MACD,IAAK,WACAzB,EAAQ2B,YAAY3B,EAAQ2B,WAAW7B,GACtCE,EAAQ4B,iBACZN,EAAa,IAAIrD,MAChB,2CACC6B,EAAOhH,SACP,OACAgH,EAAOe,SACPY,IAEH,MACD,IAAK,aACAzB,EAAQ6B,cAAc7B,EAAQ6B,aAAa/B,GAC1CE,EAAQ8B,mBACZR,EAAa,IAAIrD,MAChB,mBAAqBnF,EAAW,mBAAqB2I,IAEvD,MACD,IAAK,WACAzB,EAAQ+B,YAAY/B,EAAQ+B,WAAWjC,GAC3CyB,GAAU,EACV,MACD,IAAK,WACAvB,EAAQgC,YAAYhC,EAAQgC,WAAWlC,GAC3C0B,GAAY,EACZ,MACD,QACC,MAAM,IAAIvD,MAAM,oBAAsB6B,EAAOc,MAE/C,GAAIU,EAEH,OADA/F,EAAa,SACN4C,QAAQE,OAAOiD,GAEvB,GAAIC,EAGH,IAAKzI,KAFLsI,EAActI,GAAYK,EAAUL,GACpCkI,EAAYjB,EAAiBD,EAAOC,iBACnBD,EAAOQ,qBAEtBvH,OAAOC,UAAUC,eAAeC,KAC/B4G,EAAOQ,qBACPxH,KAGIwH,EAAqBxH,KACzBwH,EAAqBxH,GAAY,IAClCkI,EACCV,EAAqBxH,GACrBgH,EAAOQ,qBAAqBxH,KAK5B0I,IACHR,EAAYjB,EAAiB,CAACD,EAAOhH,WACrCsI,EAActI,GAAYuI,GAM7B,IAwBIrE,EAxBAiF,EAA8B,GAClC,IAAKvF,EAAI,EAAGA,EAAIqD,EAAgBpD,OAAQD,IACvC5D,EAAWiH,EAAgBrD,GAE1BzC,EAAiBnB,IACjBmB,EAAiBnB,GAAUuB,IAAI6B,eAE/BkF,EAActI,KAAcuI,GAE5BY,EAA4BxH,KAAK,CAChC0F,OAAQrH,EACRoJ,aAAcjI,EAAiBnB,GAAUuB,IAAI6B,gBAMhDX,EAAa,WACbxC,OAAOoJ,KAAKvJ,GAAsBwJ,QAAQ,SAAS1J,IACZ,IAAlCE,EAAqBF,IA3hB3B,SAAyBA,UACjB2J,gBAAgB3J,GA2hBrB4J,CAAgB5J,KAMlB,IADA,IAqCI6J,EACAC,EAtCAjC,EAAQR,EAAgB0C,QACrBlC,EAAM5D,OAAS,GAGrB,GAFA7D,EAAWyH,EAAMI,MACjBR,EAASlG,EAAiBnB,GAC1B,CAEA,IAAI6E,EAAO,GAGP+E,EAAkBvC,EAAO9F,IAAI+B,iBACjC,IAAK8D,EAAI,EAAGA,EAAIwC,EAAgB/F,OAAQuD,KACvCD,EAAKyC,EAAgBxC,IAClBvC,GAcJ,IAZA/D,EAAqBd,GAAY6E,EAGjCwC,EAAO9F,IAAIC,QAAS,SAGbL,EAAiBnB,UAGjBwH,EAAqBxH,GAGvBoH,EAAI,EAAGA,EAAIC,EAAOzF,SAASiC,OAAQuD,IAAK,CAC5C,IAAIyC,EAAQ1I,EAAiBkG,EAAOzF,SAASwF,IACxCyC,KACL3F,EAAM2F,EAAMpI,QAAQC,QAAQ1B,KACjB,GACV6J,EAAMpI,QAAQ0C,OAAOD,EAAK,KAQ7B,IAAKlE,KAAYwH,EAChB,GACCvH,OAAOC,UAAUC,eAAeC,KAAKoH,EAAsBxH,KAE3DqH,EAASlG,EAAiBnB,IAGzB,IADA0J,EAA6BlC,EAAqBxH,GAC7CoH,EAAI,EAAGA,EAAIsC,EAA2B7F,OAAQuD,IAClDqC,EAAaC,EAA2BtC,IACxClD,EAAMmD,EAAOzF,SAASF,QAAQ+H,KACnB,GAAGpC,EAAOzF,SAASuC,OAAOD,EAAK,GAY9C,IAAKlE,KALLyC,EAAa,SAEb7B,EAAiBoE,EAGAsD,EACZrI,OAAOC,UAAUC,eAAeC,KAAKkI,EAAetI,KACvD8J,EAAQ9J,GAAYsI,EAActI,IAKpC,IAAI+J,EAAQ,KACZ,IAAK/J,KAAYwH,EAChB,GACCvH,OAAOC,UAAUC,eAAeC,KAAKoH,EAAsBxH,KAE3DqH,EAASlG,EAAiBnB,IACd,CACX0J,EAA6BlC,EAAqBxH,GAClD,IAAIgK,EAAY,GAChB,IAAKpG,EAAI,EAAGA,EAAI8F,EAA2B7F,OAAQD,IAGlD,GAFA6F,EAAaC,EAA2B9F,GACxCuD,EAAKE,EAAO9F,IAAI2B,sBAAsBuG,GAC9B,CACP,IAA+B,IAA3BO,EAAUtI,QAAQyF,GAAY,SAClC6C,EAAUrI,KAAKwF,GAGjB,IAAKvD,EAAI,EAAGA,EAAIoG,EAAUnG,OAAQD,IAAK,CACtCuD,EAAK6C,EAAUpG,GACf,IACCuD,EAAGuC,GACF,MAAO9G,GACJsE,EAAQ+C,WACX/C,EAAQ+C,UAAU,CACjBnC,KAAM,iBACN9H,SAAUA,EACVkK,aAAcR,EAA2B9F,GACzCmG,MAAOnH,IAGJsE,EAAQiD,eACPJ,IAAOA,EAAQnH,KAS1B,IAAKgB,EAAI,EAAGA,EAAIuF,EAA4BtF,OAAQD,IAAK,CACxD,IAAIyE,EAAOc,EAA4BvF,GACvC5D,EAAWqI,EAAKhB,OAChBtG,EAAoB,CAACf,GACrB,IACCoB,EAAoBpB,GACnB,MAAO4C,GACR,GAAiC,mBAAtByF,EAAKe,aACf,IACCf,EAAKe,aAAaxG,GACjB,MAAOwH,GACJlD,EAAQ+C,WACX/C,EAAQ+C,UAAU,CACjBnC,KAAM,oCACN9H,SAAUA,EACV+J,MAAOK,EACPC,cAAezH,IAGZsE,EAAQiD,eACPJ,IAAOA,EAAQK,GAEhBL,IAAOA,EAAQnH,QAGjBsE,EAAQ+C,WACX/C,EAAQ+C,UAAU,CACjBnC,KAAM,sBACN9H,SAAUA,EACV+J,MAAOnH,IAGJsE,EAAQiD,eACPJ,IAAOA,EAAQnH,IAOxB,OAAImH,GACHtH,EAAa,QACN4C,QAAQE,OAAOwE,KAGvBtH,EAAa,QACN,IAAI4C,QAAQ,SAASC,GAC3BA,EAAQ2B,MAKV,IAAI9F,EAAmB,GAGvB,SAASC,EAAoBpB,GAG5B,GAAGmB,EAAiBnB,GACnB,OAAOmB,EAAiBnB,GAAUsK,QAGnC,IAAIjD,EAASlG,EAAiBnB,GAAY,CACzC4D,EAAG5D,EACHyE,GAAG,EACH6F,QAAS,GACT/I,IAAK0B,EAAgBjD,GACrByB,SAAUT,EAAwBD,EAAmBA,EAAoB,GAAIC,GAC7EY,SAAU,IAUX,OANAkI,EAAQ9J,GAAUI,KAAKiH,EAAOiD,QAASjD,EAAQA,EAAOiD,QAASrJ,EAAiBjB,IAGhFqH,EAAO5C,GAAI,EAGJ4C,EAAOiD,QAKflJ,EAAoBmJ,EAAIT,EAGxB1I,EAAoBgF,EAAIjF,EAGxBC,EAAoBoJ,EAAI,SAASF,EAAStI,EAAMyI,GAC3CrJ,EAAoBsJ,EAAEJ,EAAStI,IAClC/B,OAAOqC,eAAegI,EAAStI,EAAM,CAAEE,YAAY,EAAMC,IAAKsI,KAKhErJ,EAAoBuJ,EAAI,SAASL,GACX,oBAAXM,QAA0BA,OAAOC,aAC1C5K,OAAOqC,eAAegI,EAASM,OAAOC,YAAa,CAAExI,MAAO,WAE7DpC,OAAOqC,eAAegI,EAAS,aAAc,CAAEjI,OAAO,KAQvDjB,EAAoB2B,EAAI,SAASV,EAAOW,GAEvC,GADU,EAAPA,IAAUX,EAAQjB,EAAoBiB,IAC/B,EAAPW,EAAU,OAAOX,EACpB,GAAW,EAAPW,GAA8B,iBAAVX,GAAsBA,GAASA,EAAMyI,WAAY,OAAOzI,EAChF,IAAI0I,EAAK9K,OAAO+K,OAAO,MAGvB,GAFA5J,EAAoBuJ,EAAEI,GACtB9K,OAAOqC,eAAeyI,EAAI,UAAW,CAAE7I,YAAY,EAAMG,MAAOA,IACtD,EAAPW,GAA4B,iBAATX,EAAmB,IAAI,IAAI4I,KAAO5I,EAAOjB,EAAoBoJ,EAAEO,EAAIE,EAAK,SAASA,GAAO,OAAO5I,EAAM4I,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIR3J,EAAoB+J,EAAI,SAAS9D,GAChC,IAAIoD,EAASpD,GAAUA,EAAOyD,WAC7B,WAAwB,OAAOzD,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAjG,EAAoBoJ,EAAEC,EAAQ,IAAKA,GAC5BA,GAIRrJ,EAAoBsJ,EAAI,SAASU,EAAQC,GAAY,OAAOpL,OAAOC,UAAUC,eAAeC,KAAKgL,EAAQC,IAGzGjK,EAAoBsE,EAAI,IAGxBtE,EAAoBiF,EAAI,WAAa,OAAOzF,GAIrCK,EAAiB,IAAjBA,CAAsBG,EAAoBkK,EAAI,K,0CC3wBvD,IAAIC,EAAW,WAQX,OAPAA,EAAWtL,OAAOuL,QAAU,SAAkBzI,GAC1C,IAAK,IAAIuI,EAAG1H,EAAI,EAAGuH,EAAIM,UAAU5H,OAAQD,EAAIuH,EAAGvH,IAE5C,IAAK,IAAI8B,KADT4F,EAAIG,UAAU7H,GACO3D,OAAOC,UAAUC,eAAeC,KAAKkL,EAAG5F,KAAI3C,EAAE2C,GAAK4F,EAAE5F,IAE9E,OAAO3C,IAEKuB,MAAMoH,KAAMD,YAG5BpC,EAAOpJ,OAAOoJ,KACdsC,EAAUC,MAAMD,QAChBE,EAA0B,oBAATlM,KAAuBA,KACtB,oBAAXmM,OAAyBA,OAC5BC,OAIR,SAASC,EAAOC,EAAKC,GACjB,MAAyB,iBAAdA,EACAD,GACX5C,EAAK6C,GAAW5C,QAAQ,SAAU2B,GAC9BgB,EAAIhB,GAAOiB,EAAUjB,KAElBgB,GATY,oBAAZ5G,SAA4BwG,EAAQxG,UAC3CwG,EAAQxG,QAAUA,SAUtB,IAAI8G,EAAWlM,OAAOmM,eAClBC,EAAU,GAAGlM,eACjB,SAASmM,EAAOL,EAAKM,GACjB,OAAOF,EAAQjM,KAAK6L,EAAKM,GAE7B,SAASC,EAAMC,EAAOP,GACO,mBAAdA,IACPA,EAAYA,EAAUC,EAASM,KACnCpD,EAAK6C,GAAW5C,QAAQ,SAAU2B,GAC9ByB,EAAQD,EAAOxB,EAAKiB,EAAUjB,MAGtC,IAAI3I,EAAiBrC,OAAOqC,eAC5B,SAASoK,EAAQT,EAAKM,EAAMI,EAAkBzF,GAC1C5E,EAAe2J,EAAKM,EAAMP,EAAOW,GAAoBL,EAAOK,EAAkB,QAA0C,mBAAzBA,EAAiBxK,IAC5G,CAAEA,IAAKwK,EAAiBxK,IAAKC,IAAKuK,EAAiBvK,IAAKH,cAAc,GACtE,CAAEI,MAAOsK,EAAkB1K,cAAc,EAAM2K,UAAU,GAAQ1F,IAEzE,SAAS2F,EAAOC,GACZ,MAAO,CACHC,KAAM,SAAUC,GAGZ,OAFAF,EAAM5M,UAAYD,OAAO+K,OAAOgC,EAAO9M,WACvCwM,EAAQI,EAAM5M,UAAW,cAAe4M,GACjC,CACHd,OAAQQ,EAAMtB,KAAK,KAAM4B,EAAM5M,cAK/C,IAAI+M,EAA2BhN,OAAOgN,yBAMtC,IAAIC,EAAS,GAAGvD,MAChB,SAASA,EAAMwD,EAAMC,EAAOC,GACxB,OAAOH,EAAO9M,KAAK+M,EAAMC,EAAOC,GAEpC,SAASC,EAASC,EAAUC,GACxB,OAAOA,EAAiBD,GAE5B,SAASE,EAAOrF,GACZ,IAAKA,EACD,MAAM,IAAIjD,MAAM,oBAExB,SAASuI,EAAKrM,GACNwK,EAAQ8B,aACRA,aAAatM,GAEbuM,WAAWvM,EAAI,GAoBvB,SAASwM,EAAa5B,EAAK6B,GACvB,GAAIxB,EAAOL,EAAK6B,GACZ,OAAO7B,EAAI6B,GACf,IAAKA,EACD,OAAO7B,EACX,GAAuB,iBAAZ6B,EAAsB,CAE7B,IADA,IAAIC,EAAK,GACAnK,EAAI,EAAGa,EAAIqJ,EAAQjK,OAAQD,EAAIa,IAAKb,EAAG,CAC5C,IAAIoK,EAAMH,EAAa5B,EAAK6B,EAAQlK,IACpCmK,EAAGpM,KAAKqM,GAEZ,OAAOD,EAEX,IAAIE,EAASH,EAAQpM,QAAQ,KAC7B,IAAgB,IAAZuM,EAAe,CACf,IAAIC,EAAWjC,EAAI6B,EAAQK,OAAO,EAAGF,IACrC,YAAoBtK,IAAbuK,OAAyBvK,EAAYkK,EAAaK,EAAUJ,EAAQK,OAAOF,EAAS,KAInG,SAASG,EAAanC,EAAK6B,EAASzL,GAChC,GAAK4J,QAAmBtI,IAAZmK,KAER,aAAc7N,QAAUA,OAAOoO,SAASpC,IAE5C,GAAuB,iBAAZ6B,GAAwB,WAAYA,EAAS,CACpDL,EAAwB,iBAAVpL,GAAsB,WAAYA,GAChD,IAAK,IAAIuB,EAAI,EAAGa,EAAIqJ,EAAQjK,OAAQD,EAAIa,IAAKb,EACzCwK,EAAanC,EAAK6B,EAAQlK,GAAIvB,EAAMuB,QAGvC,CACD,IAAIqK,EAASH,EAAQpM,QAAQ,KAC7B,IAAgB,IAAZuM,EAAe,CACf,IAAIK,EAAiBR,EAAQK,OAAO,EAAGF,GACnCM,EAAmBT,EAAQK,OAAOF,EAAS,GAC/C,GAAyB,KAArBM,OACc5K,IAAVtB,EACIsJ,EAAQM,KAASuC,MAAMC,SAASH,IAChCrC,EAAI9H,OAAOmK,EAAgB,UAEpBrC,EAAIqC,GAGfrC,EAAIqC,GAAkBjM,MACzB,CACD,IAAI6L,EAAWjC,EAAIqC,GACdJ,IACDA,EAAYjC,EAAIqC,GAAkB,IACtCF,EAAaF,EAAUK,EAAkBlM,cAI/BsB,IAAVtB,EACIsJ,EAAQM,KAASuC,MAAMC,SAASX,IAChC7B,EAAI9H,OAAO2J,EAAS,UAEb7B,EAAI6B,GAGf7B,EAAI6B,GAAWzL,GAY/B,SAASqM,EAAazC,GAClB,IAAI8B,EAAK,GACT,IAAK,IAAIxD,KAAK0B,EACNK,EAAOL,EAAK1B,KACZwD,EAAGxD,GAAK0B,EAAI1B,IAEpB,OAAOwD,EAEX,IAAI9F,EAAS,GAAGA,OAChB,SAAS0G,EAAQxG,GACb,OAAOF,EAAO3D,MAAM,GAAI6D,GAE5B,IAAIyG,EAAiB,yGAChBC,MAAM,KAAK5G,OAAO0G,EAAQ,CAAC,EAAG,GAAI,GAAI,IAAIjH,IAAI,SAAUoH,GAAO,MAAO,CAAC,MAAO,OAAQ,SAASpH,IAAI,SAAU3E,GAAK,OAAOA,EAAI+L,EAAM,cAAkBC,OAAO,SAAUhM,GAAK,OAAO8I,EAAQ9I,KAAO2E,IAAI,SAAU3E,GAAK,OAAO8I,EAAQ9I,KACxO,SAASiM,EAAUC,GACf,IAAKA,GAAsB,iBAARA,EACf,OAAOA,EACX,IAAIlB,EACJ,GAAIpC,EAAQsD,GAAM,CACdlB,EAAK,GACL,IAAK,IAAInK,EAAI,EAAGa,EAAIwK,EAAIpL,OAAQD,EAAIa,IAAKb,EACrCmK,EAAGpM,KAAKqN,EAAUC,EAAIrL,UAGzB,GAAIgL,EAAelN,QAAQuN,EAAIC,cAAgB,EAChDnB,EAAKkB,OAIL,IAAK,IAAI1C,KADTwB,EAAKkB,EAAIC,YAAcjP,OAAO+K,OAAOiE,EAAIC,YAAYhP,WAAa,GACjD+O,EACT3C,EAAO2C,EAAK1C,KACZwB,EAAGxB,GAAQyC,EAAUC,EAAI1C,KAIrC,OAAOwB,EAEX,SAASoB,EAAchH,EAAGC,EAAG2F,EAAIqB,GAqB7B,OApBArB,EAAKA,GAAM,GACXqB,EAAOA,GAAQ,GACf/F,EAAKlB,GAAGmB,QAAQ,SAAUiD,GACtB,GAAKD,EAAOlE,EAAGmE,GAEV,CACD,IAAI8C,EAAKlH,EAAEoE,GAAO+C,EAAKlH,EAAEmE,GACP,iBAAP8C,GAAiC,iBAAPC,GACjCD,GAAMC,GACL,GAAKD,EAAGH,aAAkB,GAAKI,EAAGJ,YACnCC,EAAcE,EAAIC,EAAIvB,EAAIqB,EAAO7C,EAAO,KACnC8C,IAAOC,IACZvB,EAAGqB,EAAO7C,GAAQnE,EAAEmE,SARxBwB,EAAGqB,EAAO7C,QAAQ5I,IAW1B0F,EAAKjB,GAAGkB,QAAQ,SAAUiD,GACjBD,EAAOnE,EAAGoE,KACXwB,EAAGqB,EAAO7C,GAAQnE,EAAEmE,MAGrBwB,EAEX,IAAIwB,EAAmC,oBAAX3E,QAA0BA,OAAO4E,SACzDC,EAAgBF,EAAiB,SAAUG,GAC3C,IAAI9L,EACJ,OAAY,MAAL8L,IAAc9L,EAAI8L,EAAEH,KAAoB3L,EAAEU,MAAMoL,IACvD,WAAc,OAAO,MACrBC,EAAgB,GACpB,SAASC,EAAWC,GAChB,IAAIjM,EAAGuE,EAAGuH,EAAGI,EACb,GAAyB,IAArBrE,UAAU5H,OAAc,CACxB,GAAI8H,EAAQkE,GACR,OAAOA,EAAUlG,QACrB,GAAI+B,OAASiE,GAAsC,iBAAdE,EACjC,MAAO,CAACA,GACZ,GAAKC,EAAKL,EAAcI,GAAa,CAEjC,IADA1H,EAAI,KACGuH,EAAII,EAAGC,QAAWC,MACrB7H,EAAExG,KAAK+N,EAAErN,OACb,OAAO8F,EAEX,GAAiB,MAAb0H,EACA,MAAO,CAACA,GAEZ,GAAiB,iBADjBjM,EAAIiM,EAAUhM,QACa,CAEvB,IADAsE,EAAI,IAAIyD,MAAMhI,GACPA,KACHuE,EAAEvE,GAAKiM,EAAUjM,GACrB,OAAOuE,EAEX,MAAO,CAAC0H,GAIZ,IAFAjM,EAAI6H,UAAU5H,OACdsE,EAAI,IAAIyD,MAAMhI,GACPA,KACHuE,EAAEvE,GAAK6H,UAAU7H,GACrB,OAAOuE,EAGX,IAAI8H,EAA4B,oBAAbC,UACf,6CAA6CC,KAAKD,SAASE,MAC/D,SAASC,EAAShO,EAAO0M,GACrBkB,EAAQ5N,EACRiO,EAAgBvB,EAEpB,IAAIuB,EAAgB,WAAc,OAAO,GACrCC,GAAyB,IAAIpL,MAAM,IAAIqL,MAC3C,SAASC,IACL,GAAIF,EACA,IACI,MAAM,IAAIpL,MAEd,MAAO5C,GACH,OAAOA,EAEf,OAAO,IAAI4C,MAEf,SAASuL,EAAYC,EAAWC,GAC5B,IAAIJ,EAAQG,EAAUH,MACtB,OAAKA,GAELI,EAAoBA,GAAoB,EACF,IAAlCJ,EAAM9O,QAAQiP,EAAU3O,QACxB4O,IAAqBD,EAAU3O,KAAO2O,EAAUE,SAAShC,MAAM,MAAMhL,QAClE2M,EAAM3B,MAAM,MACdlF,MAAMiH,GACN7B,OAAOuB,GACP5I,IAAI,SAAUoJ,GAAS,MAAO,KAAOA,IACrClI,KAAK,KARC,GAWf,IAkBImI,EAAmB,CACnB,UACA,aACA,OACA,sBACA,WACA,UACA,WACA,eACA,gBACA,QACA,UACA,gBACA,SACA,aAEAC,EAlCkB,CAClB,SACA,OACA,aACA,gBACA,SACA,UACA,eACA,aACA,iBACA,kBACA,iBACA,cACA,WACA,iBACA,kBACA,gBAkB4B/I,OAAO8I,GACnCE,EAAe,CACfC,eAAgB,wDAChBC,eAAgB,2BAChBC,MAAO,sBACPC,oBAAqB,+CAEzB,SAASC,EAAWtP,EAAMuP,GACtB7F,KAAK8F,GAAKf,IACV/E,KAAK1J,KAAOA,EACZ0J,KAAKmF,QAAUU,EAWnB,SAASE,EAAqBF,EAAKG,GAC/B,OAAOH,EAAM,aAAetR,OAAOoJ,KAAKqI,GACnChK,IAAI,SAAUuD,GAAO,OAAOyG,EAASzG,GAAK0G,aAC1C5C,OAAO,SAAU6C,EAAGhO,EAAG0H,GAAK,OAAOA,EAAE5J,QAAQkQ,KAAOhO,IACpDgF,KAAK,MAEd,SAASiJ,EAAYN,EAAKG,EAAUI,EAAcC,GAC9CrG,KAAK8F,GAAKf,IACV/E,KAAKgG,SAAWA,EAChBhG,KAAKqG,WAAaA,EAClBrG,KAAKoG,aAAeA,EACpBpG,KAAKmF,QAAUY,EAAqBF,EAAKG,GAG7C,SAASM,EAAUT,EAAKG,GACpBhG,KAAK8F,GAAKf,IACV/E,KAAK1J,KAAO,YACZ0J,KAAKgG,SAAWA,EAChBhG,KAAKmF,QAAUY,EAAqBF,EAAKG,GA3B7C7E,EAAOyE,GAAYvE,KAAK5H,OAAO6G,OAAO,CAClCwE,MAAO,CACHrO,IAAK,WACD,OAAOuJ,KAAKuG,SACPvG,KAAKuG,OAASvG,KAAK1J,KAAO,KAAO0J,KAAKmF,QAAUH,EAAYhF,KAAK8F,GAAI,MAGlFG,SAAU,WAAc,OAAOjG,KAAK1J,KAAO,KAAO0J,KAAKmF,WAe3DhE,EAAOgF,GAAa9E,KAAKuE,GAOzBzE,EAAOmF,GAAWjF,KAAKuE,GACvB,IAAIY,EAAWlB,EAAUmB,OAAO,SAAUlG,EAAKjK,GAAQ,OAAQiK,EAAIjK,GAAQA,EAAO,QAASiK,GAAS,IAChGmG,EAAgBd,EAChBe,EAAarB,EAAUmB,OAAO,SAAUlG,EAAKjK,GAC7C,IAAIsQ,EAAWtQ,EAAO,QACtB,SAASsP,EAAWiB,EAAYC,GAC5B9G,KAAK8F,GAAKf,IACV/E,KAAK1J,KAAOsQ,EACPC,EAI0B,iBAAfA,GACZ7G,KAAKmF,QAAe0B,GAAeC,EAAa,MAAQA,EAAb,IAC3C9G,KAAK8G,MAAQA,GAAS,MAEK,iBAAfD,IACZ7G,KAAKmF,QAAU0B,EAAWvQ,KAAO,IAAMuQ,EAAW1B,QAClDnF,KAAK8G,MAAQD,IATb7G,KAAKmF,QAAUI,EAAajP,IAASsQ,EACrC5G,KAAK8G,MAAQ,MAarB,OAFA3F,EAAOyE,GAAYvE,KAAKqF,GACxBnG,EAAIjK,GAAQsP,EACLrF,GACR,IACHoG,EAAWI,OAASC,YACpBL,EAAWM,KAAOC,UAClBP,EAAWQ,MAAQC,WACnB,IAAIC,EAAehC,EAAiBoB,OAAO,SAAUlG,EAAKjK,GAEtD,OADAiK,EAAIjK,EAAO,SAAWqQ,EAAWrQ,GAC1BiK,GACR,IAYH,IAAI+G,EAAqBhC,EAAUmB,OAAO,SAAUlG,EAAKjK,GAGrD,OAFmD,IAA/C,CAAC,SAAU,OAAQ,SAASN,QAAQM,KACpCiK,EAAIjK,EAAO,SAAWqQ,EAAWrQ,IAC9BiK,GACR,IAKH,SAASgH,KACT,SAASC,EAAOlF,GAAO,OAAOA,EAC9B,SAASmF,EAAkBC,EAAIC,GAC3B,OAAU,MAAND,GAAcA,IAAOF,EACdG,EACJ,SAAUrF,GACb,OAAOqF,EAAGD,EAAGpF,KAGrB,SAASsF,GAASC,EAAKC,GACnB,OAAO,WACHD,EAAIjP,MAAMoH,KAAMD,WAChB+H,EAAIlP,MAAMoH,KAAMD,YAGxB,SAASgI,GAAkBL,EAAIC,GAC3B,OAAID,IAAOH,EACAI,EACJ,WACH,IAAIK,EAAMN,EAAG9O,MAAMoH,KAAMD,gBACb9H,IAAR+P,IACAjI,UAAU,GAAKiI,GACnB,IAAIC,EAAYjI,KAAKiI,UACrBC,EAAUlI,KAAKkI,QACflI,KAAKiI,UAAY,KACjBjI,KAAKkI,QAAU,KACf,IAAIC,EAAOR,EAAG/O,MAAMoH,KAAMD,WAK1B,OAJIkI,IACAjI,KAAKiI,UAAYjI,KAAKiI,UAAYL,GAASK,EAAWjI,KAAKiI,WAAaA,GACxEC,IACAlI,KAAKkI,QAAUlI,KAAKkI,QAAUN,GAASM,EAASlI,KAAKkI,SAAWA,QACpDjQ,IAATkQ,EAAqBA,EAAOH,GAG3C,SAASI,GAAkBV,EAAIC,GAC3B,OAAID,IAAOH,EACAI,EACJ,WACHD,EAAG9O,MAAMoH,KAAMD,WACf,IAAIkI,EAAYjI,KAAKiI,UACrBC,EAAUlI,KAAKkI,QACflI,KAAKiI,UAAYjI,KAAKkI,QAAU,KAChCP,EAAG/O,MAAMoH,KAAMD,WACXkI,IACAjI,KAAKiI,UAAYjI,KAAKiI,UAAYL,GAASK,EAAWjI,KAAKiI,WAAaA,GACxEC,IACAlI,KAAKkI,QAAUlI,KAAKkI,QAAUN,GAASM,EAASlI,KAAKkI,SAAWA,IAG5E,SAASG,GAAkBX,EAAIC,GAC3B,OAAID,IAAOH,EACAI,EACJ,SAAUW,GACb,IAAIN,EAAMN,EAAG9O,MAAMoH,KAAMD,WACzBO,EAAOgI,EAAeN,GACtB,IAAIC,EAAYjI,KAAKiI,UACrBC,EAAUlI,KAAKkI,QACflI,KAAKiI,UAAY,KACjBjI,KAAKkI,QAAU,KACf,IAAIC,EAAOR,EAAG/O,MAAMoH,KAAMD,WAK1B,OAJIkI,IACAjI,KAAKiI,UAAYjI,KAAKiI,UAAYL,GAASK,EAAWjI,KAAKiI,WAAaA,GACxEC,IACAlI,KAAKkI,QAAUlI,KAAKkI,QAAUN,GAASM,EAASlI,KAAKkI,SAAWA,QACrDjQ,IAAR+P,OACO/P,IAATkQ,OAAqBlQ,EAAYkQ,EACjC7H,EAAO0H,EAAKG,IAGzB,SAASI,GAA2Bb,EAAIC,GACpC,OAAID,IAAOH,EACAI,EACJ,WACH,OAAkC,IAA9BA,EAAG/O,MAAMoH,KAAMD,YAEZ2H,EAAG9O,MAAMoH,KAAMD,YAI9B,SAASyI,GAAgBd,EAAIC,GACzB,OAAID,IAAOH,EACAI,EACJ,WACH,IAAIK,EAAMN,EAAG9O,MAAMoH,KAAMD,WACzB,GAAIiI,GAA2B,mBAAbA,EAAIhR,KAAqB,CAEvC,IADA,IAAIyR,EAAOzI,KAAM9H,EAAI6H,UAAU5H,OAAQsJ,EAAO,IAAIvB,MAAMhI,GACjDA,KACHuJ,EAAKvJ,GAAK6H,UAAU7H,GACxB,OAAO8P,EAAIhR,KAAK,WACZ,OAAO2Q,EAAG/O,MAAM6P,EAAMhH,KAG9B,OAAOkG,EAAG/O,MAAMoH,KAAMD,YAhG9BuH,EAAmBnB,YAAcA,EACjCmB,EAAmB1B,WAAaA,EAChC0B,EAAmBhB,UAAYA,EAkG/B,IAAIoC,GAAW,GACXC,GAAyB,IAEzBC,GAAkB,EAClBC,GAAgC,WAChC,IACI,OAAO,IAAIC,SAAS,gGAAb,GAEX,MAAOjS,GACH,IAAIkS,EAAI5I,EAAQxG,QAChB,OAAOoP,EACH,CAACA,EAAEnP,UAAWmP,EAAEvU,UAAWuU,EAAEnP,WAC7B,IARwB,GAWhCoP,GAAwBH,GAA8B,GACtDI,GAAqBJ,GAA8B,GACnDK,GAAwBL,GAA8B,GACtDM,GAAoBF,IAAsBA,GAAmBjS,KAC7DoS,GAAgBJ,IAAyBA,GAAsBxF,YAC/D6F,GAAgBR,GAA8B,GAC9CS,KAAuBJ,GACvBK,IAAwB,EACxBC,GAAuBN,GACvB,WAAcA,GAAsBlS,KAAKyS,KAErCtJ,EAAQ8B,aACJA,aAAazC,KAAK,KAAMiK,IACxBtJ,EAAQuJ,iBACJ,WACI,IAAIC,EAAY7O,SAASC,cAAc,OACvC,IAAK2O,iBAAiB,WAClBD,KACAE,EAAY,OACZC,QAAQD,EAAW,CAAEE,YAAY,IACrCF,EAAUG,aAAa,IAAK,MAEhC,WAAc5H,WAAWuH,GAAc,IACnDM,GAAS,SAAU/R,EAAUyJ,GAC7BuI,GAAe/T,KAAK,CAAC+B,EAAUyJ,IAC3BwI,KACAT,KACAS,IAAuB,IAG3BC,IAAqB,EACrBD,IAAuB,EACvBE,GAAkB,GAClBC,GAAkB,GAClBC,GAAmB,KACnBC,GAAkB9C,EAClB+C,GAAY,CACZ/Q,GAAI,SACJ6G,QAAQ,EACRmK,IAAK,EACLC,WAAY,GACZC,YAAaC,GACbC,KAAK,EACLC,IAAK,GACLC,SAAU,WACN9K,KAAKyK,WAAW7M,QAAQ,SAAUmN,GAC9B,IACIJ,GAAYI,EAAG,GAAIA,EAAG,IAE1B,MAAOlU,SAIfmU,GAAMT,GACNP,GAAiB,GACjBiB,GAAoB,EACpBC,GAAiB,GACrB,SAASC,GAAUxV,GACf,GAAoB,iBAATqK,KACP,MAAM,IAAIkH,UAAU,wCACxBlH,KAAKoL,WAAa,GAClBpL,KAAKqL,YAAc9D,EACnBvH,KAAKsL,MAAO,EACZ,IAAIC,EAAOvL,KAAKwL,KAAOR,GAMvB,GALIzG,IACAvE,KAAKyL,aAAe1G,IACpB/E,KAAK0L,MAAQ,KACb1L,KAAK2L,SAAW,GAEF,mBAAPhW,EAAmB,CAC1B,GAAIA,IAAO+S,GACP,MAAM,IAAIxB,UAAU,kBAKxB,OAJAlH,KAAK4L,OAAS7L,UAAU,GACxBC,KAAK6L,OAAS9L,UAAU,SACJ,IAAhBC,KAAK4L,QACLE,GAAgB9L,KAAMA,KAAK6L,SAGnC7L,KAAK4L,OAAS,KACd5L,KAAK6L,OAAS,OACZN,EAAIf,IA4JV,SAASuB,EAAmBnR,EAASjF,GACjC,IACIA,EAAG,SAAUgB,GACT,GAAuB,OAAnBiE,EAAQgR,OAAZ,CAEA,GAAIjV,IAAUiE,EACV,MAAM,IAAIsM,UAAU,6CACxB,IAAI8E,EAAoBpR,EAAQ0Q,MAAQW,KACpCtV,GAA+B,mBAAfA,EAAMK,KACtB+U,EAAmBnR,EAAS,SAAUhB,EAASC,GAC3ClD,aAAiBwU,GACbxU,EAAMuV,MAAMtS,EAASC,GACrBlD,EAAMK,KAAK4C,EAASC,MAI5Be,EAAQgR,QAAS,EACjBhR,EAAQiR,OAASlV,EACjBwV,GAAsBvR,IAEtBoR,GACAI,OACLN,GAAgBtM,KAAK,KAAM5E,IAElC,MAAOyR,GACHP,GAAgBlR,EAASyR,IApL7BN,CAAmB/L,KAAMrK,GAE7B,IAAI2W,GAAW,CACX7V,IAAK,WACD,IAAI8U,EAAMP,GAAKuB,EAAcC,GAC7B,SAASxV,EAAKyV,EAAaC,GACvB,IAAIC,EAAQ3M,KACR4M,GAAiBrB,EAAIlL,SAAWkL,IAAQP,IAAOuB,IAAgBC,IAC/DI,GACAC,KACJ,IAAIxK,EAAK,IAAI8I,GAAU,SAAUvR,EAASC,GACtCiT,GAAoBH,EAAO,IAAII,GAASC,GAA0BP,EAAalB,EAAKqB,GAAgBI,GAA0BN,EAAYnB,EAAKqB,GAAgBhT,EAASC,EAAQ0R,MAGpL,OADAhH,GAAS0I,GAAsB5K,EAAIrC,MAC5BqC,EAGX,OADArL,EAAKxC,UAAYkU,GACV1R,GAEXN,IAAK,SAAUC,GACXqK,EAAQhB,KAAM,OAAQrJ,GAASA,EAAMnC,YAAckU,GAC/C4D,GACA,CACI7V,IAAK,WACD,OAAOE,GAEXD,IAAK4V,GAAS5V,QA0D9B,SAASqW,GAASN,EAAaC,EAAY9S,EAASC,EAAQqT,GACxDlN,KAAKyM,YAAqC,mBAAhBA,EAA6BA,EAAc,KACrEzM,KAAK0M,WAAmC,mBAAfA,EAA4BA,EAAa,KAClE1M,KAAKpG,QAAUA,EACfoG,KAAKnG,OAASA,EACdmG,KAAKuL,IAAM2B,EA8Ff,SAASpB,GAAgBlR,EAASuS,GAE9B,GADA/C,GAAgBnU,KAAKkX,GACE,OAAnBvS,EAAQgR,OAAZ,CAEA,IAAII,EAAoBpR,EAAQ0Q,MAAQW,KACxCkB,EAAS7C,GAAgB6C,GACzBvS,EAAQgR,QAAS,EACjBhR,EAAQiR,OAASsB,EACjB5I,GAAoB,OAAX4I,GAAqC,iBAAXA,IAAwBA,EAAOC,UA/sBtE,SAAkBzX,EAAIuS,EAASzG,GAC3B,IACI9L,EAAGiD,MAAM,KAAM6I,GAEnB,MAAO4K,GACHnE,GAAWA,EAAQmE,IA0sBuDgB,CAAS,WACnF,IAAIC,EAhvBZ,SAASC,EAAsBhN,EAAKM,GAChC,IACIE,EACJ,OAFSQ,EAAyBhB,EAAKM,KAEzBE,EAAQN,EAASF,KAASgN,EAAsBxM,EAAOF,GA6uBlD0M,CAAsBJ,EAAQ,SAC7CA,EAAOC,SAAWxS,EAClBoG,EAAQmM,EAAQ,QAAS,CACrB1W,IAAK,WACD,OAAO8S,GACH+D,IAAaA,EAAS7W,IAClB6W,EAAS7W,IAAImC,MAAMuU,GACnBG,EAAS3W,OACbiE,EAAQkK,WAiJ5B,SAAmClK,GAC1BuP,GAAgBqD,KAAK,SAAUxT,GAAK,OAAOA,EAAE6R,SAAWjR,EAAQiR,UACjE1B,GAAgBlU,KAAK2E,GA/IzB6S,CAA0B7S,GAC1BuR,GAAsBvR,GAClBoR,GACAI,MAER,SAASD,GAAsBvR,GAC3B,IAAI8S,EAAY9S,EAAQwQ,WACxBxQ,EAAQwQ,WAAa,GACrB,IAAK,IAAIlT,EAAI,EAAGyV,EAAMD,EAAUvV,OAAQD,EAAIyV,IAAOzV,EAC/C4U,GAAoBlS,EAAS8S,EAAUxV,IAE3C,IAAIqT,EAAM3Q,EAAQ4Q,OAChBD,EAAIf,KAAOe,EAAIT,WACS,IAAtBG,OACEA,GACFlB,GAAO,WACyB,KAAtBkB,IACF2C,MACL,KAGX,SAASd,GAAoBlS,EAASiT,GAClC,GAAuB,OAAnBjT,EAAQgR,OAAZ,CAIA,IAAInQ,EAAKb,EAAQgR,OAASiC,EAASpB,YAAcoB,EAASnB,WAC1D,GAAW,OAAPjR,EACA,OAAQb,EAAQgR,OAASiC,EAASjU,QAAUiU,EAAShU,QAAQe,EAAQiR,UAEvEgC,EAAStC,IAAIf,MACbS,GACFlB,GAAO+D,GAAc,CAACrS,EAAIb,EAASiT,SAT/BjT,EAAQwQ,WAAWnV,KAAK4X,GAWhC,SAASC,GAAarS,EAAIb,EAASiT,GAC/B,IACIxD,GAAmBzP,EACnB,IAAImT,EAAKpX,EAAQiE,EAAQiR,OACrBjR,EAAQgR,OACRmC,EAAMtS,EAAG9E,IAGLyT,GAAgBjS,SAChBiS,GAAkB,IACtB2D,EAAMtS,EAAG9E,IAC+B,IAApCyT,GAAgBpU,QAAQW,IAoGxC,SAA4BiE,GACxB,IAAI1C,EAAIiS,GAAgBhS,OACxB,KAAOD,GACH,GAAIiS,KAAkBjS,GAAG2T,SAAWjR,EAAQiR,OAExC,YADA1B,GAAgB1R,OAAOP,EAAG,GAvGtB8V,CAAmBpT,IAE3BiT,EAASjU,QAAQmU,GAErB,MAAOlX,GACHgX,EAAShU,OAAOhD,GAEpB,QACIwT,GAAmB,KACS,KAAtBY,IACF2C,OACFC,EAAStC,IAAIf,KAAOqD,EAAStC,IAAIT,YA6B3C,SAASmC,GAAsBrS,EAASqT,GACpC,IAAIC,EAAUD,EAAOA,EAAKtC,SAAW,EAAI,EACrCuC,EAAUvF,KACV/N,EAAQ8Q,MAAQuC,EAChBrT,EAAQ+Q,SAAWuC,GAG3B,SAASzE,KACLwC,MAAyBG,KAE7B,SAASH,KACL,IAAIkC,EAAcjE,GAGlB,OAFAA,IAAqB,EACrBD,IAAuB,EAChBkE,EAEX,SAAS/B,KACL,IAAI9N,EAAWpG,EAAGa,EAClB,GACI,KAAOiR,GAAe7R,OAAS,GAI3B,IAHAmG,EAAY0L,GACZA,GAAiB,GACjBjR,EAAIuF,EAAUnG,OACTD,EAAI,EAAGA,EAAIa,IAAKb,EAAG,CACpB,IAAIyE,EAAO2B,EAAUpG,GACrByE,EAAK,GAAG/D,MAAM,KAAM+D,EAAK,WAG5BqN,GAAe7R,OAAS,GACjC+R,IAAqB,EACrBD,IAAuB,EAE3B,SAAS2D,KACL,IAAIQ,EAAgBjE,GACpBA,GAAkB,GAClBiE,EAAcxQ,QAAQ,SAAU5D,GAC5BA,EAAEwR,KAAKd,YAAYhW,KAAK,KAAMsF,EAAE6R,OAAQ7R,KAI5C,IAFA,IAAIqU,EAAanD,GAAejN,MAAM,GAClC/F,EAAImW,EAAWlW,OACZD,GACHmW,IAAanW,KA0BrB,SAASoW,GAAcnB,GACnB,OAAO,IAAIhC,GAAUzC,IAAU,EAAOyE,GAE1C,SAASoB,GAAK5Y,EAAI6Y,GACd,IAAIjD,EAAMP,GACV,OAAO,WACH,IAAImD,EAAclC,KAAuBwC,EAAazD,GACtD,IAEI,OADA0D,GAAanD,GAAK,GACX5V,EAAGiD,MAAMoH,KAAMD,WAE1B,MAAOlJ,GACH2X,GAAgBA,EAAa3X,GAEjC,QACI6X,GAAaD,GAAY,GACrBN,GACA/B,OAxVhBtL,EAAMqK,GAAU3W,UAAW,CACvBwC,KAAMsV,GACNJ,MAAO,SAAUO,EAAaC,GAC1BI,GAAoB9M,KAAM,IAAI+M,GAAS,KAAM,KAAMN,EAAaC,EAAY1B,MAEhF2D,MAAO,SAAUjC,GACb,GAAyB,IAArB3M,UAAU5H,OACV,OAAO6H,KAAKhJ,KAAK,KAAM0V,GAC3B,IAAItQ,EAAO2D,UAAU,GAAI6O,EAAU7O,UAAU,GAC7C,MAAuB,mBAAT3D,EAAsB4D,KAAKhJ,KAAK,KAAM,SAAUE,GAC1D,OAAOA,aAAekF,EAAOwS,EAAQ1X,GAAOoX,GAAcpX,KAExD8I,KAAKhJ,KAAK,KAAM,SAAUE,GACxB,OAAOA,GAAOA,EAAIZ,OAAS8F,EAAOwS,EAAQ1X,GAAOoX,GAAcpX,MAG3E2X,QAAS,SAAUC,GACf,OAAO9O,KAAKhJ,KAAK,SAAUL,GAEvB,OADAmY,IACOnY,GACR,SAAUO,GAET,OADA4X,IACOR,GAAcpX,MAG7B4N,MAAO,CACHrO,IAAK,WACD,GAAIuJ,KAAKuG,OACL,OAAOvG,KAAKuG,OAChB,IACIgD,IAAwB,EACxB,IACIzE,EA0MpB,SAASiK,EAASnU,EAASoU,EAAQC,GAC/B,GAAID,EAAO7W,SAAW8W,EAClB,OAAOD,EACX,IAAIlK,EAAQ,GACZ,IAAuB,IAAnBlK,EAAQgR,OAAkB,CAC1B,IAA8BsD,EAAW/J,EAArCgK,EAAUvU,EAAQiR,OACP,MAAXsD,GACAD,EAAYC,EAAQ7Y,MAAQ,QAC5B6O,EAAUgK,EAAQhK,SAAWgK,EAC7BrK,EAAQE,EAAYmK,EAAS,KAG7BD,EAAYC,EACZhK,EAAU,IAEd6J,EAAO/Y,KAAKiZ,GAAa/J,EAAU,KAAOA,EAAU,IAAML,GAE1DP,KACAO,EAAQE,EAAYpK,EAAQ6Q,aAAc,MACF,IAA3BuD,EAAOhZ,QAAQ8O,IACxBkK,EAAO/Y,KAAK6O,GACZlK,EAAQ8Q,OACRqD,EAASnU,EAAQ8Q,MAAOsD,EAAQC,IAExC,OAAOD,EAnOkBD,CAAS/O,KAAM,GA3JtB,IA4Ja9C,KAAK,qBAGxB,OAFoB,OAAhB8C,KAAK4L,SACL5L,KAAKuG,OAASzB,GACXA,EAEX,QACIyE,IAAwB,KAIpCrP,QAAS,SAAUkV,EAAIvJ,GACnB,IAAI8G,EAAQ3M,KACZ,OAAOoP,EAAKC,IACR,IAAIlE,GAAU,SAAUvR,EAASC,GAC7B,IAAIyV,EAASpN,WAAW,WAAc,OAAOrI,EAAO,IAAI8M,EAAW4I,QAAQ1J,KAAUuJ,GACrFzC,EAAM3V,KAAK4C,EAASC,GAAQgV,QAAQW,aAAahQ,KAAK,KAAM8P,MAC3DtP,QAGK,oBAAXd,QAA0BA,OAAOC,aACxC6B,EAAQmK,GAAU3W,UAAW0K,OAAOC,YAAa,WACrDoL,GAAUM,IAAM4E,KAQhB3O,EAAMqK,GAAW,CACbuE,IAAK,WACD,IAAIC,EAASzL,EAAWtL,MAAM,KAAMmH,WAC/B/D,IAAI4T,IACT,OAAO,IAAIzE,GAAU,SAAUvR,EAASC,GACd,IAAlB8V,EAAOxX,QACPyB,EAAQ,IACZ,IAAIiW,EAAYF,EAAOxX,OACvBwX,EAAO/R,QAAQ,SAAUnB,EAAGvE,GAAK,OAAOiT,GAAUvR,QAAQ6C,GAAGzF,KAAK,SAAUgN,GACxE2L,EAAOzX,GAAK8L,IACL6L,GACHjW,EAAQ+V,IACb9V,QAGXD,QAAS,SAAUjD,GACf,GAAIA,aAAiBwU,GACjB,OAAOxU,EACX,GAAIA,GAA+B,mBAAfA,EAAMK,KACtB,OAAO,IAAImU,GAAU,SAAUvR,EAASC,GACpClD,EAAMK,KAAK4C,EAASC,KAE5B,IAAIwI,EAAK,IAAI8I,GAAUzC,IAAU,EAAM/R,GAEvC,OADAsW,GAAsB5K,EAAIgI,IACnBhI,GAEXxI,OAAQyU,GACRwB,KAAM,WACF,IAAIH,EAASzL,EAAWtL,MAAM,KAAMmH,WAAW/D,IAAI4T,IACnD,OAAO,IAAIzE,GAAU,SAAUvR,EAASC,GACpC8V,EAAO3T,IAAI,SAAUrF,GAAS,OAAOwU,GAAUvR,QAAQjD,GAAOK,KAAK4C,EAASC,QAGpFmR,IAAK,CACDvU,IAAK,WAAc,OAAOuU,IAC1BtU,IAAK,SAAUC,GAAS,OAAOqU,GAAMrU,IAEzCoZ,OAAQC,GACRC,OAAQA,GACRC,UAAW,CACPzZ,IAAK,WAAc,OAAOsT,IAC1BrT,IAAK,SAAUC,GAASoT,GAASpT,IAErC2T,gBAAiB,CACb7T,IAAK,WAAc,OAAO6T,IAC1B5T,IAAK,SAAUC,GAAS2T,GAAkB3T,IAE9CwZ,OAAQ,SAAUxa,EAAIya,GAClB,OAAO,IAAIjF,GAAU,SAAUvR,EAASC,GACpC,OAAOmW,GAAS,SAAUpW,EAASC,GAC/B,IAAI0R,EAAMP,GACVO,EAAId,WAAa,GACjBc,EAAIb,YAAc7Q,EAClB0R,EAAIT,SAAWlD,GAAS,WACpB,IAAI+E,EAAQ3M,MA4LhC,SAAkDrK,GAK9CuV,GAAejV,KAJf,SAASoa,IACL1a,IACAuV,GAAezS,OAAOyS,GAAelV,QAAQqa,GAAY,OAG3DpF,GACFlB,GAAO,WACyB,KAAtBkB,IACF2C,MACL,IArMa0C,CAAyC,WACT,IAA5B3D,EAAMlC,WAAWtS,OAAeyB,IAAYC,EAAO8S,EAAMlC,WAAW,OAEzEc,EAAIT,UACPnV,KACDya,EAAWxW,EAASC,QAmOnC,IAAI0W,GAAO,CAAEC,OAAQ,EAAGC,OAAQ,EAAGjX,GAAI,GACnCkX,GAAc,EACdC,GAAY,GACZC,GAAa,EACbpE,GAAc,EACdqE,GAAkB,EACtB,SAASb,GAASra,EAAImb,EAAUC,EAAIC,GAChC,IAAI1U,EAAS0O,GAAKO,EAAMhX,OAAO+K,OAAOhD,GACtCiP,EAAIjP,OAASA,EACbiP,EAAIf,IAAM,EACVe,EAAIlL,QAAS,EACbkL,EAAI/R,KAAOqX,GACX,IAAII,EAAY1G,GAAUM,IAC1BU,EAAIV,IAAMvB,GAAqB,CAC3B3P,QAASwR,GACT+F,YAAa,CAAEva,MAAOwU,GAAW5U,cAAc,EAAM2K,UAAU,GAC/DwO,IAAKvE,GAAUuE,IACfI,KAAM3E,GAAU2E,KAChBlW,QAASuR,GAAUvR,QACnBC,OAAQsR,GAAUtR,OAClBsX,MAAOC,GAAsBH,EAAUE,MAAO5F,GAC9C8F,MAAOD,GAAsBH,EAAUI,MAAO9F,IAC9C,GACAuF,GACAxQ,EAAOiL,EAAKuF,KACdxU,EAAOkO,IACTe,EAAIT,SAAW,aACT9K,KAAK1D,OAAOkO,KAAOxK,KAAK1D,OAAOwO,YAErC,IAAIzI,EAAK4N,GAAO1E,EAAK5V,EAAIob,EAAIC,GAG7B,OAFgB,IAAZzF,EAAIf,KACJe,EAAIT,WACDzI,EAEX,SAASiP,KAKL,OAJKf,GAAK/W,KACN+W,GAAK/W,KAAOkX,MACdH,GAAKC,OACPD,GAAKE,QAAU7H,GACR2H,GAAK/W,GAEhB,SAASqT,GAAwB0E,IACxBhB,GAAKC,QAAWe,GAAgBA,IAAiBhB,GAAK/W,KAErC,KAAhB+W,GAAKC,SACPD,GAAK/W,GAAK,GACd+W,GAAKE,OAASF,GAAKC,OAAS5H,IAEhC,SAASgH,GAAyB4B,GAC9B,OAAIjB,GAAKE,QAAUe,GAAmBA,EAAgBhO,cAAgB4F,IAClEkI,KACOE,EAAgBxa,KAAK,SAAUgN,GAElC,OADA6I,KACO7I,GACR,SAAUnN,GAET,OADAgW,KACO4E,GAAU5a,MAGlB2a,EAEX,SAASE,GAAcC,KACjBnF,GACG+D,GAAKE,QAA4B,KAAhBF,GAAKE,SACvBF,GAAKE,OAASF,GAAK/W,GAAK,GAE5BmX,GAAU1a,KAAK+U,IACf0D,GAAaiD,GAAY,GAE7B,SAASC,KACL,IAAI1E,EAAOyD,GAAUA,GAAUxY,OAAS,GACxCwY,GAAUxU,MACVuS,GAAaxB,GAAM,GAEvB,SAASwB,GAAaiD,EAAYE,GAC9B,IA8C4BC,EA9CxBC,EAAc/G,GAIlB,IAHI6G,GAAgBtB,GAAKE,QAAYG,MAAgBe,IAAe3G,IAAO4F,MAAkBA,IAAce,IAAe3G,MA6C9F8G,EA5CDD,EAAgBH,GAAclS,KAAK,KAAMmS,GAAcC,GA6ClFzI,GAAkBzU,KAAKsU,GAAuB8I,IA3C1CH,IAAe3G,KAEnBA,GAAM2G,EACFI,IAAgBxH,KAChBA,GAAUM,IAAM4E,MAChBnG,IAAoB,CACpB,IAAI0I,EAAgBzH,GAAUM,IAAIlR,QAC9BsY,EAAYN,EAAW9G,IAC3B5B,GAAmBjS,KAAOib,EAAUd,MACpCa,EAAcxd,UAAUwC,KAAOib,EAAUZ,OACrCU,EAAY1R,QAAUsR,EAAWtR,UACjC9L,OAAOqC,eAAeuJ,EAAS,UAAW8R,EAAUf,aACpDc,EAActC,IAAMuC,EAAUvC,IAC9BsC,EAAclC,KAAOmC,EAAUnC,KAC/BkC,EAAcpY,QAAUqY,EAAUrY,QAClCoY,EAAcnY,OAASoY,EAAUpY,SAI7C,SAAS4V,KACL,IAAIuC,EAAgB7R,EAAQxG,QAC5B,OAAO2P,GAAqB,CACxB3P,QAASqY,EACTd,YAAa3c,OAAOgN,yBAAyBpB,EAAS,WACtDuP,IAAKsC,EAActC,IACnBI,KAAMkC,EAAclC,KACpBlW,QAASoY,EAAcpY,QACvBC,OAAQmY,EAAcnY,OACtBsX,MAAOlI,GAAmBjS,KAC1Bqa,MAAOW,EAAcxd,UAAUwC,MAC/B,GAER,SAASiZ,GAAO1E,EAAK5V,EAAIob,EAAIC,EAAIkB,GAC7B,IAAIzD,EAAazD,GACjB,IAEI,OADA0D,GAAanD,GAAK,GACX5V,EAAGob,EAAIC,EAAIkB,GAEtB,QACIxD,GAAaD,GAAY,IAMjC,SAASzB,GAA0BrX,EAAIuX,EAAMN,GACzC,MAAqB,mBAAPjX,EAAoBA,EAAK,WACnC,IAAIwc,EAAYnH,GACZ4B,GACA0E,KACJ5C,GAAaxB,GAAM,GACnB,IACI,OAAOvX,EAAGiD,MAAMoH,KAAMD,WAE1B,QACI2O,GAAayD,GAAW,KAIpC,SAASf,GAAsBgB,EAAUlF,GACrC,OAAO,SAAUmF,EAAY3F,GACzB,OAAO0F,EAAS1d,KAAKsL,KAAMgN,GAA0BqF,EAAYnF,GAAM,GAAQF,GAA0BN,EAAYQ,GAAM,KAGnI,IAAIoF,GAAqB,qBACzB,SAAS3H,GAAYzT,EAAK0D,GACtB,IAAIyH,EACJ,IACIA,EAAKzH,EAAQyQ,YAAYnU,GAE7B,MAAOL,IACP,IAAW,IAAPwL,EACA,IACI,IAAIkQ,EAAOC,EAAY,CAAE5X,QAASA,EAASuS,OAAQjW,GAUnD,GATIiJ,EAAQrF,UAAYA,SAAS2X,cAC7BF,EAAQzX,SAAS2X,YAAY,UACvBC,UAAUJ,IAAoB,GAAM,GAC1ChS,EAAOiS,EAAOC,IAETrS,EAAQwS,aAEbrS,EADAiS,EAAQ,IAAII,YAAYL,GAAoB,CAAEM,OAAQJ,IACxCA,GAEdD,GAASpS,EAAQ0S,gBACjBA,cAAcN,IACTpS,EAAQ2S,uBAAyB3S,EAAQ4S,sBAC1C,IACI5S,EAAQ4S,qBAAqBR,GAEjC,MAAOS,IAEXzO,GAASgO,IAAUA,EAAMU,kBACzB9c,QAAQC,KAAK,yBAA2Bc,EAAI4N,OAAS5N,IAG7D,MAAOL,KAEf,IAAI4a,GAAYtG,GAAUtR,OA8B1B,IACIqZ,GAAYC,OAAOC,aAAa,OAEhCC,GAAuB,oGACvBC,GAAkB,mBAClBC,GAAc,GACdC,GAAkC,oBAAdC,WAA6B,sBAAsBhP,KAAKgP,UAAUC,WACtFC,GAA4BH,GAC5BI,GAA6BJ,GAC7BK,GAAwB,SAAUzO,GAAS,OAAQ,6BAA6BX,KAAKW,IACrF0O,GAAa,YAIjB,SAASC,GAAQC,EAASC,GACtB,OAAOD,EACHC,EACI,WAAc,OAAOD,EAAQpb,MAAMoH,KAAMD,YAAckU,EAAQrb,MAAMoH,KAAMD,YAC3EiU,EACJC,EAGR,IAAIC,GAAW,CACX9X,KAAM,EACN+X,OAAQ9E,IACR+E,WAAW,EACXC,MAAO,CAAC,IACRC,WAAW,GAGXC,GAAuB,WACvB,SAASA,KA8PT,OA5PAA,EAAM/f,UAAUggB,OAAS,SAAUld,EAAM3B,EAAI8e,GACzC,IAAIC,EAAQ1U,KAAK2U,KAAO3J,GAAI0J,MACxBE,EAAY5U,KAAK1J,KACrB,SAASue,EAAwBjb,EAASC,EAAQ6a,GAC9C,IAAKA,EAAMI,OAAOF,GACd,MAAM,IAAIjO,EAAWoO,SAAS,SAAWH,EAAY,4BACzD,OAAOjf,EAAG+e,EAAMM,SAAUN,GAE9B,IAAIvG,EAAclC,KAClB,IACI,OAAOyI,GAASA,EAAMO,KAAOjV,KAAKiV,GAC9BP,IAAU1J,GAAI0J,MACVA,EAAMtH,SAAS9V,EAAMud,EAAyBJ,GAC9CzE,GAAS,WAAc,OAAO0E,EAAMtH,SAAS9V,EAAMud,EAAyBJ,IAAiB,CAAEC,MAAOA,EAAOQ,UAAWlK,GAAIkK,WAAalK,KA1E7J,SAASmK,EAAgBF,EAAI3d,EAAM8d,EAAYzf,GAC3C,GAAKsf,EAAGrJ,OAAOyJ,cAAkBrK,GAAIsK,WAQhC,CACD,IAAIZ,EAAQO,EAAGM,mBAAmBje,EAAM8d,EAAYH,EAAGO,WACvD,IACId,EAAMpV,SAEV,MAAO+M,GACH,OAAOoF,GAAUpF,GAErB,OAAOqI,EAAMtH,SAAS9V,EAAM,SAAUsC,EAASC,GAC3C,OAAOmW,GAAS,WAEZ,OADAhF,GAAI0J,MAAQA,EACL/e,EAAGiE,EAASC,EAAQ6a,OAEhC1d,KAAK,SAAUsE,GACd,OAAOoZ,EAAMe,YAAYze,KAAK,WAAc,OAAOsE,MArBvD,IAAK2Z,EAAGrJ,OAAO8J,cAAe,CAC1B,IAAKT,EAAGU,SAASC,SACb,OAAOnE,GAAU,IAAI9K,EAAWlB,gBACpCwP,EAAGhb,OAAO0U,MAAMpH,GAEpB,OAAO0N,EAAGrJ,OAAOiK,eAAe7e,KAAK,WAAc,OAAOme,EAAgBF,EAAI3d,EAAM8d,EAAYzf,KAoExFwf,CAAgBnV,KAAKiV,GAAI3d,EAAM,CAAC0I,KAAK1J,MAAOue,GAEpD,QACQ1G,GACA/B,OAGZmI,EAAM/f,UAAUiC,IAAM,SAAUqf,EAAWra,GACvC,IAAIkR,EAAQ3M,KACZ,OAAI8V,GAAaA,EAAUtS,cAAgBjP,OAChCyL,KAAK+V,MAAMD,GAAWE,MAAMva,GAChCuE,KAAKwU,OAAO,WAAY,SAAUE,GACrC,OAAO/H,EAAMsJ,KAAKxf,IAAI,CAAEie,MAAOA,EAAOnV,IAAKuW,IACtC9e,KAAK,SAAUgR,GAAO,OAAO2E,EAAMuJ,KAAKC,QAAQC,KAAKpO,OAC3DhR,KAAKyE,IAEZ8Y,EAAM/f,UAAUuhB,MAAQ,SAAUM,GAC9B,GAA2B,iBAAhBA,EACP,OAAO,IAAIrW,KAAKiV,GAAGqB,YAAYtW,KAAMqW,GACzC,GAAIpW,EAAQoW,GACR,OAAO,IAAIrW,KAAKiV,GAAGqB,YAAYtW,KAAM,IAAMqW,EAAYnZ,KAAK,KAAO,KACvE,IAAIqZ,EAAW5Y,EAAK0Y,GACpB,GAAwB,IAApBE,EAASpe,OACT,OAAO6H,KACF+V,MAAMQ,EAAS,IACfC,OAAOH,EAAYE,EAAS,KACrC,IAAIE,EAAgBzW,KAAK8U,OAAO4B,QAAQna,OAAOyD,KAAK8U,OAAO6B,SAAStT,OAAO,SAAUuT,GACjF,OAAOA,EAAGC,UACNN,EAASO,MAAM,SAAU1U,GAAW,OAAOwU,EAAGxU,QAAQpM,QAAQoM,IAAY,KAC1EwU,EAAGxU,QAAQ0U,MAAM,SAAU1U,GAAW,OAAOmU,EAASvgB,QAAQoM,IAAY,MAC/E,GACH,GAAIqU,GAAiBzW,KAAKiV,GAAG8B,UAAY7D,GACrC,OAAOlT,KACF+V,MAAMU,EAAcngB,MACpBkgB,OAAOC,EAAcrU,QAAQpG,IAAI,SAAUgb,GAAM,OAAOX,EAAYW,OACxEP,GAAiBlS,GAClBpO,QAAQC,KAAK,aAAemE,KAAK0c,UAAUZ,GAAe,OAASrW,KAAK1J,KAAO,uCACrDigB,EAASrZ,KAAK,KAAO,KACnD,IAAIga,EAAYlX,KAAK8U,OAAOoC,UACxBC,EAAMnX,KAAKiV,GAAGmC,MAAMC,UACxB,SAASb,EAAO/Z,EAAGC,GACf,IACI,OAAyB,IAAlBya,EAAIG,IAAI7a,EAAGC,GAEtB,MAAO7F,GACH,OAAO,GAGf,IAAI0gB,EAAKhB,EAAS9P,OAAO,SAAU8Q,EAAInV,GACnC,IAAIoV,EAAYD,EAAG,GAAIE,EAAeF,EAAG,GACrCG,EAAQR,EAAU9U,GAClBzL,EAAQ0f,EAAYjU,GACxB,MAAO,CACHoV,GAAaE,EACbF,IAAcE,EACV3D,GAAQ0D,EAAcC,GAASA,EAAMC,MACjC,SAAU3T,GACN,IAAInD,EAAOsB,EAAa6B,EAAG5B,GAC3B,OAAOnC,EAAQY,IAASA,EAAK2M,KAAK,SAAU7Q,GAAQ,OAAO6Z,EAAO7f,EAAOgG,MACzE,SAAUqH,GAAK,OAAOwS,EAAO7f,EAAOwL,EAAa6B,EAAG5B,MAC1DqV,IAEX,CAAC,KAAM,OAAQjf,EAAM+e,EAAG,GAAIK,EAAiBL,EAAG,GACnD,OAAO/e,EACHwH,KAAK+V,MAAMvd,EAAIlC,MAAMkgB,OAAOH,EAAY7d,EAAI4J,UACvCiB,OAAOuU,GACZnB,EACIzW,KAAKqD,OAAOuU,GACZ5X,KAAK+V,MAAMQ,GAAUC,OAAO,KAExCjC,EAAM/f,UAAU6O,OAAS,SAAUuU,GAC/B,OAAO5X,KAAK6X,eAAeC,IAAIF,IAEnCrD,EAAM/f,UAAUujB,MAAQ,SAAUC,GAC9B,OAAOhY,KAAK6X,eAAeE,MAAMC,IAErCzD,EAAM/f,UAAUyjB,OAAS,SAAUA,GAC/B,OAAOjY,KAAK6X,eAAeI,OAAOA,IAEtC1D,EAAM/f,UAAUya,MAAQ,SAAUiJ,GAC9B,OAAOlY,KAAK6X,eAAe5I,MAAMiJ,IAErC3D,EAAM/f,UAAU2jB,KAAO,SAAUngB,GAC7B,OAAOgI,KAAK6X,eAAeM,KAAKngB,IAEpCuc,EAAM/f,UAAU4jB,QAAU,SAAUJ,GAChC,OAAOhY,KAAK6X,eAAeO,QAAQJ,IAEvCzD,EAAM/f,UAAUqjB,aAAe,WAC3B,OAAO,IAAI7X,KAAKiV,GAAGoD,WAAW,IAAIrY,KAAKiV,GAAGqB,YAAYtW,QAE1DuU,EAAM/f,UAAU8jB,QAAU,SAAUZ,GAChC,OAAO,IAAI1X,KAAKiV,GAAGoD,WAAW,IAAIrY,KAAKiV,GAAGqB,YAAYtW,KAAMC,EAAQyX,GAChE,IAAMA,EAAMxa,KAAK,KAAO,IACxBwa,KAERnD,EAAM/f,UAAU+jB,QAAU,WACtB,OAAOvY,KAAK6X,eAAeU,WAE/BhE,EAAM/f,UAAUgkB,WAAa,SAAUhV,GACnCxD,KAAK8U,OAAO2D,YAAcjV,EAC1B,IAAIkV,EAAW,SAAUnY,GACrB,IAAKA,EACD,OAAOA,EACX,IAAIyH,EAAMzT,OAAO+K,OAAOkE,EAAYhP,WACpC,IAAK,IAAIqK,KAAK0B,EACV,GAAIK,EAAOL,EAAK1B,GACZ,IACImJ,EAAInJ,GAAK0B,EAAI1B,GAEjB,MAAOmU,IACf,OAAOhL,GAOX,OALIhI,KAAK8U,OAAO4D,UACZ1Y,KAAKkW,KAAKC,QAAQwC,YAAY3Y,KAAK8U,OAAO4D,UAE9C1Y,KAAK8U,OAAO4D,SAAWA,EACvB1Y,KAAKkW,KAAK,UAAWwC,GACdlV,GAEX+Q,EAAM/f,UAAUokB,YAAc,WAK1B,OAAO5Y,KAAKwY,WAJZ,SAAeK,GACXvY,EAAON,KAAM6Y,MAKrBtE,EAAM/f,UAAUskB,IAAM,SAAUvY,EAAKhB,GACjC,IAAIoN,EAAQ3M,KACZ,OAAOA,KAAKwU,OAAO,YAAa,SAAUE,GACtC,OAAO/H,EAAMsJ,KAAK8C,OAAO,CAAErE,MAAOA,EAAOtY,KAAM,MAAOuB,KAAa,MAAP4B,EAAc,CAACA,GAAO,KAAMoQ,OAAQ,CAACpP,OAClGvJ,KAAK,SAAUgR,GAAO,OAAOA,EAAIgR,YAAc7N,GAAUtR,OAAOmO,EAAIhC,SAAS,IAAMgC,EAAIiR,aACrFjiB,KAAK,SAAUiiB,GAChB,IAAKtM,EAAMsJ,KAAKnB,OAAOoE,WAAWC,SAC9B,IACIzW,EAAanC,EAAKoM,EAAMsJ,KAAKnB,OAAOoE,WAAW9W,QAAS6W,GAE5D,MAAOjG,IAGX,OAAOiG,KAGf1E,EAAM/f,UAAU8F,OAAS,SAAU8e,EAAa9Q,GAC5C,GAA6B,iBAAlBA,GAA8BrI,EAAQqI,GAC7C,MAAM,IAAI3B,EAAW0S,gBAAgB,oCACzC,GAA2B,iBAAhBD,GAA6BnZ,EAAQmZ,GAU5C,OAAOpZ,KAAK+V,MAAM,OAAOS,OAAO4C,GAAaE,OAAOhR,GATpD3K,EAAK2K,GAAe1K,QAAQ,SAAUwE,GAClCM,EAAa0W,EAAahX,EAASkG,EAAclG,MAErD,IAAI7C,EAAM4C,EAAaiX,EAAapZ,KAAK8U,OAAO6B,QAAQvU,SACxD,YAAYnK,IAARsH,EACOkS,GAAU,IAAI9K,EAAW0S,gBAAgB,kDAC7CrZ,KAAK+V,MAAM,OAAOS,OAAOjX,GAAK+Z,OAAOhR,IAMpDiM,EAAM/f,UAAU+kB,IAAM,SAAUhZ,EAAKhB,GACjC,IAAIoN,EAAQ3M,KACZ,OAAOA,KAAKwU,OAAO,YAAa,SAAUE,GAAS,OAAO/H,EAAMsJ,KAAK8C,OAAO,CAAErE,MAAOA,EAAOtY,KAAM,MAAOuT,OAAQ,CAACpP,GAAM5C,KAAa,MAAP4B,EAAc,CAACA,GAAO,SAC/IvI,KAAK,SAAUgR,GAAO,OAAOA,EAAIgR,YAAc7N,GAAUtR,OAAOmO,EAAIhC,SAAS,IAAMgC,EAAIiR,aACvFjiB,KAAK,SAAUiiB,GAChB,IAAKtM,EAAMsJ,KAAKnB,OAAOoE,WAAWC,SAC9B,IACIzW,EAAanC,EAAKoM,EAAMsJ,KAAKnB,OAAOoE,WAAW9W,QAAS6W,GAE5D,MAAOjG,IAGX,OAAOiG,KAGf1E,EAAM/f,UAAUglB,OAAS,SAAUja,GAC/B,IAAIoN,EAAQ3M,KACZ,OAAOA,KAAKwU,OAAO,YAAa,SAAUE,GAAS,OAAO/H,EAAMsJ,KAAK8C,OAAO,CAAErE,MAAOA,EAAOtY,KAAM,SAAUuB,KAAM,CAAC4B,OAC9GvI,KAAK,SAAUgR,GAAO,OAAOA,EAAIgR,YAAc7N,GAAUtR,OAAOmO,EAAIhC,SAAS,SAAM/N,KAE5Fsc,EAAM/f,UAAUilB,MAAQ,WACpB,IAAI9M,EAAQ3M,KACZ,OAAOA,KAAKwU,OAAO,YAAa,SAAUE,GAAS,OAAO/H,EAAMsJ,KAAK8C,OAAO,CAAErE,MAAOA,EAAOtY,KAAM,cAAesd,MAAOxF,OACnHld,KAAK,SAAUgR,GAAO,OAAOA,EAAIgR,YAAc7N,GAAUtR,OAAOmO,EAAIhC,SAAS,SAAM/N,KAE5Fsc,EAAM/f,UAAUmlB,QAAU,SAAUC,GAChC,IAAIjN,EAAQ3M,KACZ,OAAOA,KAAKwU,OAAO,WAAY,SAAUE,GACrC,OAAO/H,EAAMsJ,KAAK4D,QAAQ,CACtBlc,KAAMic,EACNlF,MAAOA,OAInBH,EAAM/f,UAAUslB,QAAU,SAAUC,EAASH,GACzC,IAAIjN,EAAQ3M,KACZ,OAAOA,KAAKwU,OAAO,YAAa,SAAUE,GAEtC,IADe/H,EAAMsJ,KAAKnB,OAAOoE,WAAWC,UAC3BS,EACb,MAAM,IAAIjT,EAAW0S,gBAAgB,gEACzC,GAAIO,GAAWA,EAAQzhB,SAAW4hB,EAAQ5hB,OACtC,MAAM,IAAIwO,EAAW0S,gBAAgB,wDACzC,OAAO1M,EAAMsJ,KAAK8C,OAAO,CAAErE,MAAOA,EAAOtY,KAAM,MAAOuB,KAAMic,EAASjK,OAAQoK,IACxE/iB,KAAK,SAAUugB,GAChB,IAAIyB,EAAczB,EAAGyB,YAAaC,EAAa1B,EAAG0B,WAAYjT,EAAWuR,EAAGvR,SAC5E,GAAoB,IAAhBgT,EACA,OAAOC,EACX,MAAM,IAAI3S,EAAUqG,EAAMrW,KAAO,eAAiB0iB,EAAc,OAASe,EAAQ5hB,OAAS,qBAAsB5D,OAAOoJ,KAAKqI,GAAUhK,IAAI,SAAUge,GAAO,OAAOhU,EAASgU,WAIvLzF,EAAM/f,UAAUylB,QAAU,SAAUF,EAASH,GACzC,IAAIjN,EAAQ3M,KACZ,OAAOA,KAAKwU,OAAO,YAAa,SAAUE,GAEtC,IADe/H,EAAMsJ,KAAKnB,OAAOoE,WAAWC,UAC3BS,EACb,MAAM,IAAIjT,EAAW0S,gBAAgB,gEACzC,GAAIO,GAAWA,EAAQzhB,SAAW4hB,EAAQ5hB,OACtC,MAAM,IAAIwO,EAAW0S,gBAAgB,wDACzC,OAAO1M,EAAMsJ,KAAK8C,OAAO,CAAErE,MAAOA,EAAOtY,KAAM,MAAOuB,KAAMic,EAASjK,OAAQoK,IACxE/iB,KAAK,SAAUugB,GAChB,IAAIyB,EAAczB,EAAGyB,YAAaC,EAAa1B,EAAG0B,WAAYjT,EAAWuR,EAAGvR,SAC5E,GAAoB,IAAhBgT,EACA,OAAOC,EACX,MAAM,IAAI3S,EAAUqG,EAAMrW,KAAO,eAAiB0iB,EAAc,OAASe,EAAQ5hB,OAAS,qBAAsB5D,OAAOoJ,KAAKqI,GAAUhK,IAAI,SAAUge,GAAO,OAAOhU,EAASgU,WAIvLzF,EAAM/f,UAAU0lB,WAAa,SAAUN,GACnC,IAAIjN,EAAQ3M,KACZ,OAAOA,KAAKwU,OAAO,YAAa,SAAUE,GACtC,OAAO/H,EAAMsJ,KAAK8C,OAAO,CAAErE,MAAOA,EAAOtY,KAAM,SAAUuB,KAAMic,MAChE5iB,KAAK,SAAUugB,GACd,IAAIyB,EAAczB,EAAGyB,YAAaC,EAAa1B,EAAG0B,WAAYjT,EAAWuR,EAAGvR,SAC5E,GAAoB,IAAhBgT,EACA,OAAOC,EACX,MAAM,IAAI3S,EAAUqG,EAAMrW,KAAO,kBAAoB0iB,EAAc,OAASY,EAAQzhB,OAAS,qBAAsB6N,MAGpHuO,EA/Pe,GAkQ1B,SAAS4F,GAAOC,GACZ,IAAIC,EAAM,GACNhY,EAAK,SAAUiY,EAAWC,GAC1B,GAAIA,EAAY,CAEZ,IADA,IAAIriB,EAAI6H,UAAU5H,OAAQsJ,EAAO,IAAIvB,MAAMhI,EAAI,KACtCA,GACLuJ,EAAKvJ,EAAI,GAAK6H,UAAU7H,GAE5B,OADAmiB,EAAIC,GAAWE,UAAU5hB,MAAM,KAAM6I,GAC9B2Y,EAEN,GAA2B,iBAAhB,EACZ,OAAOC,EAAIC,IAGnBjY,EAAGoY,aAAe3B,EAClB,IAAK,IAAI5gB,EAAI,EAAGa,EAAIgH,UAAU5H,OAAQD,EAAIa,IAAKb,EAC3C4gB,EAAI/Y,UAAU7H,IAElB,OAAOmK,EACP,SAASyW,EAAIwB,EAAWI,EAAeC,GACnC,GAAyB,iBAAdL,EAAX,CAuBJ,IAA6BM,EArBpBF,IACDA,EAAgBnS,IACfoS,IACDA,EAAkBpT,GACtB,IAAIsT,EAAU,CACVC,YAAa,GACb1E,KAAMuE,EACNH,UAAW,SAAU/e,IACwB,IAArCof,EAAQC,YAAY9kB,QAAQyF,KAC5Bof,EAAQC,YAAY7kB,KAAKwF,GACzBof,EAAQzE,KAAOsE,EAAcG,EAAQzE,KAAM3a,KAGnDkd,YAAa,SAAUld,GACnBof,EAAQC,YAAcD,EAAQC,YAAYzX,OAAO,SAAU1N,GAAM,OAAOA,IAAO8F,IAC/Eof,EAAQzE,KAAOyE,EAAQC,YAAYrU,OAAOiU,EAAeC,KAIjE,OADAN,EAAIC,GAAajY,EAAGiY,GAAaO,EAC1BA,EAGPld,EADyBid,EAtBMN,GAuBrB1c,QAAQ,SAAU0c,GACxB,IAAI7Y,EAAOmZ,EAAIN,GACf,GAAIra,EAAQwB,GACRqX,EAAIwB,EAAWM,EAAIN,GAAW,GAAIM,EAAIN,GAAW,QAEhD,IAAa,SAAT7Y,EAaL,MAAM,IAAIkF,EAAW0S,gBAAgB,wBAZrC,IAAIwB,EAAU/B,EAAIwB,EAAW9S,EAAQ,WAEjC,IADA,IAAItP,EAAI6H,UAAU5H,OAAQsJ,EAAO,IAAIvB,MAAMhI,GACpCA,KACHuJ,EAAKvJ,GAAK6H,UAAU7H,GACxB2iB,EAAQC,YAAYld,QAAQ,SAAUjI,GAClCqM,EAAK,WACDrM,EAAGiD,MAAM,KAAM6I,aAW3C,SAASsZ,GAAqBvmB,EAAWgP,GAErC,OADArC,EAAOqC,GAAanC,KAAK,CAAE7M,UAAWA,IAC/BgP,EAkBX,SAASwX,GAAgBZ,EAAKa,GAC1B,QAASb,EAAI/W,QAAU+W,EAAIc,WAAad,EAAIe,MACvCF,EAAoBb,EAAIgB,WAAahB,EAAIiB,cAElD,SAASC,GAAUlB,EAAKzkB,GACpBykB,EAAI/W,OAAS0Q,GAAQqG,EAAI/W,OAAQ1N,GAErC,SAAS4lB,GAAgBnB,EAAKoB,EAASC,GACnC,IAAIC,EAAOtB,EAAIiB,aACfjB,EAAIiB,aAAeK,EAAO,WAAc,OAAO3H,GAAQ2H,IAAQF,MAAgBA,EAC/EpB,EAAIgB,UAAYK,IAAkBC,EAKtC,SAASC,GAAgBvB,EAAKwB,GAC1B,GAAIxB,EAAIyB,UACJ,OAAOD,EAAW1C,WACtB,IAAIxB,EAAQkE,EAAWE,kBAAkB1B,EAAI1C,OAC7C,IAAKA,EACD,MAAM,IAAI/Q,EAAWoV,OAAO,WAAa3B,EAAI1C,MAAQ,oBAAsBkE,EAAWtlB,KAAO,mBACjG,OAAOohB,EAEX,SAASsE,GAAW5B,EAAK6B,EAAWvH,GAChC,IAAIgD,EAAQiE,GAAgBvB,EAAK6B,EAAUnH,QAC3C,OAAOmH,EAAUD,WAAW,CACxBtH,MAAOA,EACP/E,QAASyK,EAAI8B,SACb3D,QAAqB,SAAZ6B,EAAI+B,IACbC,SAAUhC,EAAIgC,OACdC,MAAO,CACH3E,MAAOA,EACPgC,MAAOU,EAAIV,SAIvB,SAAS4C,GAAKlC,EAAKzkB,EAAI4mB,EAAWN,GAC9B,IAAI5Y,EAAS+W,EAAIiB,aAAetH,GAAQqG,EAAI/W,OAAQ+W,EAAIiB,gBAAkBjB,EAAI/W,OAC9E,GAAK+W,EAAIe,GAGJ,CACD,IAAIqB,EAAQ,GACRC,EAAQ,SAAU9f,EAAM+f,EAAQC,GAChC,IAAKtZ,GAAUA,EAAOqZ,EAAQC,EAAS,SAAUrhB,GAAU,OAAOohB,EAAOE,KAAKthB,IAAY,SAAUpE,GAAO,OAAOwlB,EAAOG,KAAK3lB,KAAU,CACpI,IAAIgiB,EAAawD,EAAOxD,WACpB3Z,EAAM,GAAK2Z,EACH,yBAAR3Z,IACAA,EAAM,GAAK,IAAIud,WAAW5D,IACzBtY,EAAO4b,EAAOjd,KACfid,EAAMjd,IAAO,EACb5J,EAAGgH,EAAM+f,EAAQC,MAI7B,OAAOhjB,QAAQ+V,IAAI,CACf0K,EAAIe,GAAG4B,SAASN,EAAOF,GACvBS,GAAQhB,GAAW5B,EAAK6B,EAAWM,GAAYnC,EAAIc,UAAWuB,GAAQrC,EAAI8B,UAAY9B,EAAI6C,eAlB9F,OAAOD,GAAQhB,GAAW5B,EAAK6B,EAAWM,GAAYxI,GAAQqG,EAAIc,UAAW7X,GAAS1N,GAAKykB,EAAI8B,UAAY9B,EAAI6C,aAsBvH,SAASD,GAAQE,EAAe7Z,EAAQ1N,EAAIsnB,GACxC,IACIE,EAAY5O,GADD0O,EAAc,SAAUjZ,EAAGtJ,EAAG+B,GAAK,OAAO9G,EAAGsnB,EAAYjZ,GAAItJ,EAAG+B,IAAQ9G,GAEvF,OAAOunB,EAAclmB,KAAK,SAAU0lB,GAChC,GAAIA,EACA,OAAOA,EAAOhb,MAAM,WAChB,IAAIhH,EAAI,WAAc,OAAOgiB,EAAOU,YAC/B/Z,IAAUA,EAAOqZ,EAAQ,SAAUW,GAAY,OAAO3iB,EAAI2iB,GAAa,SAAU/a,GAAOoa,EAAOE,KAAKta,GAAM5H,EAAI6M,GAAQ,SAAU1Q,GAAK6lB,EAAOG,KAAKhmB,GAAI6D,EAAI6M,KAC1J4V,EAAUT,EAAO/lB,MAAO+lB,EAAQ,SAAUW,GAAY,OAAO3iB,EAAI2iB,IACrE3iB,QAMhB,IAAI2d,GAA4B,WAC5B,SAASA,KA+WT,OA7WAA,EAAW7jB,UAAU8oB,MAAQ,SAAU3nB,EAAI8F,GACvC,IAAI2e,EAAMpa,KAAKud,KACf,OAAOnD,EAAI/b,MACP+b,EAAIoD,MAAMhJ,OAAO,KAAM/C,GAAUjS,KAAK,KAAM4a,EAAI/b,QAChD+b,EAAIoD,MAAMhJ,OAAO,WAAY7e,GAAIqB,KAAKyE,IAE9C4c,EAAW7jB,UAAUipB,OAAS,SAAU9nB,GACpC,IAAIykB,EAAMpa,KAAKud,KACf,OAAOnD,EAAI/b,MACP+b,EAAIoD,MAAMhJ,OAAO,KAAM/C,GAAUjS,KAAK,KAAM4a,EAAI/b,QAChD+b,EAAIoD,MAAMhJ,OAAO,YAAa7e,EAAI,WAE1C0iB,EAAW7jB,UAAUkpB,cAAgB,SAAU/nB,GAC3C,IAAIykB,EAAMpa,KAAKud,KACfnD,EAAIc,UAAYnH,GAAQqG,EAAIc,UAAWvlB,IAE3C0iB,EAAW7jB,UAAUuoB,SAAW,SAAUpnB,EAAI4mB,GAC1C,OAAOD,GAAKtc,KAAKud,KAAM5nB,EAAI4mB,EAAWvc,KAAKud,KAAKC,MAAMvH,OAE1DoC,EAAW7jB,UAAUmpB,MAAQ,SAAU7M,GACnC,IAAIzO,EAAK9N,OAAO+K,OAAOU,KAAKwD,YAAYhP,WAAY4lB,EAAM7lB,OAAO+K,OAAOU,KAAKud,MAI7E,OAHIzM,GACAxQ,EAAO8Z,EAAKtJ,GAChBzO,EAAGkb,KAAOnD,EACH/X,GAEXgW,EAAW7jB,UAAUopB,IAAM,WAEvB,OADA5d,KAAKud,KAAKN,YAAc,KACjBjd,MAEXqY,EAAW7jB,UAAU2jB,KAAO,SAAUxiB,GAClC,IAAIykB,EAAMpa,KAAKud,KACf,OAAOvd,KAAKsd,MAAM,SAAU5I,GAAS,OAAO4H,GAAKlC,EAAKzkB,EAAI+e,EAAO0F,EAAIoD,MAAMvH,SAE/EoC,EAAW7jB,UAAUujB,MAAQ,SAAUtc,GACnC,IAAIkR,EAAQ3M,KACZ,OAAOA,KAAKsd,MAAM,SAAU5I,GACxB,IAAI0F,EAAMzN,EAAM4Q,KACZtB,EAAY7B,EAAIoD,MAAMvH,KAC1B,GAAI+E,GAAgBZ,GAAK,GACrB,OAAO6B,EAAUlE,MAAM,CACnBrD,MAAOA,EACP2H,MAAO,CACH3E,MAAOiE,GAAgBvB,EAAK6B,EAAUnH,QACtC4E,MAAOU,EAAIV,SAEhB1iB,KAAK,SAAU+gB,GAAS,OAAO8F,KAAKC,IAAI/F,EAAOqC,EAAInL,SAGtD,IAAI8I,EAAQ,EACZ,OAAOuE,GAAKlC,EAAK,WAAuB,QAAPrC,GAAc,GAAUrD,EAAOuH,GAC3DjlB,KAAK,WAAc,OAAO+gB,MAEpC/gB,KAAKyE,IAEZ4c,EAAW7jB,UAAUupB,OAAS,SAAU3b,EAAS3G,GAC7C,IAAIuiB,EAAQ5b,EAAQe,MAAM,KAAKoV,UAAW0F,EAAWD,EAAM,GAAIE,EAAYF,EAAM7lB,OAAS,EAC1F,SAASgmB,EAAO5d,EAAKrI,GACjB,OAAIA,EACOimB,EAAO5d,EAAIyd,EAAM9lB,IAAKA,EAAI,GAC9BqI,EAAI0d,GAEf,IAAIG,EAA0B,SAAlBpe,KAAKud,KAAKpB,IAAiB,GAAK,EAC5C,SAASkC,EAAO5hB,EAAGC,GACf,IAAI4hB,EAAOH,EAAO1hB,EAAGyhB,GAAYK,EAAOJ,EAAOzhB,EAAGwhB,GAClD,OAAOI,EAAOC,GAAQH,EAAQE,EAAOC,EAAOH,EAAQ,EAExD,OAAOpe,KAAKoY,QAAQ,SAAU3b,GAC1B,OAAOA,EAAE+hB,KAAKH,KACfrnB,KAAKyE,IAEZ4c,EAAW7jB,UAAU4jB,QAAU,SAAU3c,GACrC,IAAIkR,EAAQ3M,KACZ,OAAOA,KAAKsd,MAAM,SAAU5I,GACxB,IAAI0F,EAAMzN,EAAM4Q,KAChB,GAAgB,SAAZnD,EAAI+B,KAAkBnB,GAAgBZ,GAAK,IAASA,EAAInL,MAAQ,EAAG,CACnE,IAAIwP,EAAgBrE,EAAI6C,YACpBvF,EAAQiE,GAAgBvB,EAAKA,EAAIoD,MAAMvH,KAAKnB,QAChD,OAAOsF,EAAIoD,MAAMvH,KAAKoG,MAAM,CACxB3H,MAAOA,EACPzF,MAAOmL,EAAInL,MACXU,QAAQ,EACR0M,MAAO,CACH3E,MAAOA,EACPgC,MAAOU,EAAIV,SAEhB1iB,KAAK,SAAUugB,GACd,IAAIjc,EAASic,EAAGjc,OAChB,OAAOmjB,EAAgBnjB,EAAOU,IAAIyiB,GAAiBnjB,IAIvD,IAAIojB,EAAM,GACV,OAAOpC,GAAKlC,EAAK,SAAUzd,GAAQ,OAAO+hB,EAAIzoB,KAAK0G,IAAU+X,EAAO0F,EAAIoD,MAAMvH,MAAMjf,KAAK,WAAc,OAAO0nB,KAEnHjjB,IAEP4c,EAAW7jB,UAAUyjB,OAAS,SAAUA,GACpC,IAAImC,EAAMpa,KAAKud,KACf,OAAItF,GAAU,EACHjY,MACXoa,EAAInC,QAAUA,EACV+C,GAAgBZ,GAChBmB,GAAgBnB,EAAK,WACjB,IAAIuE,EAAa1G,EACjB,OAAO,SAAUyE,EAAQC,GACrB,OAAmB,IAAfgC,IAEe,IAAfA,KACEA,GACK,IAEXhC,EAAQ,WACJD,EAAOC,QAAQgC,GACfA,EAAa,KAEV,OAKfpD,GAAgBnB,EAAK,WACjB,IAAIuE,EAAa1G,EACjB,OAAO,WAAc,QAAU0G,EAAa,KAG7C3e,OAEXqY,EAAW7jB,UAAUya,MAAQ,SAAUiJ,GAUnC,OATAlY,KAAKud,KAAKtO,MAAQ4O,KAAKC,IAAI9d,KAAKud,KAAKtO,MAAOiJ,GAC5CqD,GAAgBvb,KAAKud,KAAM,WACvB,IAAIqB,EAAW1G,EACf,OAAO,SAAUwE,EAAQC,EAAS/iB,GAG9B,QAFMglB,GAAY,GACdjC,EAAQ/iB,GACLglB,GAAY,KAExB,GACI5e,MAEXqY,EAAW7jB,UAAUqqB,MAAQ,SAAUjH,EAAgBkH,GAUnD,OATAxD,GAAUtb,KAAKud,KAAM,SAAUb,EAAQC,EAAS/iB,GAC5C,OAAIge,EAAe8E,EAAO/lB,SACtBgmB,EAAQ/iB,GACDklB,KAMR9e,MAEXqY,EAAW7jB,UAAUwhB,MAAQ,SAAUva,GACnC,OAAOuE,KAAKiP,MAAM,GAAGmJ,QAAQ,SAAU3b,GAAK,OAAOA,EAAE,KAAOzF,KAAKyE,IAErE4c,EAAW7jB,UAAUuqB,KAAO,SAAUtjB,GAClC,OAAOuE,KAAKuY,UAAUvC,MAAMva,IAEhC4c,EAAW7jB,UAAU6O,OAAS,SAAUuU,GAjO5C,IAAwBwC,EAAKzkB,EAsOrB,OAJA2lB,GAAUtb,KAAKud,KAAM,SAAUb,GAC3B,OAAO9E,EAAe8E,EAAO/lB,SAnOjByjB,EAqODpa,KAAKud,KArOC5nB,EAqOKiiB,EApO9BwC,EAAI4E,QAAUjL,GAAQqG,EAAI4E,QAASrpB,GAqOxBqK,MAEXqY,EAAW7jB,UAAUsjB,IAAM,SAAUzU,GACjC,OAAOrD,KAAKqD,OAAOA,IAEvBgV,EAAW7jB,UAAU2mB,GAAK,SAAU8D,GAChC,OAAO,IAAIjf,KAAKiV,GAAGqB,YAAYtW,KAAKud,KAAKC,MAAOyB,EAAWjf,OAE/DqY,EAAW7jB,UAAU+jB,QAAU,WAI3B,OAHAvY,KAAKud,KAAKpB,IAAyB,SAAlBnc,KAAKud,KAAKpB,IAAiB,OAAS,OACjDnc,KAAKkf,oBACLlf,KAAKkf,mBAAmBlf,KAAKud,KAAKpB,KAC/Bnc,MAEXqY,EAAW7jB,UAAU2qB,KAAO,WACxB,OAAOnf,KAAKuY,WAEhBF,EAAW7jB,UAAU4qB,QAAU,SAAU3jB,GACrC,IAAI2e,EAAMpa,KAAKud,KAEf,OADAnD,EAAI8B,UAAY9B,EAAI4E,QACbhf,KAAKmY,KAAK,SAAU7V,EAAKoa,GAAUjhB,EAAGihB,EAAOnd,IAAKmd,MAE7DrE,EAAW7jB,UAAU6qB,cAAgB,SAAU5jB,GAE3C,OADAuE,KAAKud,KAAKnB,OAAS,SACZpc,KAAKof,QAAQ3jB,IAExB4c,EAAW7jB,UAAU8qB,eAAiB,SAAU7jB,GAC5C,IAAI2e,EAAMpa,KAAKud,KAEf,OADAnD,EAAI8B,UAAY9B,EAAI4E,QACbhf,KAAKmY,KAAK,SAAU7V,EAAKoa,GAAUjhB,EAAGihB,EAAOxD,WAAYwD,MAEpErE,EAAW7jB,UAAUmJ,KAAO,SAAUlC,GAClC,IAAI2e,EAAMpa,KAAKud,KACfnD,EAAI8B,UAAY9B,EAAI4E,QACpB,IAAIviB,EAAI,GACR,OAAOuD,KAAKmY,KAAK,SAAUxb,EAAM+f,GAC7BjgB,EAAExG,KAAKymB,EAAOnd,OACfvI,KAAK,WACJ,OAAOyF,IACRzF,KAAKyE,IAEZ4c,EAAW7jB,UAAU+qB,YAAc,SAAU9jB,GACzC,IAAI2e,EAAMpa,KAAKud,KACf,GAAgB,SAAZnD,EAAI+B,KAAkBnB,GAAgBZ,GAAK,IAASA,EAAInL,MAAQ,EAChE,OAAOjP,KAAKsd,MAAM,SAAU5I,GACxB,IAAIgD,EAAQiE,GAAgBvB,EAAKA,EAAIoD,MAAMvH,KAAKnB,QAChD,OAAOsF,EAAIoD,MAAMvH,KAAKoG,MAAM,CACxB3H,MAAOA,EACP/E,QAAQ,EACRV,MAAOmL,EAAInL,MACXoN,MAAO,CACH3E,MAAOA,EACPgC,MAAOU,EAAIV,WAGpB1iB,KAAK,SAAUugB,GAEd,OADaA,EAAGjc,SAEjBtE,KAAKyE,GAEZ2e,EAAI8B,UAAY9B,EAAI4E,QACpB,IAAIviB,EAAI,GACR,OAAOuD,KAAKmY,KAAK,SAAUxb,EAAM+f,GAC7BjgB,EAAExG,KAAKymB,EAAOxD,cACfliB,KAAK,WACJ,OAAOyF,IACRzF,KAAKyE,IAEZ4c,EAAW7jB,UAAUgrB,WAAa,SAAU/jB,GAExC,OADAuE,KAAKud,KAAKnB,OAAS,SACZpc,KAAKrC,KAAKlC,IAErB4c,EAAW7jB,UAAUirB,SAAW,SAAUhkB,GACtC,OAAOuE,KAAKiP,MAAM,GAAGtR,KAAK,SAAUlB,GAAK,OAAOA,EAAE,KAAOzF,KAAKyE,IAElE4c,EAAW7jB,UAAUkrB,QAAU,SAAUjkB,GACrC,OAAOuE,KAAKuY,UAAUkH,SAAShkB,IAEnC4c,EAAW7jB,UAAUmrB,SAAW,WAC5B,IAAIvF,EAAMpa,KAAKud,KAAM/kB,EAAM4hB,EAAI1C,OAAS0C,EAAIoD,MAAM1I,OAAOoC,UAAUkD,EAAI1C,OACvE,IAAKlf,IAAQA,EAAImf,MACb,OAAO3X,KACX,IAAItJ,EAAM,GAOV,OANA4kB,GAAUtb,KAAKud,KAAM,SAAUb,GAC3B,IAAIkD,EAASlD,EAAOxD,WAAWjT,WAC3B4Z,EAAQjf,EAAOlK,EAAKkpB,GAExB,OADAlpB,EAAIkpB,IAAU,GACNC,IAEL7f,MAEXqY,EAAW7jB,UAAU8kB,OAAS,SAAUwG,GACpC,IAAInT,EAAQ3M,KACRoa,EAAMpa,KAAKud,KACf,OAAOvd,KAAKyd,OAAO,SAAU/I,GACzB,IAAIqL,EACJ,GAAuB,mBAAZD,EACPC,EAAWD,MAEV,CACD,IAAIvJ,EAAW5Y,EAAKmiB,GAChBE,EAAUzJ,EAASpe,OACvB4nB,EAAW,SAAUpjB,GAEjB,IADA,IAAIsjB,GAAmB,EACd/nB,EAAI,EAAGA,EAAI8nB,IAAW9nB,EAAG,CAC9B,IAAIkK,EAAUmU,EAASre,GAAIoK,EAAMwd,EAAQ1d,GACrCD,EAAaxF,EAAMyF,KAAaE,IAChCI,EAAa/F,EAAMyF,EAASE,GAC5B2d,GAAmB,GAG3B,OAAOA,GAGf,IAAIhE,EAAY7B,EAAIoD,MAAMvH,KACtBsB,EAAK0E,EAAUnH,OAAOoE,WAAYC,EAAW5B,EAAG4B,SAAU+G,EAAa3I,EAAG2I,WAC1EjR,EAAQ,aAAckR,GAAQ,EAAI,IAClC7I,EAAM3K,EAAMsI,GAAGgB,KAAKqB,IACpB8I,EAAgB,GAChBha,EAAe,EACfC,EAAa,GACbga,EAAoB,SAAUC,EAAetY,GAC7C,IAAIhC,EAAWgC,EAAIhC,SAAUgT,EAAchR,EAAIgR,YAE/C,IAAK,IAAIgB,KADT5T,GAAgBka,EAAgBtH,EAChBhT,EACZoa,EAAcnqB,KAAK+P,EAASgU,KAGpC,OAAOrN,EAAMgR,QAAQ4B,cAAcvoB,KAAK,SAAU4iB,GAC9C,IAAI2G,EAAY,SAAUtI,GACtB,IAAIF,EAAQ8F,KAAKC,IAAI7O,EAAO2K,EAAQzhB,OAAS8f,GAC7C,OAAOgE,EAAUpC,QAAQ,CAAEnF,MAAOA,EAAO/W,KAAMic,EAAQ3b,MAAMga,EAAQA,EAASF,KAAU/gB,KAAK,SAAU2Y,GAKnG,IAJA,IAAI6Q,EAAY,GACZC,EAAY,GACZC,EAAUvH,EAAW,GAAK,KAC1BwH,EAAa,GACRzoB,EAAI,EAAGA,EAAI6f,IAAS7f,EAAG,CAC5B,IAAI0oB,EAAYjR,EAAOzX,GACnB2oB,EAAQ,CACRlqB,MAAO2M,EAAUsd,GACjBjK,QAASiD,EAAQ3B,EAAS/f,KAEmB,IAA7C6nB,EAASrrB,KAAKmsB,EAAOA,EAAMlqB,MAAOkqB,KACf,MAAfA,EAAMlqB,MACNgqB,EAAW1qB,KAAK2jB,EAAQ3B,EAAS/f,IAE3BihB,GAAoE,IAAxD7B,EAAI4I,EAAWU,GAAYV,EAAWW,EAAMlqB,SAK9D8pB,EAAUxqB,KAAK4qB,EAAMlqB,OACjBwiB,GACAuH,EAAQzqB,KAAK2jB,EAAQ3B,EAAS/f,MANlCyoB,EAAW1qB,KAAK2jB,EAAQ3B,EAAS/f,IACjCsoB,EAAUvqB,KAAK4qB,EAAMlqB,SASjC,OAAOgD,QAAQC,QAAQ4mB,EAAUroB,OAAS,GACtC8jB,EAAUlD,OAAO,CAAErE,MAAOA,EAAOtY,KAAM,MAAOuT,OAAQ6Q,IACjDxpB,KAAK,SAAUgR,GAChB,IAAK,IAAIgS,KAAOhS,EAAIhC,SAChB2a,EAAWloB,OAAOsK,SAASiX,GAAM,GAErCqG,EAAkBG,EAAUroB,OAAQ6P,MACpChR,KAAK,SAAUgR,GAAO,OAAOyY,EAAUtoB,OAAS,GACpD8jB,EAAUlD,OAAO,CAAErE,MAAOA,EAAOtY,KAAM,MAAOuB,KAAM+iB,EAAS/Q,OAAQ8Q,IAChEzpB,KAAK,SAAUgR,GAAO,OAAOqY,EAAkBI,EAAUtoB,OAAQ6P,OAAahR,KAAK,WAAc,OAAO2pB,EAAWxoB,OAAS,GACjI8jB,EAAUlD,OAAO,CAAErE,MAAOA,EAAOtY,KAAM,SAAUuB,KAAMgjB,IAClD3pB,KAAK,SAAUgR,GAAO,OAAOqY,EAAkBM,EAAWxoB,OAAQ6P,OAAahR,KAAK,WACzF,OAAO4iB,EAAQzhB,OAAS8f,EAASF,GAASwI,EAAUtI,EAAShJ,QAIzE,OAAOsR,EAAU,GAAGvpB,KAAK,WACrB,GAAIopB,EAAcjoB,OAAS,EACvB,MAAM,IAAIgO,EAAY,sCAAuCia,EAAeha,EAAcC,GAC9F,OAAOuT,EAAQzhB,cAK/BkgB,EAAW7jB,UAAUglB,OAAS,WAC1B,IAAIY,EAAMpa,KAAKud,KAAM7D,EAAQU,EAAIV,MACjC,OAAIsB,GAAgBZ,KACdA,EAAIyB,YAAcjI,IAA8C,IAAf8F,EAAMtd,MAElD4D,KAAKyd,OAAO,SAAU/I,GACzB,IAAIwE,EAAakB,EAAIoD,MAAMvH,KAAKnB,OAAOoE,WACnC4H,EAAYpH,EAChB,OAAOU,EAAIoD,MAAMvH,KAAK8B,MAAM,CAAErD,MAAOA,EAAO2H,MAAO,CAAE3E,MAAOwB,EAAYQ,MAAOoH,KAAe9pB,KAAK,SAAU+gB,GACzG,OAAOqC,EAAIoD,MAAMvH,KAAK8C,OAAO,CAAErE,MAAOA,EAAOtY,KAAM,cAAesd,MAAOoH,IACpE9pB,KAAK,SAAUugB,GAChB,IAAIvR,EAAWuR,EAAGvR,SAA4DgT,GAArCzB,EAAG0B,WAAsB1B,EAAGwJ,QAAuBxJ,EAAGyB,aAC/F,GAAIA,EACA,MAAM,IAAI7S,EAAY,+BAAgC5R,OAAOoJ,KAAKqI,GAAUhK,IAAI,SAAUge,GAAO,OAAOhU,EAASgU,KAAUjC,EAAQiB,GACvI,OAAOjB,EAAQiB,QAKxBhZ,KAAKsZ,OAAO,SAAU3iB,EAAOyjB,GAAO,OAAOA,EAAIzjB,MAAQ,QAE3D0hB,EAhXoB,GAuZ/B,SAAS2I,GAAcvkB,EAAGC,GACtB,OAAOD,EAAIC,GAAK,EAAID,IAAMC,EAAI,EAAI,EAEtC,SAASukB,GAAqBxkB,EAAGC,GAC7B,OAAOD,EAAIC,GAAK,EAAID,IAAMC,EAAI,EAAI,EAGtC,SAASmgB,GAAKqE,EAAyBhqB,EAAKiqB,GACxC,IAAIC,EAAaF,aAAmC5K,GAChD,IAAI4K,EAAwB7I,WAAW6I,GACvCA,EAEJ,OADAE,EAAW7D,KAAKlf,MAAQ8iB,EAAI,IAAIA,EAAEjqB,GAAO,IAAIgQ,UAAUhQ,GAChDkqB,EAEX,SAASC,GAAgBC,GACrB,OAAO,IAAIA,EAAYjJ,WAAWiJ,EAAa,WAAc,OAAOC,GAAW,MAAQtS,MAAM,GAYjG,SAASuS,GAAWjiB,EAAKkiB,EAAUC,EAAaC,EAAarK,EAAK6E,GAG9D,IAFA,IAAIhkB,EAAS0lB,KAAKC,IAAIve,EAAIpH,OAAQwpB,EAAYxpB,QAC1CypB,GAAO,EACF1pB,EAAI,EAAGA,EAAIC,IAAUD,EAAG,CAC7B,IAAI2pB,EAAaJ,EAASvpB,GAC1B,GAAI2pB,IAAeF,EAAYzpB,GAC3B,OAAIof,EAAI/X,EAAIrH,GAAIwpB,EAAYxpB,IAAM,EACvBqH,EAAIkD,OAAO,EAAGvK,GAAKwpB,EAAYxpB,GAAKwpB,EAAYjf,OAAOvK,EAAI,GAClEof,EAAI/X,EAAIrH,GAAIypB,EAAYzpB,IAAM,EACvBqH,EAAIkD,OAAO,EAAGvK,GAAKypB,EAAYzpB,GAAKwpB,EAAYjf,OAAOvK,EAAI,GAClE0pB,GAAO,EACAriB,EAAIkD,OAAO,EAAGmf,GAAOH,EAASG,GAAOF,EAAYjf,OAAOmf,EAAM,GAClE,KAEPtK,EAAI/X,EAAIrH,GAAI2pB,GAAc,IAC1BD,EAAM1pB,GAEd,OAAIC,EAASwpB,EAAYxpB,QAAkB,SAARgkB,EACxB5c,EAAMmiB,EAAYjf,OAAOlD,EAAIpH,QACpCA,EAASoH,EAAIpH,QAAkB,SAARgkB,EAChB5c,EAAIkD,OAAO,EAAGif,EAAYvpB,QAC7BypB,EAAM,EAAI,KAAOriB,EAAIkD,OAAO,EAAGmf,GAAOD,EAAYC,GAAOF,EAAYjf,OAAOmf,EAAM,GAE9F,SAASE,GAAuBR,EAAaS,EAAOC,EAASC,GACzD,IAAI5N,EAAOF,EAAO+N,EAASC,EAAcC,EAAcC,EAAWC,EAAeC,EAAaP,EAAQ7pB,OACtG,IAAK6pB,EAAQlL,MAAM,SAAUlX,GAAK,MAAoB,iBAANA,IAC5C,OAAOid,GAAKyE,EAAahO,IAE7B,SAASkP,EAAcrG,GACnB9H,EAvCR,SAAsB8H,GAClB,MAAe,SAARA,EACH,SAAUvc,GAAK,OAAOA,EAAE6iB,eACxB,SAAU7iB,GAAK,OAAOA,EAAE8iB,eAoChBC,CAAaxG,GACrBhI,EAnCR,SAAsBgI,GAClB,MAAe,SAARA,EACH,SAAUvc,GAAK,OAAOA,EAAE8iB,eACxB,SAAU9iB,GAAK,OAAOA,EAAE6iB,eAgChBG,CAAazG,GACrB+F,EAAmB,SAAR/F,EAAiB6E,GAAgBC,GAC5C,IAAI4B,EAAeb,EAAQhmB,IAAI,SAAU8mB,GACrC,MAAO,CAAE3O,MAAOA,EAAM2O,GAASzO,MAAOA,EAAMyO,MAC7CtE,KAAK,SAAU/hB,EAAGC,GACjB,OAAOwlB,EAAQzlB,EAAE0X,MAAOzX,EAAEyX,SAE9BgO,EAAeU,EAAa7mB,IAAI,SAAU+mB,GAAM,OAAOA,EAAG1O,QAC1D+N,EAAeS,EAAa7mB,IAAI,SAAU+mB,GAAM,OAAOA,EAAG5O,QAC1DkO,EAAYlG,EACZmG,EAAyB,SAARnG,EAAiB,GAAK8F,EAE3CO,EAAc,QACd,IAAI9nB,EAAI,IAAI4mB,EAAYjJ,WAAWiJ,EAAa,WAAc,OAAO0B,GAAYb,EAAa,GAAIC,EAAaG,EAAa,GAAKN,KACjIvnB,EAAEwkB,mBAAqB,SAAUmD,GAC7BG,EAAcH,IAElB,IAAIY,EAAsB,EA4B1B,OA3BAvoB,EAAEgjB,cAAc,SAAUhB,EAAQC,EAAS/iB,GACvC,IAAI2F,EAAMmd,EAAOnd,IACjB,GAAmB,iBAARA,EACP,OAAO,EACX,IAAIkiB,EAAWtN,EAAM5U,GACrB,GAAIwiB,EAAMN,EAAUW,EAAca,GAC9B,OAAO,EAIP,IADA,IAAIC,EAAuB,KAClBhrB,EAAI+qB,EAAqB/qB,EAAIqqB,IAAcrqB,EAAG,CACnD,IAAIirB,EAAS3B,GAAWjiB,EAAKkiB,EAAUU,EAAajqB,GAAIkqB,EAAalqB,GAAIgqB,EAASG,GACnE,OAAXc,GAA4C,OAAzBD,EACnBD,EAAsB/qB,EAAI,GACI,OAAzBgrB,GAAiChB,EAAQgB,EAAsBC,GAAU,KAC9ED,EAAuBC,GAS/B,OALIxG,EADyB,OAAzBuG,EACQ,WAAcxG,EAAOU,SAAS8F,EAAuBZ,IAGrD1oB,IAEL,IAGRc,EAEX,SAASsoB,GAAY7O,EAAOE,EAAOD,EAAWE,GAC1C,MAAO,CACHlY,KAAM,EACN+X,MAAOA,EACPE,MAAOA,EACPD,UAAWA,EACXE,UAAWA,GAGnB,SAASiN,GAAW5qB,GAChB,MAAO,CACHyF,KAAM,EACN+X,MAAOxd,EACP0d,MAAO1d,GAIf,IAAI2f,GAA6B,WAC7B,SAASA,KAiOT,OA/NA/hB,OAAOqC,eAAe0f,EAAY9hB,UAAW,aAAc,CACvDiC,IAAK,WACD,OAAOuJ,KAAKud,KAAKC,MAAMvI,GAAGoD,YAE9B7hB,YAAY,EACZD,cAAc,IAElB+f,EAAY9hB,UAAU4uB,QAAU,SAAUjP,EAAOE,EAAOgP,EAAcC,GAClED,GAAgC,IAAjBA,EACfC,GAAgC,IAAjBA,EACf,IACI,OAAKtjB,KAAKujB,KAAKpP,EAAOE,GAAS,GACE,IAA5BrU,KAAKujB,KAAKpP,EAAOE,KAAiBgP,GAAgBC,MAAmBD,IAAgBC,GAC/EjC,GAAgBrhB,MACpB,IAAIA,KAAKqY,WAAWrY,KAAM,WAAc,OAAOgjB,GAAY7O,EAAOE,GAAQgP,GAAeC,KAEpG,MAAOzsB,GACH,OAAOgmB,GAAK7c,KAAMqT,MAG1BiD,EAAY9hB,UAAUgiB,OAAS,SAAU7f,GACrC,OAAO,IAAIqJ,KAAKqY,WAAWrY,KAAM,WAAc,OAAOuhB,GAAW5qB,MAErE2f,EAAY9hB,UAAUgvB,MAAQ,SAAU7sB,GACpC,OAAa,MAATA,EACOkmB,GAAK7c,KAAMqT,IACf,IAAIrT,KAAKqY,WAAWrY,KAAM,WAAc,OAAOgjB,GAAYrsB,OAAOsB,GAAW,MAExFqe,EAAY9hB,UAAUivB,aAAe,SAAU9sB,GAC3C,OAAa,MAATA,EACOkmB,GAAK7c,KAAMqT,IACf,IAAIrT,KAAKqY,WAAWrY,KAAM,WAAc,OAAOgjB,GAAYrsB,OAAOsB,GAAW,MAExFqe,EAAY9hB,UAAUkvB,MAAQ,SAAU/sB,GACpC,OAAa,MAATA,EACOkmB,GAAK7c,KAAMqT,IACf,IAAIrT,KAAKqY,WAAWrY,KAAM,WAAc,OAAOgjB,QAAY/qB,EAAWtB,GAAO,GAAO,MAE/F2f,EAAY9hB,UAAUmvB,aAAe,SAAUhtB,GAC3C,OAAa,MAATA,EACOkmB,GAAK7c,KAAMqT,IACf,IAAIrT,KAAKqY,WAAWrY,KAAM,WAAc,OAAOgjB,QAAY/qB,EAAWtB,MAEjF2f,EAAY9hB,UAAUovB,WAAa,SAAUC,GACzC,MAAmB,iBAARA,EACAhH,GAAK7c,KAAMsT,IACftT,KAAKojB,QAAQS,EAAKA,EAAM3Q,IAAW,GAAM,IAEpDoD,EAAY9hB,UAAUsvB,qBAAuB,SAAUD,GACnD,MAAY,KAARA,EACO7jB,KAAK4jB,WAAWC,GACpB/B,GAAuB9hB,KAAM,SAAUgE,EAAGvH,GAAK,OAA2B,IAApBuH,EAAEhO,QAAQyG,EAAE,KAAc,CAAConB,GAAM3Q,KAElGoD,EAAY9hB,UAAUuvB,iBAAmB,SAAUF,GAC/C,OAAO/B,GAAuB9hB,KAAM,SAAUgE,EAAGvH,GAAK,OAAOuH,IAAMvH,EAAE,IAAO,CAAConB,GAAM,KAEvFvN,EAAY9hB,UAAUwvB,gBAAkB,WACpC,IAAIttB,EAAMwN,EAAWtL,MAAMqL,EAAelE,WAC1C,OAAmB,IAAfrJ,EAAIyB,OACGkpB,GAAgBrhB,MACpB8hB,GAAuB9hB,KAAM,SAAUgE,EAAGvH,GAAK,OAAyB,IAAlBA,EAAEzG,QAAQgO,IAActN,EAAK,KAE9F4f,EAAY9hB,UAAUyvB,0BAA4B,WAC9C,IAAIvtB,EAAMwN,EAAWtL,MAAMqL,EAAelE,WAC1C,OAAmB,IAAfrJ,EAAIyB,OACGkpB,GAAgBrhB,MACpB8hB,GAAuB9hB,KAAM,SAAUgE,EAAGvH,GAAK,OAAOA,EAAE+Q,KAAK,SAAU/N,GAAK,OAAwB,IAAjBuE,EAAEhO,QAAQyJ,MAAiB/I,EAAKwc,KAE9HoD,EAAY9hB,UAAU0vB,MAAQ,WAC1B,IAAIvX,EAAQ3M,KACRtJ,EAAMwN,EAAWtL,MAAMqL,EAAelE,WACtCmiB,EAAUliB,KAAKujB,KACnB,IACI7sB,EAAI8nB,KAAK0D,GAEb,MAAOrrB,GACH,OAAOgmB,GAAK7c,KAAMqT,IAEtB,GAAmB,IAAf3c,EAAIyB,OACJ,OAAOkpB,GAAgBrhB,MAC3B,IAAItF,EAAI,IAAIsF,KAAKqY,WAAWrY,KAAM,WAAc,OAAOgjB,GAAYtsB,EAAI,GAAIA,EAAIA,EAAIyB,OAAS,MAC5FuC,EAAEwkB,mBAAqB,SAAUmD,GAC7BH,EAAyB,SAAdG,EACP1V,EAAMwX,WACNxX,EAAMyX,YACV1tB,EAAI8nB,KAAK0D,IAEb,IAAIhqB,EAAI,EAkBR,OAjBAwC,EAAEgjB,cAAc,SAAUhB,EAAQC,EAAS/iB,GAEvC,IADA,IAAI2F,EAAMmd,EAAOnd,IACV2iB,EAAQ3iB,EAAK7I,EAAIwB,IAAM,GAE1B,KADEA,IACQxB,EAAIyB,OAEV,OADAwkB,EAAQ/iB,IACD,EAGf,OAA6B,IAAzBsoB,EAAQ3iB,EAAK7I,EAAIwB,MAIjBykB,EAAQ,WAAcD,EAAOU,SAAS1mB,EAAIwB,OACnC,KAGRwC,GAEX4b,EAAY9hB,UAAU6vB,SAAW,SAAU1tB,GACvC,OAAOqJ,KAAKskB,WAAW,CAAC,EAhkCnB,IAgkC4B3tB,GAAQ,CAACA,EAAOqJ,KAAKiV,GAAG8B,UAAW,CAAEwN,eAAe,EAAOC,eAAe,KAE/GlO,EAAY9hB,UAAUiwB,OAAS,WAC3B,IAAI/tB,EAAMwN,EAAWtL,MAAMqL,EAAelE,WAC1C,GAAmB,IAAfrJ,EAAIyB,OACJ,OAAO,IAAI6H,KAAKqY,WAAWrY,MAC/B,IACItJ,EAAI8nB,KAAKxe,KAAKmkB,YAElB,MAAOttB,GACH,OAAOgmB,GAAK7c,KAAMqT,IAEtB,IAAIqR,EAAShuB,EAAI+P,OAAO,SAAUuB,EAAK1F,GAAO,OAAO0F,EACjDA,EAAIzL,OAAO,CAAC,CAACyL,EAAIA,EAAI7P,OAAS,GAAG,GAAImK,KACrC,CAAC,EA9kCA,IA8kCSA,KAAU,MAExB,OADAoiB,EAAOzuB,KAAK,CAACS,EAAIA,EAAIyB,OAAS,GAAI6H,KAAKiV,GAAG8B,UACnC/W,KAAKskB,WAAWI,EAAQ,CAAEH,eAAe,EAAOC,eAAe,KAE1ElO,EAAY9hB,UAAU8vB,WAAa,SAAUI,EAAQlpB,GACjD,IAAImR,EAAQ3M,KACRsX,EAAMtX,KAAKujB,KAAMoB,EAAY3kB,KAAKmkB,WAAYS,EAAa5kB,KAAKokB,YAAatG,EAAM9d,KAAK6kB,KAAMC,EAAM9kB,KAAK+kB,KAC7G,GAAsB,IAAlBL,EAAOvsB,OACP,OAAOkpB,GAAgBrhB,MAC3B,IAAK0kB,EAAO5N,MAAM,SAAU4C,GACxB,YAAoBzhB,IAAbyhB,EAAM,SACIzhB,IAAbyhB,EAAM,IACNiL,EAAUjL,EAAM,GAAIA,EAAM,KAAO,IAErC,OAAOmD,GAAK7c,KAAM,6HAA8H2G,EAAW0S,iBAE/J,IAAIkL,GAAiB/oB,IAAqC,IAA1BA,EAAQ+oB,cACpCC,EAAgBhpB,IAAqC,IAA1BA,EAAQgpB,cAevC,IAEI9tB,EAFAsuB,EAAgBL,EACpB,SAASM,EAAYxoB,EAAGC,GAAK,OAAOsoB,EAAcvoB,EAAE,GAAIC,EAAE,IAE1D,KACIhG,EAAMguB,EAAOje,OAlBjB,SAAkBie,EAAQQ,GAEtB,IADA,IAAIhtB,EAAI,EAAGa,EAAI2rB,EAAOvsB,OACfD,EAAIa,IAAKb,EAAG,CACf,IAAIwhB,EAAQgL,EAAOxsB,GACnB,GAAIof,EAAI4N,EAAS,GAAIxL,EAAM,IAAM,GAAKpC,EAAI4N,EAAS,GAAIxL,EAAM,IAAM,EAAG,CAClEA,EAAM,GAAKoE,EAAIpE,EAAM,GAAIwL,EAAS,IAClCxL,EAAM,GAAKoL,EAAIpL,EAAM,GAAIwL,EAAS,IAClC,OAKR,OAFIhtB,IAAMa,GACN2rB,EAAOzuB,KAAKivB,GACTR,GAMuB,KAC1BlG,KAAKyG,GAEb,MAAO5Y,GACH,OAAOwQ,GAAK7c,KAAMqT,IAEtB,IAAI8R,EAAW,EACXC,EAA0BZ,EAC1B,SAAUjlB,GAAO,OAAOolB,EAAUplB,EAAK7I,EAAIyuB,GAAU,IAAM,GAC3D,SAAU5lB,GAAO,OAAOolB,EAAUplB,EAAK7I,EAAIyuB,GAAU,KAAO,GAC5DE,EAA0Bd,EAC1B,SAAUhlB,GAAO,OAAOqlB,EAAWrlB,EAAK7I,EAAIyuB,GAAU,IAAM,GAC5D,SAAU5lB,GAAO,OAAOqlB,EAAWrlB,EAAK7I,EAAIyuB,GAAU,KAAO,GAIjE,IAAIG,EAAWF,EACX1qB,EAAI,IAAIsF,KAAKqY,WAAWrY,KAAM,WAAc,OAAOgjB,GAAYtsB,EAAI,GAAG,GAAIA,EAAIA,EAAIyB,OAAS,GAAG,IAAKosB,GAAgBC,KAqCvH,OApCA9pB,EAAEwkB,mBAAqB,SAAUmD,GACX,SAAdA,GACAiD,EAAWF,EACXJ,EAAgBL,IAGhBW,EAAWD,EACXL,EAAgBJ,GAEpBluB,EAAI8nB,KAAKyG,IAEbvqB,EAAEgjB,cAAc,SAAUhB,EAAQC,EAAS/iB,GAEvC,IADA,IAAI2F,EAAMmd,EAAOnd,IACV+lB,EAAS/lB,IAEZ,KADE4lB,IACezuB,EAAIyB,OAEjB,OADAwkB,EAAQ/iB,IACD,EAGf,QAzBJ,SAA+B2F,GAC3B,OAAQ6lB,EAAwB7lB,KAAS8lB,EAAwB9lB,GAwB7DgmB,CAAsBhmB,IAGqB,IAAtCoN,EAAM4W,KAAKhkB,EAAK7I,EAAIyuB,GAAU,KAAmD,IAAtCxY,EAAM4W,KAAKhkB,EAAK7I,EAAIyuB,GAAU,MAI9ExI,EAAQ,WACAqI,IAAkBL,EAClBjI,EAAOU,SAAS1mB,EAAIyuB,GAAU,IAE9BzI,EAAOU,SAAS1mB,EAAIyuB,GAAU,OAE/B,KAGRzqB,GAEX4b,EAAY9hB,UAAUgxB,gBAAkB,WACpC,IAAI9uB,EAAMwN,EAAWtL,MAAMqL,EAAelE,WAC1C,OAAKrJ,EAAIogB,MAAM,SAAUlX,GAAK,MAAoB,iBAANA,IAGzB,IAAflJ,EAAIyB,OACGkpB,GAAgBrhB,MACpBA,KAAKskB,WAAW5tB,EAAIsF,IAAI,SAAU6nB,GAAO,MAAO,CAACA,EAAKA,EAAM3Q,OAJxD2J,GAAK7c,KAAM,8CAMnBsW,EAlOqB,GAwPhC,SAASmP,GAAoBrQ,GACzB,OAA6B,IAAtBA,EAAWjd,OAAeid,EAAW,GAAKA,EAGrD,SAASsQ,GAAUC,GACf,IAEI,OADAA,EAAYC,KAAK,CAAC,KACX,CAAC,IAEZ,MAAO/uB,GACH,OAAOqc,IAIf,SAAS2S,GAAmBhsB,GACxB,OAAO0U,GAAK,SAAUgE,GAGlB,OAFAuT,GAAevT,GACf1Y,EAAO0Y,EAAMwT,OAAO1nB,QACb,IAMf,SAASynB,GAAevT,GAChBA,EAAMyT,iBACNzT,EAAMyT,kBACNzT,EAAMuT,gBACNvT,EAAMuT,iBAGd,IAAIG,GAA6B,WAC7B,SAASA,KAmJT,OAjJAA,EAAYzxB,UAAU0xB,MAAQ,WAK1B,OAJAnkB,GAAQiJ,GAAI3K,UACVL,KAAKmmB,UACgB,IAAnBnmB,KAAKmmB,WAAoBnb,GAAI3K,SAC7B2K,GAAIob,aAAepmB,MAChBA,MAEXimB,EAAYzxB,UAAU6xB,QAAU,WAE5B,GADAtkB,GAAQiJ,GAAI3K,QACa,KAAnBL,KAAKmmB,UAGP,IAFKnb,GAAI3K,SACL2K,GAAIob,aAAe,MAChBpmB,KAAKsmB,cAAcnuB,OAAS,IAAM6H,KAAKumB,WAAW,CACrD,IAAIC,EAAWxmB,KAAKsmB,cAAcG,QAClC,IACIxW,GAAOuW,EAAS,GAAIA,EAAS,IAEjC,MAAO3vB,KAGf,OAAOmJ,MAEXimB,EAAYzxB,UAAU+xB,QAAU,WAC5B,OAAOvmB,KAAKmmB,WAAanb,GAAIob,eAAiBpmB,MAElDimB,EAAYzxB,UAAU8K,OAAS,SAAU0V,GACrC,IAAIrI,EAAQ3M,KACZ,IAAKA,KAAK1I,KACN,OAAO0I,KACX,IAAI0mB,EAAQ1mB,KAAKiV,GAAGyR,MAChBC,EAAc3mB,KAAKiV,GAAGrJ,OAAO+a,YAEjC,GADA5kB,GAAQ/B,KAAKgV,WACRA,IAAa0R,EACd,OAAQC,GAAeA,EAAYrwB,MAC/B,IAAK,sBACD,MAAM,IAAIqQ,EAAWlB,eAAekhB,GACxC,IAAK,kBACD,MAAM,IAAIhgB,EAAWigB,WAAWD,EAAYxhB,QAASwhB,GACzD,QACI,MAAM,IAAIhgB,EAAWkgB,WAAWF,GAG5C,IAAK3mB,KAAKlK,OACN,MAAM,IAAI6Q,EAAWhB,oBAiBzB,OAhBA5D,EAAmC,OAA5B/B,KAAKyV,YAAY7J,SACxBoJ,EAAWhV,KAAKgV,SAAWA,GAAY0R,EAAMI,YAAYrB,GAAoBzlB,KAAKoV,YAAapV,KAAK1I,OAC3F4Q,QAAUqG,GAAK,SAAUwY,GAC9BjB,GAAeiB,GACfpa,EAAMqa,QAAQhS,EAAS3W,SAE3B2W,EAASiS,QAAU1Y,GAAK,SAAUwY,GAC9BjB,GAAeiB,GACfpa,EAAM7W,QAAU6W,EAAMqa,QAAQ,IAAIrgB,EAAWjB,MAAMsP,EAAS3W,QAC5DsO,EAAM7W,QAAS,EACf6W,EAAMua,GAAG,SAAS9Q,KAAK2Q,KAE3B/R,EAASmS,WAAa5Y,GAAK,WACvB5B,EAAM7W,QAAS,EACf6W,EAAMya,aAEHpnB,MAEXimB,EAAYzxB,UAAU4Y,SAAW,SAAU9V,EAAM3B,EAAI0xB,GACjD,IAAI1a,EAAQ3M,KACZ,GAAa,cAAT1I,GAAsC,cAAd0I,KAAK1I,KAC7B,OAAOma,GAAU,IAAI9K,EAAW2gB,SAAS,4BAC7C,IAAKtnB,KAAKlK,OACN,OAAO2b,GAAU,IAAI9K,EAAWhB,qBACpC,GAAI3F,KAAKumB,UACL,OAAO,IAAIpb,GAAU,SAAUvR,EAASC,GACpC8S,EAAM2Z,cAAcrwB,KAAK,CAAC,WAClB0W,EAAMS,SAAS9V,EAAM3B,EAAI0xB,GAAYrwB,KAAK4C,EAASC,IACpDmR,OAGV,GAAIqc,EACL,OAAOrX,GAAS,WACZ,IAAIhW,EAAI,IAAImR,GAAU,SAAUvR,EAASC,GACrC8S,EAAMuZ,QACN,IAAI7jB,EAAK1M,EAAGiE,EAASC,EAAQ8S,GACzBtK,GAAMA,EAAGrL,MACTqL,EAAGrL,KAAK4C,EAASC,KAIzB,OAFAG,EAAE6U,QAAQ,WAAc,OAAOlC,EAAM0Z,YACrCrsB,EAAEsR,MAAO,EACFtR,IAIX,IAAIA,EAAI,IAAImR,GAAU,SAAUvR,EAASC,GACrC,IAAIwI,EAAK1M,EAAGiE,EAASC,EAAQ8S,GACzBtK,GAAMA,EAAGrL,MACTqL,EAAGrL,KAAK4C,EAASC,KAGzB,OADAG,EAAEsR,MAAO,EACFtR,GAGfisB,EAAYzxB,UAAU+yB,MAAQ,WAC1B,OAAOvnB,KAAK1D,OAAS0D,KAAK1D,OAAOirB,QAAUvnB,MAE/CimB,EAAYzxB,UAAUgzB,QAAU,SAAUC,GACtC,IAAIC,EAAO1nB,KAAKunB,QACZ3sB,EAAUuQ,GAAUvR,QAAQ6tB,GAChC,GAAIC,EAAKC,YACLD,EAAKC,YAAcD,EAAKC,YAAY3wB,KAAK,WAAc,OAAO4D,QAE7D,CACD8sB,EAAKC,YAAc/sB,EACnB8sB,EAAKE,cAAgB,GACrB,IAAIC,EAAQH,EAAK1S,SAAS8S,YAAYJ,EAAKtS,WAAW,KACrD,SAAS2S,IAEN,MADEL,EAAKM,WACAN,EAAKE,cAAczvB,QACrBuvB,EAAKE,cAAcnB,OAApB,GACAiB,EAAKC,cACLE,EAAMpxB,KAAK4Y,KAAUpH,UAAY8f,GALzC,GAQJ,IAAIE,EAAqBP,EAAKC,YAC9B,OAAO,IAAIxc,GAAU,SAAUvR,EAASC,GACpCe,EAAQ5D,KAAK,SAAUgR,GAAO,OAAO0f,EAAKE,cAAc3xB,KAAKsY,GAAK3U,EAAQ4F,KAAK,KAAMwI,MAAW,SAAU9Q,GAAO,OAAOwwB,EAAKE,cAAc3xB,KAAKsY,GAAK1U,EAAO2F,KAAK,KAAMtI,OAAW2X,QAAQ,WAClL6Y,EAAKC,cAAgBM,IACrBP,EAAKC,YAAc,WAKnC1B,EAAYzxB,UAAU0zB,MAAQ,WAC1BloB,KAAKlK,QAAUkK,KAAKgnB,QAAQ,IAAIrgB,EAAWjB,OAC3C1F,KAAKlK,QAAS,GAElBmwB,EAAYzxB,UAAUgpB,MAAQ,SAAU5I,GACpC,IAAIuT,EAAkBnoB,KAAKooB,kBAAoBpoB,KAAKooB,gBAAkB,IACtE,GAAIxnB,EAAOunB,EAAgBvT,GACvB,OAAOuT,EAAevT,GAC1B,IAAIyT,EAAcroB,KAAK8U,OAAOF,GAC9B,IAAKyT,EACD,MAAM,IAAI1hB,EAAWoO,SAAS,SAAWH,EAAY,4BAEzD,IAAI0T,EAAwB,IAAItoB,KAAKiV,GAAGV,MAAMK,EAAWyT,EAAaroB,MAGtE,OAFAsoB,EAAsBrS,KAAOjW,KAAKiV,GAAGgB,KAAKuH,MAAM5I,GAChDuT,EAAevT,GAAa0T,EACrBA,GAEJrC,EApJqB,GA4LhC,SAASsC,GAAgBjyB,EAAM8L,EAASga,EAAQzE,EAAO6Q,EAAM3R,GACzD,MAAO,CACHvgB,KAAMA,EACN8L,QAASA,EACTga,OAAQA,EACRzE,MAAOA,EACP6Q,KAAMA,EACN3R,SAAUA,EACV5b,KAAMmhB,EAAS,IAAM,KAAOzE,EAAQ,IAAM,KAAO6Q,EAAO,KAAO,IAAMC,GAAgBrmB,IAG7F,SAASqmB,GAAgBrmB,GACrB,MAA0B,iBAAZA,EACVA,EACAA,EAAW,IAAM,GAAGlF,KAAKxI,KAAK0N,EAAS,KAAO,IAAO,GAG7D,SAASsmB,GAAkBpyB,EAAMqgB,EAASD,GACtC,MAAO,CACHpgB,KAAMA,EACNqgB,QAASA,EACTD,QAASA,EACT+B,YAAa,KACbvB,WA9hFeyR,EA8hFUjS,EA9hFHkS,EA8hFY,SAAUlR,GAAS,MAAO,CAACA,EAAMphB,KAAMohB,IA7hFtEiR,EAAMliB,OAAO,SAAUnL,EAAQqB,EAAMzE,GACxC,IAAI2wB,EAAeD,EAAUjsB,EAAMzE,GAGnC,OAFI2wB,IACAvtB,EAAOutB,EAAa,IAAMA,EAAa,IACpCvtB,GACR,MANP,IAAuBqtB,EAAOC,EAkiF9B,SAASE,GAAgB1mB,GACrB,OAAe,MAAXA,EACO,aAEiB,iBAAZA,EAOpB,SAAmCA,GAE/B,OAAqB,IADTA,EAAQe,MAAM,KAChBhL,OACC,SAAUoI,GAAO,OAAOA,EAAI6B,IAG5B,SAAU7B,GAAO,OAAO4B,EAAa5B,EAAK6B,IAZ1C2mB,CAA0B3mB,GAG1B,SAAU7B,GAAO,OAAO4B,EAAa5B,EAAK6B,IAazD,SAAS4mB,GAAiB9P,EAAY+P,GAClC,MAAiB,WAAbA,EAAI7sB,KACG6sB,EAAItrB,KACRsrB,EAAItrB,MAAQsrB,EAAItZ,OAAO3T,IAAIkd,EAAWgH,YAOjD,SAASgJ,GAAS/kB,GACd,MAAO,GAAGlG,MAAMvJ,KAAKyP,GAGzB,IAAIglB,GAAc,EAClB,SAASC,GAAgBhnB,GACrB,OAAkB,MAAXA,EACH,MACmB,iBAAZA,EACHA,EACA,IAAMA,EAAQlF,KAAK,KAAO,IAEtC,SAASmsB,GAAapU,EAAIoC,EAAWsO,EAAa2D,GAC9C,IAAIhS,EAAMD,EAAUC,IAAI9X,KAAK6X,GAqD7B,SAASkS,EAAgB7P,GACrB,GAAmB,IAAfA,EAAMtd,KACN,OAAO,KACX,GAAmB,IAAfsd,EAAMtd,KACN,MAAM,IAAI3C,MAAM,4CACpB,IAAI0a,EAAQuF,EAAMvF,MAAOE,EAAQqF,EAAMrF,MAAOD,EAAYsF,EAAMtF,UAAWE,EAAYoF,EAAMpF,UAQ7F,YAPyBrc,IAAVkc,OACDlc,IAAVoc,EACI,KACAsR,EAAY6D,WAAWnV,IAASC,QAC1Brc,IAAVoc,EACIsR,EAAY8D,WAAWtV,IAASC,GAChCuR,EAAY+D,MAAMvV,EAAOE,IAASD,IAAaE,GAiR3D,IAAIiD,EAjVJ,SAAuBtC,EAAIP,GACvB,IAAIiV,EAAST,GAASjU,EAAG2U,kBACzB,MAAO,CACH9U,OAAQ,CACJxe,KAAM2e,EAAG3e,KACTqzB,OAAQA,EAAO3tB,IAAI,SAAUwhB,GAAS,OAAO9I,EAAMoT,YAAYtK,KAAWxhB,IAAI,SAAU6rB,GACpF,IAAIzlB,EAAUylB,EAAMzlB,QAASynB,EAAgBhC,EAAMgC,cAC/ChT,EAAW5W,EAAQmC,GACnB+W,EAAsB,MAAX/W,EACX0nB,EAAiB,GACjBxuB,EAAS,CACThF,KAAMuxB,EAAMvxB,KACZ4iB,WAAY,CACR5iB,KAAM,KACNyzB,cAAc,EACd5Q,SAAUA,EACVtC,SAAUA,EACVzU,QAASA,EACTynB,cAAeA,EACfzN,QAAQ,EACR8D,WAAY4I,GAAgB1mB,IAEhCsU,QAASwS,GAASrB,EAAMmC,YAAYhuB,IAAI,SAAUijB,GAAa,OAAO4I,EAAMnQ,MAAMuH,KAC7EjjB,IAAI,SAAU0b,GACf,IAAIphB,EAAOohB,EAAMphB,KAAM8lB,EAAS1E,EAAM0E,OAAQ6N,EAAavS,EAAMuS,WAAY7nB,EAAUsV,EAAMtV,QAEzF9G,EAAS,CACThF,KAAMA,EACNugB,SAHW5W,EAAQmC,GAInBA,QAASA,EACTga,OAAQA,EACR6N,WAAYA,EACZ/J,WAAY4I,GAAgB1mB,IAGhC,OADA0nB,EAAeV,GAAgBhnB,IAAY9G,EACpCA,IAEXwgB,kBAAmB,SAAU1Z,GAAW,OAAO0nB,EAAeV,GAAgBhnB,MAMlF,OAJA0nB,EAAe,OAASxuB,EAAO4d,WAChB,MAAX9W,IACA0nB,EAAeV,GAAgBhnB,IAAY9G,EAAO4d,YAE/C5d,KAGf4uB,UAAWP,EAAOxxB,OAAS,GAAM,WAAYuc,EAAMoT,YAAY6B,EAAO,OAC3C,oBAAdlW,WAA6B,SAAShP,KAAKgP,UAAUC,aACzD,oBAAoBjP,KAAKgP,UAAUC,YACpC,GAAGnX,OAAOkX,UAAUC,UAAUqO,MAAM,kBAAkB,GAAK,MAgSlEoI,CAAclV,EAAIqU,GAAWxU,EAASyC,EAAGzC,OAAQoV,EAAY3S,EAAG2S,UACrEP,EAAS7U,EAAO6U,OAAO3tB,IAAI,SAAUqsB,GAAe,OA/QxD,SAA2BA,GACvB,IAAIzT,EAAYyT,EAAY/xB,KA8M5B,MAAO,CACHA,KAAMse,EACNE,OAAQuT,EACRtP,OAhNJ,SAAgBxB,GACZ,IAAI7C,EAAQ6C,EAAG7C,MAAOtY,EAAOmb,EAAGnb,KAAMwd,EAAUrC,EAAG5Z,KAAMgS,EAAS4H,EAAG5H,OAAQ+J,EAAQnC,EAAGmC,MAAO0Q,EAAc7S,EAAG6S,YAChH,OAAO,IAAIzwB,QAAQ,SAAUC,EAASC,GAClCD,EAAU2U,GAAK3U,GACf,IAAIiuB,EAAQnT,EAAMoT,YAAYlT,GAC1BuE,EAA4B,MAAjB0O,EAAMzlB,QACjBioB,EAAsB,QAATjuB,GAA2B,QAATA,EACnC,IAAKiuB,GAAuB,WAATjuB,GAA8B,gBAATA,EACpC,MAAM,IAAI3C,MAAM,2BAA6B2C,GACjD,IAAIjE,GAAUyhB,GAAWjK,GAAU,CAAExX,OAAQ,IAAKA,OAClD,GAAIyhB,GAAWjK,GAAUiK,EAAQzhB,SAAWwX,EAAOxX,OAC/C,MAAM,IAAIsB,MAAM,iEAEpB,GAAe,IAAXtB,EACA,OAAOyB,EAAQ,CAAEof,YAAa,EAAGhT,SAAU,GAAI+a,QAAS,GAAI9H,gBAAYhhB,IAC5E,IAGIgxB,EAHAlI,EAAUqJ,IAAgBxQ,GAE1BoP,GAAiBX,EAAYnP,WAAY,CAAE9c,KAAMA,EAAMuB,KAAMic,EAASjK,OAAQA,KAAW1R,QAEzF+H,EAAW,GACXgT,EAAc,EACdtb,EAAe,SAAU6U,KACvByG,EACF8M,GAAevT,GACXwO,IACAA,EAAQxO,EAAMwT,OAAOuE,aAAUryB,GACnC+N,EAASuM,EAAMwT,OAAOuE,QAAU/X,EAAMwT,OAAO1nB,OAE7CksB,EAAY,SAAUhT,GACtB,IAAIwO,EAASxO,EAAGwO,OAChBhF,EAAQgF,EAAOuE,QAAUvE,EAAOzqB,QAEpC,GAAa,gBAATc,EAAwB,CACxB,GAAmB,IAAfsd,EAAMtd,KACN,OAAOxC,EAAQ,CAAEof,YAAaA,EAAahT,SAAUA,EAAU+a,QAASA,EAAS9H,gBAAYhhB,IAE7FgxB,EADe,IAAfvP,EAAMtd,KACAyrB,EAAMpO,QAENoO,EAAMrO,OAAO+P,EAAgB7P,QAEtC,CACD,IAAInC,EAAK8S,EACLlR,EACI,CAACxJ,EAAQiK,GACT,CAACjK,EAAQ,MACb,CAACiK,EAAS,MAAO4Q,EAAQjT,EAAG,GAAIkT,EAAQlT,EAAG,GAC/C,GAAI8S,EACA,IAAK,IAAInyB,EAAI,EAAGA,EAAIC,IAAUD,GAC1B+wB,EAAOwB,QAAsBxyB,IAAbwyB,EAAMvyB,GAClB2vB,EAAMzrB,GAAMouB,EAAMtyB,GAAIuyB,EAAMvyB,IAC5B2vB,EAAMzrB,GAAMouB,EAAMtyB,KAClBoyB,OAASpyB,EACT6oB,QAA0B9oB,IAAf8oB,EAAQ7oB,KACnB+wB,EAAIhhB,UAAYsiB,GAEpBtB,EAAI/gB,QAAUxK,OAIlB,IAASxF,EAAI,EAAGA,EAAIC,IAAUD,GAC1B+wB,EAAMpB,EAAMzrB,GAAMouB,EAAMtyB,KACpBoyB,OAASpyB,EACb+wB,EAAI/gB,QAAUxK,EAI1B,IAAI4G,EAAO,SAAUiO,GACjB,IAAI0G,EAAa1G,EAAMwT,OAAOzqB,OAC1BylB,IACAA,EAAQ5oB,EAAS,GAAK8gB,GAC1Brf,EAAQ,CACJof,YAAaA,EACbhT,SAAUA,EACV+a,QAASA,EACT9H,WAAYA,KAGpBgQ,EAAI/gB,QAAU,SAAUqK,GACpB7U,EAAa6U,GACbjO,EAAKiO,IAET0W,EAAIhhB,UAAY3D,KAgIpBuV,QAAS,SAAUtC,GACf,IAAI7C,EAAQ6C,EAAG7C,MAAOkF,EAAUrC,EAAG5Z,KACnC,OAAO,IAAIhE,QAAQ,SAAUC,EAASC,GAClCD,EAAU2U,GAAK3U,GAgBf,IAfA,IAMIqvB,EANApB,EAAQnT,EAAMoT,YAAYlT,GAC1Bzc,EAASyhB,EAAQzhB,OACjBmD,EAAS,IAAI4E,MAAM/H,GACnBuyB,EAAW,EACXC,EAAgB,EAGhBC,EAAiB,SAAUrY,GAC3B,IAAI0W,EAAM1W,EAAMwT,OACuB,OAAlCzqB,EAAO2tB,EAAI4B,MAAQ5B,EAAI3tB,SACxB,IACEqvB,IAAkBD,GACpB9wB,EAAQ0B,IAEZoC,EAAemoB,GAAmBhsB,GAC7B3B,EAAI,EAAGA,EAAIC,IAAUD,EAAG,CAElB,MADD0hB,EAAQ1hB,MAEd+wB,EAAMpB,EAAMpxB,IAAImjB,EAAQ1hB,KACpB2yB,KAAO3yB,EACX+wB,EAAIhhB,UAAY2iB,EAChB3B,EAAI/gB,QAAUxK,IACZgtB,GAGO,IAAbA,GACA9wB,EAAQ0B,MAGpB7E,IAAK,SAAU8gB,GACX,IAAI7C,EAAQ6C,EAAG7C,MAAOnV,EAAMgY,EAAGhY,IAC/B,OAAO,IAAI5F,QAAQ,SAAUC,EAASC,GAClCD,EAAU2U,GAAK3U,GACf,IACIqvB,EADQvU,EAAMoT,YAAYlT,GACdne,IAAI8I,GACpB0pB,EAAIhhB,UAAY,SAAUsK,GAAS,OAAO3Y,EAAQ2Y,EAAMwT,OAAOzqB,SAC/D2tB,EAAI/gB,QAAU2d,GAAmBhsB,MAGzCwiB,MAtFJ,SAAe6N,GACX,OAAO,SAAUt0B,GACb,OAAO,IAAI+D,QAAQ,SAAUC,EAASC,GAClCD,EAAU2U,GAAK3U,GACf,IAAI8a,EAAQ9e,EAAQ8e,MAAO/E,EAAS/Z,EAAQ+Z,OAAQV,EAAQrZ,EAAQqZ,MAAOoN,EAAQzmB,EAAQymB,MACvFyO,EAAkB7b,IAAUI,SAAWpX,EAAYgX,EACnDyI,EAAQ2E,EAAM3E,MAAOgC,EAAQ2C,EAAM3C,MACnCmO,EAAQnT,EAAMoT,YAAYlT,GAC1BmW,EAASrT,EAAMqS,aAAelC,EAAQA,EAAMnQ,MAAMA,EAAMphB,MACxD00B,EAAczB,EAAgB7P,GAClC,GAAc,IAAVzK,EACA,OAAOrV,EAAQ,CAAE0B,OAAQ,KAC7B,GAAI4uB,EAAW,CACX,IAAIjB,EAAMtZ,EACNob,EAAOE,OAAOD,EAAaF,GAC3BC,EAAOG,WAAWF,EAAaF,GACnC7B,EAAIhhB,UAAY,SAAUsK,GAAS,OAAO3Y,EAAQ,CAAE0B,OAAQiX,EAAMwT,OAAOzqB,UACzE2tB,EAAI/gB,QAAU2d,GAAmBhsB,OAEhC,CACD,IAAIsxB,EAAU,EACVC,GAAQzb,GAAY,kBAAmBob,EAEvCA,EAAOM,cAAcL,GADrBD,EAAO/O,WAAWgP,GAElBM,EAAW,GACfF,EAAMnjB,UAAY,SAAUsK,GACxB,IAAImK,EAAS0O,EAAM9vB,OACnB,OAAKohB,GAEL4O,EAASr1B,KAAK0Z,EAAS+M,EAAO/lB,MAAQ+lB,EAAOxD,cACvCiS,IAAYlc,EACPrV,EAAQ,CAAE0B,OAAQgwB,SAC7B5O,EAAOU,YAJIxjB,EAAQ,CAAE0B,OAAQgwB,KAMjCF,EAAMljB,QAAU2d,GAAmBhsB,OAoDxCwiB,CAAM6N,GACblO,WAzKJ,SAAoBzE,GAChB,IAAI7C,EAAQ6C,EAAG7C,MAAO/E,EAAS4H,EAAG5H,OAAQ0M,EAAQ9E,EAAG8E,MAAO9D,EAAUhB,EAAGgB,QAAS6D,EAAS7E,EAAG6E,OAC9F,OAAO,IAAIziB,QAAQ,SAAUC,EAASC,GAClCD,EAAU2U,GAAK3U,GACf,IAAI8d,EAAQ2E,EAAM3E,MAAOgC,EAAQ2C,EAAM3C,MACnCmO,EAAQnT,EAAMoT,YAAYlT,GAC1BmW,EAASrT,EAAMqS,aACflC,EACAA,EAAMnQ,MAAMA,EAAMphB,MAClB+rB,EAAY9J,EACZ6D,EACI,aACA,OACJA,EACI,aACA,OACJ6M,GAAMtZ,GAAY,kBAAmBob,EAErCA,EAAOM,cAAc9B,EAAgB7P,GAAQ2I,GAD7C0I,EAAO/O,WAAWuN,EAAgB7P,GAAQ2I,GAE9C4G,EAAI/gB,QAAU2d,GAAmBhsB,GACjCovB,EAAIhhB,UAAYsG,GAAK,SAAUwY,GAC3B,IAAIrK,EAASuM,EAAI3tB,OACjB,GAAKohB,EAAL,CAIAA,EAAO6O,QAAUpC,GACjBzM,EAAOpY,MAAO,EACd,IAAIknB,EAAkB9O,EAAOU,SAAS5d,KAAKkd,GACvC+O,EAA4B/O,EAAOgP,mBACnCD,IACAA,EAA4BA,EAA0BjsB,KAAKkd,IAC/D,IAAIiP,EAAiBjP,EAAOC,QAAQnd,KAAKkd,GAErCkP,EAAyB,WAAc,MAAM,IAAInyB,MAAM,uBAC3DijB,EAAOhI,MAAQA,EACfgI,EAAOE,KAAOF,EAAOU,SAAWV,EAAOgP,mBAAqBhP,EAAOC,QAHnC,WAAc,MAAM,IAAIljB,MAAM,uBAI9DijB,EAAOG,KAAOtO,GAAK1U,GACnB6iB,EAAOrY,KAAO,WACV,IAAIsI,EAAQ3M,KACR6rB,EAAS,EACb,OAAO7rB,KAAK0B,MAAM,WAAc,OAAOmqB,IAAWlf,EAAMyQ,WAAazQ,EAAMiQ,SAAW5lB,KAAK,WAAc,OAAO2V,KAEpH+P,EAAOhb,MAAQ,SAAU1J,GACrB,IAAI8zB,EAAmB,IAAInyB,QAAQ,SAAUoyB,EAAkBC,GAC3DD,EAAmBxd,GAAKwd,GACxB9C,EAAI/gB,QAAU2d,GAAmBmG,GACjCtP,EAAOG,KAAOmP,EACdtP,EAAOE,KAAO,SAAUjmB,GACpB+lB,EAAOE,KAAOF,EAAOU,SAAWV,EAAOgP,mBAAqBhP,EAAOC,QAAUiP,EAC7EG,EAAiBp1B,MAGrBs1B,EAAkB,WAClB,GAAIhD,EAAI3tB,OACJ,IACItD,IAEJ,MAAOd,GACHwlB,EAAOG,KAAK3lB,QAIhBwlB,EAAOpY,MAAO,EACdoY,EAAOhb,MAAQ,WAAc,MAAM,IAAIjI,MAAM,6BAC7CijB,EAAOE,QAWf,OARAqM,EAAIhhB,UAAYsG,GAAK,SAAUwY,GAC3BkC,EAAIhhB,UAAYgkB,EAChBA,MAEJvP,EAAOU,SAAWoO,EAClB9O,EAAOgP,mBAAqBD,EAC5B/O,EAAOC,QAAUgP,EACjBM,IACOH,GAEXlyB,EAAQ8iB,QAvDJ9iB,EAAQ,OAwDbC,MA2FPke,MAAO,SAAUR,GACb,IAAI8E,EAAQ9E,EAAG8E,MAAO3H,EAAQ6C,EAAG7C,MAC7BgD,EAAQ2E,EAAM3E,MAAOgC,EAAQ2C,EAAM3C,MACvC,OAAO,IAAI/f,QAAQ,SAAUC,EAASC,GAClC,IAAIguB,EAAQnT,EAAMoT,YAAYlT,GAC1BmW,EAASrT,EAAMqS,aAAelC,EAAQA,EAAMnQ,MAAMA,EAAMphB,MACxD00B,EAAczB,EAAgB7P,GAC9BuP,EAAM+B,EAAcD,EAAOhT,MAAMiT,GAAeD,EAAOhT,QAC3DkR,EAAIhhB,UAAYsG,GAAK,SAAUwY,GAAM,OAAOntB,EAAQmtB,EAAGhB,OAAOzqB,UAC9D2tB,EAAI/gB,QAAU2d,GAAmBhsB,OAMcqyB,CAAkB7D,KAC7E8D,EAAW,GAEf,OADAxC,EAAO/rB,QAAQ,SAAU4f,GAAS,OAAO2O,EAAS3O,EAAMlnB,MAAQknB,IACzD,CACH1Y,MAAO,SACPgiB,YAAa7R,EAAG6R,YAAYtnB,KAAKyV,GACjCuI,MAAO,SAAUlnB,GAEb,IADa61B,EAAS71B,GAElB,MAAM,IAAImD,MAAM,UAAYnD,EAAO,eACvC,OAAO61B,EAAS71B,IAEpBghB,IAAKA,EACL8U,SAAU/c,IACVgd,QAAS3G,GAAUC,GACnB7Q,OAAQA,GAUhB,SAASwX,GAAuBC,EAAa7F,EAAOnP,EAAI+R,GACpD,IAAIkD,EAAcjV,EAAGiV,YAErB,MAAO,CACHC,OAVR,SAA+BC,EAAWH,GACtC,OAAOA,EAAY9lB,OAAO,SAAUkmB,EAAMpV,GACtC,IAAIjY,EAASiY,EAAGjY,OAChB,OAAQO,EAAS,GAAI8sB,EAAMrtB,EAAOqtB,KACnCD,GAIUE,CAAsBvD,GAAa3C,EADFnP,EAAGF,UACiBmV,EAAalD,GAAWiD,EAAYE,SAK1G,SAASI,GAAyB5X,EAAIqU,GAClC,IAAI5C,EAAQ4C,EAASrU,GACjBjG,EAASsd,GAAuBrX,EAAG6X,aAAcpG,EAAOzR,EAAGmC,MAAOkS,GACtErU,EAAGgB,KAAOjH,EAAOyd,OACjBxX,EAAG0U,OAAO/rB,QAAQ,SAAU4f,GACxB,IAAI5I,EAAY4I,EAAMlnB,KAClB2e,EAAGgB,KAAKnB,OAAO6U,OAAOnc,KAAK,SAAUuf,GAAO,OAAOA,EAAIz2B,OAASse,MAChE4I,EAAMvH,KAAOhB,EAAGgB,KAAKuH,MAAM5I,GACvBK,EAAGL,aAAsBK,EAAGV,QAC5BU,EAAGL,GAAWqB,KAAOuH,EAAMvH,SAM3C,SAAS+W,GAAc/X,EAAIgY,EAAMC,EAAYC,GACzCD,EAAWtvB,QAAQ,SAAUgX,GACzB,IAAIE,EAASqY,EAASvY,GACtBqY,EAAKrvB,QAAQ,SAAU2C,GACbqU,KAAarU,IACXA,IAAQ0U,EAAGgR,YAAYzxB,WAAa+L,aAAe0U,EAAGgR,YACtDjlB,EAAQT,EAAKqU,EAAW,CAAEne,IAAK,WAAc,OAAOuJ,KAAKwd,MAAM5I,MAG/DrU,EAAIqU,GAAa,IAAIK,EAAGV,MAAMK,EAAWE,QAM7D,SAASsY,GAAgBnY,EAAIgY,GACzBA,EAAKrvB,QAAQ,SAAU2C,GACnB,IAAK,IAAIhB,KAAOgB,EACRA,EAAIhB,aAAgB0V,EAAGV,cAChBhU,EAAIhB,KAI3B,SAAS8tB,GAAkB5wB,EAAGC,GAC1B,OAAOD,EAAE6wB,KAAKC,QAAU7wB,EAAE4wB,KAAKC,QAEnC,SAASC,GAAavY,EAAIwY,EAAYC,EAAiB7zB,GACnD,IAAI8zB,EAAe1Y,EAAGO,UAClBd,EAAQO,EAAGM,mBAAmB,YAAaN,EAAG2Y,YAAaD,GAC/DjZ,EAAMpV,OAAOouB,GACbhZ,EAAMe,YAAY9G,MAAM9U,GACxB,IAAIg0B,EAAoBnZ,EAAMsS,QAAQxnB,KAAKkV,GACvCQ,EAAYlK,GAAIkK,WAAalK,GACjCgF,GAAS,WACLhF,GAAI0J,MAAQA,EACZ1J,GAAIkK,UAAYA,EACG,IAAfuY,GACA9vB,EAAKgwB,GAAc/vB,QAAQ,SAAUgX,GACjCkZ,GAAYJ,EAAiB9Y,EAAW+Y,EAAa/Y,GAAW+B,QAASgX,EAAa/Y,GAAW8B,WAErGmW,GAAyB5X,EAAIyY,GAC7BviB,GAAUgF,OAAO,WAAc,OAAO8E,EAAGiS,GAAG6G,SAAS3X,KAAK1B,KAAW/F,MAAMkf,IAMvF,SAAgC5Y,EAAIwY,EAAY/Y,EAAOgZ,GACnD,IAAI3xB,EAAQ,GACRiyB,EAAW/Y,EAAGgZ,UACdC,EAAmBF,EAAS3qB,OAAO,SAAUkqB,GAAW,OAAOA,EAAQD,KAAKC,UAAYE,IAAe,GAC3G,IAAKS,EACD,MAAM,IAAIvnB,EAAWwnB,QAAQ,oEACjC,IAAIR,EAAe1Y,EAAGO,UAAY0Y,EAAiBZ,KAAKH,SACpDiB,GAA2B,EAqE/B,OApEgBJ,EAAS3qB,OAAO,SAAU6C,GAAK,OAAOA,EAAEonB,KAAKC,QAAUE,IAC7D7vB,QAAQ,SAAU2vB,GACxBxxB,EAAM9F,KAAK,WACP,IAAIo4B,EAAYV,EACZW,EAAYf,EAAQD,KAAKH,SAC7BoB,GAA2BtZ,EAAIoZ,EAAWX,GAC1Ca,GAA2BtZ,EAAIqZ,EAAWZ,GAC1CC,EAAe1Y,EAAGO,UAAY8Y,EAC9B,IAAIE,EAgEhB,SAAuBH,EAAWC,GAC9B,IAKI9Q,EALAgR,EAAO,CACPC,IAAK,GACL3V,IAAK,GACL4V,OAAQ,IAGZ,IAAKlR,KAAS6Q,EACLC,EAAU9Q,IACXgR,EAAKC,IAAIx4B,KAAKunB,GAEtB,IAAKA,KAAS8Q,EAAW,CACrB,IAAIK,EAASN,EAAU7Q,GAAQoR,EAASN,EAAU9Q,GAClD,GAAKmR,EAGA,CACD,IAAID,EAAS,CACTp4B,KAAMknB,EACNqR,IAAKD,EACLE,UAAU,EACVL,IAAK,GACL3V,IAAK,GACL4V,OAAQ,IAEZ,GAAIC,EAAOhY,QAAQ1b,MAAQ2zB,EAAOjY,QAAQ1b,IACtCyzB,EAAOI,UAAW,EAClBN,EAAKE,OAAOz4B,KAAKy4B,OAEhB,CACD,IAAIK,EAAaJ,EAAOzX,UACpB8X,EAAaJ,EAAO1X,UACpB+X,OAAU,EACd,IAAKA,KAAWF,EACPC,EAAWC,IACZP,EAAOD,IAAIx4B,KAAKg5B,GAExB,IAAKA,KAAWD,EAAY,CACxB,IAAIE,EAASH,EAAWE,GAAUE,EAASH,EAAWC,GACjDC,EAEIA,EAAOj0B,MAAQk0B,EAAOl0B,KAC3ByzB,EAAOA,OAAOz4B,KAAKk5B,GAFnBT,EAAO5V,IAAI7iB,KAAKk5B,IAIpBT,EAAOD,IAAIt2B,OAAS,GAAKu2B,EAAO5V,IAAI3gB,OAAS,GAAKu2B,EAAOA,OAAOv2B,OAAS,IACzEq2B,EAAKE,OAAOz4B,KAAKy4B,SA/BzBF,EAAK1V,IAAI7iB,KAAK,CAACunB,EAAOoR,IAoC9B,OAAOJ,EAlHYY,CAAcf,EAAWC,GACpCE,EAAK1V,IAAIlb,QAAQ,SAAUyxB,GACvBvB,GAAYJ,EAAiB2B,EAAM,GAAIA,EAAM,GAAG1Y,QAAS0Y,EAAM,GAAG3Y,WAEtE8X,EAAKE,OAAO9wB,QAAQ,SAAU8wB,GAC1B,GAAIA,EAAOI,SACP,MAAM,IAAInoB,EAAWwnB,QAAQ,4CAG7B,IAAImB,EAAU5B,EAAgB5F,YAAY4G,EAAOp4B,MACjDo4B,EAAO5V,IAAIlb,QAAQ,SAAUpF,GAAO,OAAO+2B,GAASD,EAAS92B,KAC7Dk2B,EAAOA,OAAO9wB,QAAQ,SAAUpF,GAC5B82B,EAAQE,YAAYh3B,EAAIlC,MACxBi5B,GAASD,EAAS92B,KAEtBk2B,EAAOD,IAAI7wB,QAAQ,SAAUqxB,GAAW,OAAOK,EAAQE,YAAYP,OAG3E,IAAIQ,EAAiBlC,EAAQD,KAAKmC,eAClC,GAAIA,EAAgB,CAChB5C,GAAyB5X,EAAIyY,GAC7BU,GAA2B,EAC3B,IAUIsB,EAVAC,EAAkB3sB,EAAasrB,GACnCE,EAAKC,IAAI7wB,QAAQ,SAAU4f,GACvBmS,EAAgBnS,GAAS6Q,EAAU7Q,KAEvC4P,GAAgBnY,EAAI,CAACA,EAAGgR,YAAYzxB,YACpCw4B,GAAc/X,EAAI,CAACA,EAAGgR,YAAYzxB,WAAYmJ,EAAKgyB,GAAkBA,GACrEjb,EAAMI,OAAS6a,EACXF,EAAejsB,cAAgB6F,IAC/BiI,KAGJ,IAAIse,EAAkBzkB,GAAUgF,OAAO,WAEnC,IADAuf,EAAgBD,EAAe/a,KAEvBgb,EAAclsB,cAAgB4F,GAAe,CAC7C,IAAIymB,EAAchjB,GAAwBrN,KAAK,KAAM,MACrDkwB,EAAc14B,KAAK64B,EAAaA,MAI5C,OAAQH,GAA+C,mBAAvBA,EAAc14B,KAC1CmU,GAAUvR,QAAQ81B,GAAiBE,EAAgB54B,KAAK,WAAc,OAAO04B,OAGzF3zB,EAAM9F,KAAK,SAAU+e,GACZoZ,GAA6Bza,IAmF9C,SAA6B2a,EAAWtZ,GACpC,IAAK,IAAI9c,EAAI,EAAGA,EAAI8c,EAASC,GAAG2U,iBAAiBzxB,SAAUD,EAAG,CAC1D,IAAI43B,EAAY9a,EAASC,GAAG2U,iBAAiB1xB,GACjB,MAAxBo2B,EAAUwB,IACV9a,EAASC,GAAG8a,kBAAkBD,IArF1BE,CADgBzC,EAAQD,KAAKH,SACEnY,GAEnCoY,GAAgBnY,EAAI,CAACA,EAAGgR,YAAYzxB,YACpCw4B,GAAc/X,EAAI,CAACA,EAAGgR,YAAYzxB,WAAYygB,EAAG2Y,YAAa3Y,EAAGO,WACjEd,EAAMI,OAASG,EAAGO,cAG1B,SAASya,IACL,OAAOl0B,EAAM5D,OAASgT,GAAUvR,QAAQmC,EAAM0qB,OAAN1qB,CAAc2Y,EAAMM,WAAWhe,KAAKi5B,GACxE9kB,GAAUvR,UAEXq2B,GAAWj5B,KAAK,WA+D3B,IAA6Bs3B,EAAWtZ,IA9DE0Y,EA+DtC/vB,EADyB2wB,EA9DDX,GA+DR/vB,QAAQ,SAAUgX,GACzBI,EAASC,GAAG2U,iBAAiBsG,SAAStb,IACvCkZ,GAAY9Y,EAAUJ,EAAW0Z,EAAU1Z,GAAW+B,QAAS2X,EAAU1Z,GAAW8B,aAjJpFyZ,CAAuBlb,EAAIwY,EAAY/Y,EAAOgZ,GAAiB/e,MAAMkf,KAuIjF,SAASC,GAAY9Y,EAAUJ,EAAW+B,EAASD,GAC/C,IAAImR,EAAQ7S,EAASC,GAAGmb,kBAAkBxb,EAAW+B,EAAQvU,QACzD,CAAEA,QAASuU,EAAQvU,QAASynB,cAAelT,EAAQ6R,MACnD,CAAEqB,cAAelT,EAAQ6R,OAE7B,OADA9R,EAAQ9Y,QAAQ,SAAUpF,GAAO,OAAO+2B,GAAS1H,EAAOrvB,KACjDqvB,EAiBX,SAAS0H,GAAS1H,EAAOrvB,GACrBqvB,EAAMwI,YAAY73B,EAAIlC,KAAMkC,EAAI4J,QAAS,CAAEga,OAAQ5jB,EAAI4jB,OAAQ6N,WAAYzxB,EAAImf,QAuBnF,SAAS4W,GAA2BtZ,EAAIH,EAAQE,GAE5C,IADA,IAAII,EAAaJ,EAASC,GAAG2U,iBACpB1xB,EAAI,EAAGA,EAAIkd,EAAWjd,SAAUD,EAAG,CACxC,IAAI43B,EAAY1a,EAAWld,GACvB2vB,EAAQ7S,EAAS8S,YAAYgI,GACjC7a,EAAGqb,WAAa,WAAYzI,EAC5B,IAAK,IAAInsB,EAAI,EAAGA,EAAImsB,EAAMmC,WAAW7xB,SAAUuD,EAAG,CAC9C,IAAIujB,EAAY4I,EAAMmC,WAAWtuB,GAC7B0G,EAAUylB,EAAMnQ,MAAMuH,GAAW7c,QACjCmuB,EAA+B,iBAAZnuB,EAAuBA,EAAU,IAAMnE,EAAMmE,GAASlF,KAAK,KAAO,IACzF,GAAI4X,EAAOgb,GAAY,CACnB,IAAIU,EAAY1b,EAAOgb,GAAW5Y,UAAUqZ,GACxCC,IACAA,EAAUl6B,KAAO2oB,KAIR,oBAAdxL,WAA6B,SAAShP,KAAKgP,UAAUC,aAC3D,oBAAoBjP,KAAKgP,UAAUC,YACpCvT,EAAQswB,mBAAqBtwB,aAAmBA,EAAQswB,mBACxD,GAAGl0B,OAAOkX,UAAUC,UAAUqO,MAAM,kBAAkB,GAAK,MAC3D9M,EAAGqb,YAAa,GAcxB,IA2DII,GA3DAC,GAAyB,WACzB,SAASA,KAyCT,OAvCAA,EAAQn8B,UAAUo8B,iBAAmB,SAAUC,EAAQC,GACnDnzB,EAAKkzB,GAAQjzB,QAAQ,SAAUgX,GAC3B,GAA0B,OAAtBic,EAAOjc,GAAqB,CAC5B,IAAI8B,EAjBpB,SAA0BA,GACtB,IAAIrU,EAAK,GAOT,OANAqU,EAAQvT,MAAM,KAAKvF,QAAQ,SAAU8Z,GAEjC,IAAIphB,GADJohB,EAAQA,EAAMqZ,QACGC,QAAQ,eAAgB,IACrC5uB,EAAU,MAAMqC,KAAKnO,GAAQA,EAAKyrB,MAAM,cAAc,GAAG5e,MAAM,KAAO7M,EAC1E+L,EAAGpM,KAAKsyB,GAAgBjyB,EAAM8L,GAAW,KAAM,KAAKqC,KAAKiT,GAAQ,KAAKjT,KAAKiT,GAAQ,OAAOjT,KAAKiT,GAAQzX,EAAQmC,OAE5GC,EASmB4uB,CAAiBJ,EAAOjc,IAClC+B,EAAUD,EAAQ+P,QACtB,GAAI9P,EAAQgB,MACR,MAAM,IAAIhR,EAAWoV,OAAO,sCAChCrF,EAAQ9Y,QAAQ,SAAUpF,GACtB,GAAIA,EAAIgwB,KACJ,MAAM,IAAI7hB,EAAWoV,OAAO,wDAChC,IAAKvjB,EAAI4J,QACL,MAAM,IAAIuE,EAAWoV,OAAO,0DAEpC+U,EAAUlc,GAAa8T,GAAkB9T,EAAW+B,EAASD,OAIzEia,EAAQn8B,UAAUq8B,OAAS,SAAUA,GACjC,IAAI5b,EAAKjV,KAAKiV,GACdjV,KAAKstB,KAAK4D,aAAelxB,KAAKstB,KAAK4D,aAC/B5wB,EAAON,KAAKstB,KAAK4D,aAAcL,GAC/BA,EACJ,IAAI7C,EAAW/Y,EAAGgZ,UACdkD,EAAa,GACjBnD,EAASpwB,QAAQ,SAAU2vB,GACvBjtB,EAAO6wB,EAAY5D,EAAQD,KAAK4D,gBAEpC,IAAI/D,EAAYntB,KAAKstB,KAAKH,SAAW,GAMrC,OALAntB,KAAK4wB,iBAAiBO,EAAYhE,GAClClY,EAAGO,UAAY2X,EACfC,GAAgBnY,EAAI,CAACA,EAAGmc,WAAYnc,EAAIA,EAAGgR,YAAYzxB,YACvDw4B,GAAc/X,EAAI,CAACA,EAAGmc,WAAYnc,EAAIA,EAAGgR,YAAYzxB,UAAWwL,KAAKstB,KAAK3D,QAAShsB,EAAKwvB,GAAWA,GACnGlY,EAAG2Y,YAAcjwB,EAAKwvB,GACfntB,MAEX2wB,EAAQn8B,UAAU68B,QAAU,SAAUC,GAElC,OADAtxB,KAAKstB,KAAKmC,eAAiB6B,EACpBtxB,MAEJ2wB,EA1CiB,GA2F5B,SAASY,GAAI57B,GACT,OAAOqa,GAAS,WAEZ,OADAhF,GAAIsK,YAAa,EACV3f,MAIf,SAAS67B,GAAUvc,GACf,IAAIwc,EAAQxc,EAAGrJ,OACXyL,EAAYpC,EAAGmC,MAAMC,UACzB,GAAIoa,EAAM/b,eAAiBT,EAAGyR,MAC1B,OAAO+K,EAAM5b,eAAe7e,KAAK,WAAc,OAAOy6B,EAAM9K,YACxDlV,GAAUggB,EAAM9K,aAChB1R,IACR1Q,IAAUktB,EAAMC,cAAcjmB,aAAe1G,KAC7C0sB,EAAM/b,eAAgB,EACtB+b,EAAM9K,YAAc,KACpB8K,EAAMpc,cAAe,EACrB,IAAIsc,EAAiBF,EAAMG,eAC3BC,EAAqB,KACrB,OAAO1mB,GAAU2E,KAAK,CAAC2hB,EAAMC,cAAe,IAAIvmB,GAAU,SAAUvR,EAASC,GACrE,IAAKwd,EACD,MAAM,IAAI1Q,EAAWigB,WAAW,6KAEpC,IAAIkL,EAAS7c,EAAG3e,KACZ2yB,EAAMwI,EAAMM,WACZ1a,EAAUpd,KAAK63B,GACfza,EAAUpd,KAAK63B,EAAQjU,KAAKmU,MAAiB,GAAX/c,EAAGgd,QACzC,IAAKhJ,EACD,MAAM,IAAItiB,EAAWigB,WAAW,+BACpCqC,EAAI/gB,QAAU2d,GAAmBhsB,GACjCovB,EAAIiJ,UAAY3jB,GAAK0G,EAAGkd,gBACxBlJ,EAAImJ,gBAAkB7jB,GAAK,SAAU1X,GAEjC,GADAg7B,EAAqB5I,EAAInC,YACrB2K,EAAMM,aAAe9c,EAAGU,SAAS0c,aAAc,CAC/CpJ,EAAI/gB,QAAU4d,GACd+L,EAAmB3J,QACnBe,EAAI3tB,OAAOg3B,QACX,IAAIC,EAASlb,EAAUmb,eAAeV,GACtCS,EAAOtqB,UAAYsqB,EAAOrqB,QAAUqG,GAAK,WACrC1U,EAAO,IAAI8M,EAAW8rB,eAAe,YAAcX,EAAS,wBAG/D,CACDD,EAAmB3pB,QAAU2d,GAAmBhsB,GAChD,IAAI64B,EAAS77B,EAAE42B,WAAa5P,KAAK8U,IAAI,EAAG,IAAM,EAAI97B,EAAE42B,WACpDD,GAAavY,EAAIyd,EAAS,GAAIb,EAAoBh4B,KAEvDA,GACHovB,EAAIhhB,UAAYsG,GAAK,WACjBsjB,EAAqB,KACrB,IAAInL,EAAQzR,EAAGyR,MAAQuC,EAAI3tB,OACvBsuB,EAAmB3rB,EAAMyoB,EAAMkD,kBACnC,GAAIA,EAAiBzxB,OAAS,EAC1B,IACI,IAAImxB,EAAW5C,EAAMI,YAAYrB,GAAoBmE,GAAmB,YACpE6H,EAAMM,WA3MlC,SAA0B9c,EAAIyR,EAAO4C,GACjCrU,EAAGgd,MAAQvL,EAAM6G,QAAU,GAC3B,IAAII,EAAe1Y,EAAGO,UAAY,GAC9Bod,EAAe3d,EAAG2Y,YAAc3vB,EAAMyoB,EAAMkD,iBAAkB,GACtC,IAAxBgJ,EAAaz6B,SAEjBy6B,EAAah1B,QAAQ,SAAUkyB,GAK3B,IAJA,IAAIjI,EAAQyB,EAASxB,YAAYgI,GAC7B1tB,EAAUylB,EAAMzlB,QAChBuU,EAAU4R,GAAgBE,GAAgBrmB,GAAUA,GAAW,IAAI,GAAO,IAASylB,EAAMgC,cAAeznB,GAA8B,iBAAZA,GAC1HsU,EAAU,GACLhb,EAAI,EAAGA,EAAImsB,EAAMmC,WAAW7xB,SAAUuD,EAAG,CAC9C,IAAIm3B,EAAWhL,EAAMnQ,MAAMmQ,EAAMmC,WAAWtuB,IAC5C0G,EAAUywB,EAASzwB,QACnB,IAAIsV,EAAQ6Q,GAAgBsK,EAASv8B,KAAM8L,IAAWywB,EAASzW,SAAUyW,EAAS5I,YAAY,EAAO7nB,GAA8B,iBAAZA,GACvHsU,EAAQzgB,KAAKyhB,GAEjBiW,EAAamC,GAAapH,GAAkBoH,EAAWnZ,EAASD,KAEpEsW,GAAc/X,EAAI,CAACA,EAAGmc,YAAazzB,EAAKgwB,GAAeA,IAyL/BmF,CAAiB7d,EAAIyR,EAAO4C,GAE5BiF,GAA2BtZ,EAAIA,EAAGO,UAAW8T,GACjDuD,GAAyB5X,EAAIqU,GAEjC,MAAOzyB,IAEX0c,GAAYtd,KAAKgf,GACjByR,EAAMqM,gBAAkBxkB,GAAK,SAAUwY,GACnC0K,EAAMuB,SAAU,EAChB/d,EAAGiS,GAAG,iBAAiB9Q,KAAK2Q,KAEhC2J,GAAmB5X,IAAIgZ,GACvBl4B,KACDC,OACF7C,KAAK,WAEV,OADAy6B,EAAMwB,kBAAoB,GACnB9nB,GAAUvR,QAAQ23B,GAAItc,EAAGiS,GAAGgM,MAAM9c,OAAOpf,KAAK,SAASm8B,IAC1D,GAAI1B,EAAMwB,kBAAkB96B,OAAS,EAAG,CACpC,IAAIi7B,EAAa3B,EAAMwB,kBAAkBxsB,OAAO+B,GAAiBjB,GAEjE,OADAkqB,EAAMwB,kBAAoB,GACnB9nB,GAAUvR,QAAQ23B,GAAI6B,IAAap8B,KAAKm8B,QAGxDtkB,QAAQ,WACP4iB,EAAMwB,kBAAoB,OAC3Bj8B,KAAK,WAEJ,OADAy6B,EAAM/b,eAAgB,EACfT,IACRtG,MAAM,SAAUzX,GACf,IACI26B,GAAsBA,EAAmB3J,QAE7C,MAAOrxB,IAIP,OAHA46B,EAAM/b,eAAgB,EACtBT,EAAGqd,QACHb,EAAM9K,YAAczvB,EACbua,GAAUggB,EAAM9K,eACxB9X,QAAQ,WACP4iB,EAAMpc,cAAe,EACrBsc,MAIR,SAAS0B,GAAcvvB,GACnB,IAAIwvB,EAAW,SAAUh4B,GAAU,OAAOwI,EAASO,KAAK/I,IAA0Ei4B,EAAYC,EAAKF,GAAWG,EAAUD,EAA1F,SAAUn1B,GAAS,OAAOyF,EAAS4vB,MAAMr1B,KACvH,SAASm1B,EAAKG,GACV,OAAO,SAAUrxB,GACb,IAAI+B,EAAOsvB,EAAQrxB,GAAM3L,EAAQ0N,EAAK1N,MACtC,OAAO0N,EAAKC,KAAO3N,EACbA,GAA+B,mBAAfA,EAAMK,KAEpBL,EAAMK,KAAKu8B,EAAWE,GADtBxzB,EAAQtJ,GAASgD,QAAQ+V,IAAI/Y,GAAOK,KAAKu8B,EAAWE,GAAWF,EAAU58B,IAIzF,OAAO68B,EAAKF,EAALE,GAGX,SAASI,GAAuBt8B,EAAMu8B,EAAaC,GAC/C,IAAI57B,EAAI6H,UAAU5H,OAClB,GAAID,EAAI,EACJ,MAAM,IAAIyO,EAAW0S,gBAAgB,qBAEzC,IADA,IAAI5X,EAAO,IAAIvB,MAAMhI,EAAI,KAChBA,GACLuJ,EAAKvJ,EAAI,GAAK6H,UAAU7H,GAG5B,OAFA47B,EAAYryB,EAAKtF,MAEV,CAAC7E,EADK2L,EAAQxB,GACCqyB,GAE1B,SAASC,GAAsB9e,EAAI3d,EAAM8d,EAAY4e,EAAmBF,GACpE,OAAO3oB,GAAUvR,UAAU5C,KAAK,WAC5B,IAeIi9B,EAfA/e,EAAYlK,GAAIkK,WAAalK,GAC7B0J,EAAQO,EAAGM,mBAAmBje,EAAM8d,EAAYH,EAAGO,UAAWwe,GAC9D5jB,EAAY,CACZsE,MAAOA,EACPQ,UAAWA,GAEX8e,EACAtf,EAAMM,SAAWgf,EAAkBhf,SAGnCN,EAAMpV,SAENw0B,EAAUtwB,cAAgB6F,IAC1BiI,KAGJ,IAAIse,EAAkBzkB,GAAUgF,OAAO,WAEnC,GADA8jB,EAAcH,EAAUp/B,KAAKggB,EAAOA,GAEhC,GAAIuf,EAAYzwB,cAAgB4F,GAAe,CAC3C,IAAIymB,EAAchjB,GAAwBrN,KAAK,KAAM,MACrDy0B,EAAYj9B,KAAK64B,EAAaA,OAEG,mBAArBoE,EAAY5vB,MAAoD,mBAAtB4vB,EAAYP,QAClEO,EAAcZ,GAAcY,KAGrC7jB,GACH,OAAQ6jB,GAA2C,mBAArBA,EAAYj9B,KACtCmU,GAAUvR,QAAQq6B,GAAaj9B,KAAK,SAAUgN,GAAK,OAAO0Q,EAAM5e,OAC5DkO,EACEyN,GAAU,IAAI9K,EAAWutB,gBAAgB,iEAC7CtE,EAAgB54B,KAAK,WAAc,OAAOi9B,KAAiBj9B,KAAK,SAAUgN,GAG5E,OAFIgwB,GACAtf,EAAM0S,WACH1S,EAAMe,YAAYze,KAAK,WAAc,OAAOgN,MACpD2K,MAAM,SAAU9X,GAEf,OADA6d,EAAMsS,QAAQnwB,GACP4a,GAAU5a,OAK7B,SAASs9B,GAAI13B,EAAG9F,EAAOohB,GACd9X,EAAQxD,KACTA,EAAI,CAACA,IAGT,IAFA,IAAItE,EAASsE,EAAEtE,OACXmD,EAAS,IAAI4E,MAAM/H,EAAS4f,GACvB7f,EAAIuE,EAAEtE,OAAS4f,EAAQ,EAAG7f,GAAKC,IAAUD,EAC9CoD,EAAOpD,GAAKvB,EAEhB,OAAO2E,EAyFX,IAAI84B,GAAyB,CACzBtvB,MAAO,SACPxO,KAAM,yBACN+9B,MAAO,EACP/0B,OA3FJ,SAAsCqtB,GAClC,OAAO9sB,EAAS,GAAI8sB,EAAM,CAAEnP,MAAO,SAAU5I,GACrC,IAAI4I,EAAQmP,EAAKnP,MAAM5I,GACnBE,EAAS0I,EAAM1I,OACfwf,EAAc,GACdC,EAAoB,GACxB,SAASC,EAAkBpyB,EAASqyB,EAASC,GACzC,IAAIC,EAAevL,GAAgBhnB,GAC/BwyB,EAAaN,EAAYK,GAAgBL,EAAYK,IAAiB,GACtEE,EAAuB,MAAXzyB,EAAkB,EAAuB,iBAAZA,EAAuB,EAAIA,EAAQjK,OAC5E28B,EAAYL,EAAU,EACtBM,EAAel1B,EAAS,GAAI60B,EAAe,CAAEI,UAAWA,EAAW/K,cAAe+K,GAAaJ,EAAc3K,aAAc0K,QAASA,EACpII,UAAWA,EAAW3U,WAAY4I,GAAgB1mB,GAAUga,QAAS0Y,GAAaJ,EAActY,UACpGwY,EAAU3+B,KAAK8+B,GACVA,EAAahL,cACdwK,EAAkBt+B,KAAK8+B,GAEvBF,EAAY,IAIZL,EAHmC,IAAdK,EACjBzyB,EAAQ,GACRA,EAAQnE,MAAM,EAAG42B,EAAY,GACCJ,EAAU,EAAGC,GAGnD,OADAE,EAAUpW,KAAK,SAAU/hB,EAAGC,GAAK,OAAOD,EAAEg4B,QAAU/3B,EAAE+3B,UAC/CM,EAEX,IAAI7b,EAAasb,EAAkB1f,EAAOoE,WAAW9W,QAAS,EAAG0S,EAAOoE,YACxEob,EAAY,OAAS,CAACpb,GACtB,IAAK,IAAI8b,EAAK,EAAGzd,EAAKzC,EAAO4B,QAASse,EAAKzd,EAAGpf,OAAQ68B,IAAM,CACxD,IAAItd,EAAQH,EAAGyd,GACfR,EAAkB9c,EAAMtV,QAAS,EAAGsV,GAiBxC,SAASud,EAAiBhM,GACtB,IAZoBvP,EAAO+a,EAYvB/c,EAAQuR,EAAI5M,MAAM3E,MACtB,OAAOA,EAAMod,UAAYj1B,EAAS,GAAIopB,EAAK,CAAE5M,MAAO,CAC5C3E,MAAOA,EACPgC,OAfYA,EAeUuP,EAAI5M,MAAM3C,MAfb+a,EAeoB/c,EAAM+c,QAd9C,CACHr4B,KAAqB,IAAfsd,EAAMtd,KACR,EACAsd,EAAMtd,KACV+X,MAAOggB,GAAIza,EAAMvF,MAAOuF,EAAMtF,UAAYuY,EAAKN,QAAUM,EAAKP,QAASqI,GACvErgB,WAAW,EACXC,MAAO8f,GAAIza,EAAMrF,MAAOqF,EAAMpF,UAAYqY,EAAKP,QAAUO,EAAKN,QAASoI,GACvEngB,WAAW,OAQJ2U,EAgCf,OA9BappB,EAAS,GAAI2d,EAAO,CAAE1I,OAAQjV,EAAS,GAAIiV,EAAQ,CAAEoE,WAAYA,EAAYxC,QAAS6d,EAAmBzY,kBAtBtH,SAAuB1Z,GACnB,IAAI9G,EAASg5B,EAAYlL,GAAgBhnB,IACzC,OAAO9G,GAAUA,EAAO,MAoB+Hyc,MAAO,SAAUkR,GACpK,OAAOzL,EAAMzF,MAAMkd,EAAiBhM,KAExC5M,MAAO,SAAU4M,GACb,OAAOzL,EAAMnB,MAAM4Y,EAAiBhM,KAExCjN,WAAY,SAAUiN,GAClB,IAAI1R,EAAK0R,EAAI5M,MAAM3E,MAAO+c,EAAUld,EAAGkd,QAASK,EAAYvd,EAAGud,UAAWD,EAAYtd,EAAGsd,UACzF,IAAKC,EACD,OAAOtX,EAAMxB,WAAWiN,GAkB5B,OAAOzL,EAAMxB,WAAWiZ,EAAiBhM,IACpCjyB,KAAK,SAAU0lB,GAAU,OAAOA,GAlBrC,SAA6BA,GAQzB,OAAO7c,EAAS,GAAI6c,EAAQ,CAAEU,SAP9B,SAAmB7d,GACR,MAAPA,EACImd,EAAOU,SAAS+W,GAAI50B,EAAK0pB,EAAI1Q,QAAUoU,EAAKN,QAAUM,EAAKP,QAASqI,IACpExL,EAAI7M,OACAM,EAAOU,SAAS+W,GAAIzX,EAAOnd,IAAK0pB,EAAI1Q,QAAUoU,EAAKP,QAAUO,EAAKN,QAASoI,IAC3E/X,EAAOU,YAEgCsO,mBAAoB,SAAUnsB,EAAK2Z,GAC9EwD,EAAOgP,mBAAmByI,GAAI50B,EAAKotB,EAAKN,QAASoI,GAAUvb,IAC5D,UACC,IAAI3Z,EAAMmd,EAAOnd,IACjB,OAAqB,IAAds1B,EACHt1B,EAAI,GACJA,EAAItB,MAAM,EAAG42B,MAIkBK,CAAoBxY,aAYnFyY,GAAkB,CAClBrwB,MAAO,SACPxO,KAAM,kBACN+9B,MAAO,EACP/0B,OAAQ,SAAU81B,GAAY,OAAQv1B,EAAS,GAAIu1B,EAAU,CAAE5X,MAAO,SAAU5I,GACxE,IAAIygB,EAAYD,EAAS5X,MAAM5I,GAC3BsE,EAAamc,EAAUvgB,OAAOoE,WAyGlC,OAxGsBrZ,EAAS,GAAIw1B,EAAW,CAAEtc,OAAQ,SAAUkQ,GAC1D,IAAIqM,EAAUtqB,GAAI0J,MACd6C,EAAK+d,EAAQ9X,MAAM5I,GAAWsB,KAAMqf,EAAWhe,EAAGge,SAAUC,EAAWje,EAAGie,SAAUC,EAAWle,EAAGke,SACtG,OAAQxM,EAAI7sB,MACR,IAAK,MACD,GAAIo5B,EAASpf,OAAS7O,EAClB,MACJ,OAAO+tB,EAAQloB,SAAS,YAAa,WAAc,OAAOsoB,EAAezM,KAAS,GACtF,IAAK,MACD,GAAIuM,EAASpf,OAAS7O,GAAOkuB,EAASrf,OAAS7O,EAC3C,MACJ,OAAO+tB,EAAQloB,SAAS,YAAa,WAAc,OAAOsoB,EAAezM,KAAS,GACtF,IAAK,SACD,GAAIsM,EAASnf,OAAS7O,EAClB,MACJ,OAAO+tB,EAAQloB,SAAS,YAAa,WAAc,OAAOsoB,EAAezM,KAAS,GACtF,IAAK,cACD,GAAIsM,EAASnf,OAAS7O,EAClB,MACJ,OAAO+tB,EAAQloB,SAAS,YAAa,WAAc,OAiE3D,SAAqB6b,GACjB,OAEJ,SAAS0M,EAAgBjhB,EAAOgF,EAAOzK,GACnC,OAAOomB,EAAUhZ,MAAM,CAAE3H,MAAOA,EAAO/E,QAAQ,EAAO0M,MAAO,CAAE3E,MAAOwB,EAAYQ,MAAOA,GAASzK,MAAOA,IACpGjY,KAAK,SAAUugB,GAChB,IAAIjc,EAASic,EAAGjc,OAChB,OAAOo6B,EAAe,CAAEt5B,KAAM,SAAUuB,KAAMrC,EAAQoZ,MAAOA,IAAS1d,KAAK,SAAUgR,GACjF,OAAIA,EAAIgR,YAAc,EACXrf,QAAQE,OAAOmO,EAAIhC,SAAS,IACnC1K,EAAOnD,OAAS8W,EACT,CAAEjJ,SAAU,GAAIgT,YAAa,EAAGC,gBAAYhhB,GAG5C09B,EAAgBjhB,EAAO7U,EAAS,GAAI6Z,EAAO,CAAEvF,MAAO7Y,EAAOA,EAAOnD,OAAS,GAAIic,WAAW,IAASnF,OAb/G0mB,CAAgB1M,EAAIvU,MAAOuU,EAAIvP,MAAO,KAlEiBkc,CAAY3M,KAAS,GAEvF,OAAOoM,EAAUtc,OAAOkQ,GACxB,SAASyM,EAAezM,GACpB,IAAIqM,EAAUtqB,GAAI0J,MACdkF,EAAUqP,EAAItrB,MAAQqrB,GAAiB9P,EAAY+P,GACvD,IAAKrP,EACD,MAAM,IAAIngB,MAAM,gBAOpB,MAJiB,YAFjBwvB,EAAmB,QAAbA,EAAI7sB,MAA+B,QAAb6sB,EAAI7sB,KAAiByD,EAAS,GAAIopB,EAAK,CAAEtrB,KAAMic,EAASwQ,aAAa,IAChGvqB,EAAS,GAAIopB,IACN7sB,OACJ6sB,EAAItZ,OAASsZ,EAAItZ,OAAO1R,SACxBgrB,EAAItrB,OACJsrB,EAAItrB,KAAOsrB,EAAItrB,KAAKM,SA7iChD,SAA2Buf,EAAOyL,EAAK4M,GACnC,MAAoB,QAAb5M,EAAI7sB,KAAiBzC,QAAQC,QAAQ,IAAIsG,MAAM+oB,EAAItZ,OAAOxX,SAC7DqlB,EAAM3D,QAAQ,CAAEnF,MAAOuU,EAAIvU,MAAO/W,KAAMk4B,IA4iCjBC,CAAkBT,EAAWpM,EAAKrP,GAAS5iB,KAAK,SAAU++B,GAC7D,IAAIC,EAAWpc,EAAQ5d,IAAI,SAAUuD,EAAKrH,GACtC,IAAI+9B,EAAgBF,EAAe79B,GAC/BkiB,EAAM,CAAElS,QAAS,KAAMD,UAAW,MACtC,GAAiB,WAAbghB,EAAI7sB,KACJm5B,EAASnf,KAAK1hB,KAAK0lB,EAAK7a,EAAK02B,EAAeX,QAE3C,GAAiB,QAAbrM,EAAI7sB,WAAoCnE,IAAlBg+B,EAA6B,CACxD,IAAIC,EAAsBV,EAASpf,KAAK1hB,KAAK0lB,EAAK7a,EAAK0pB,EAAItZ,OAAOzX,GAAIo9B,GAC3D,MAAP/1B,GAAsC,MAAvB22B,IACf32B,EAAM22B,EACNjN,EAAItrB,KAAKzF,GAAKqH,EACT2Z,EAAWC,UACZzW,EAAaumB,EAAItZ,OAAOzX,GAAIghB,EAAW9W,QAAS7C,QAIvD,CACD,IAAI42B,EAAa1yB,EAAcwyB,EAAehN,EAAItZ,OAAOzX,IACrDk+B,EAAsBX,EAASrf,KAAK1hB,KAAK0lB,EAAK+b,EAAY52B,EAAK02B,EAAeX,GAClF,GAAIc,EAAqB,CACrB,IAAIC,EAAmBpN,EAAItZ,OAAOzX,GAClC3D,OAAOoJ,KAAKy4B,GAAqBx4B,QAAQ,SAAUwE,GAC/CM,EAAa2zB,EAAkBj0B,EAASg0B,EAAoBh0B,OAIxE,OAAOgY,IAEX,OAAOib,EAAUtc,OAAOkQ,GAAKjyB,KAAK,SAAUugB,GAExC,IADA,IAAIvR,EAAWuR,EAAGvR,SAAU+a,EAAUxJ,EAAGwJ,QAAS/H,EAAczB,EAAGyB,YAAaC,EAAa1B,EAAG0B,WACvF/gB,EAAI,EAAGA,EAAI0hB,EAAQzhB,SAAUD,EAAG,CACrC,IAAIye,EAAUoK,EAAUA,EAAQ7oB,GAAK0hB,EAAQ1hB,GACzCkiB,EAAM4b,EAAS99B,GACJ,MAAXye,EACAyD,EAAIlS,SAAWkS,EAAIlS,QAAQlC,EAAS9N,IAGpCkiB,EAAInS,WAAamS,EAAInS,UAAuB,QAAbghB,EAAI7sB,MAAkB25B,EAAe79B,GAChE+wB,EAAItZ,OAAOzX,GACXye,GAIZ,MAAO,CAAE3Q,SAAUA,EAAU+a,QAASA,EAAS/H,YAAaA,EAAaC,WAAYA,KACtFtK,MAAM,SAAUtQ,GAEf,OADA23B,EAASp4B,QAAQ,SAAUwc,GAAO,OAAOA,EAAIlS,SAAWkS,EAAIlS,QAAQ7J,KAC7D1E,QAAQE,OAAOwE,gBA4BlD8hB,GAAuB,WACvB,SAASA,EAAM7pB,EAAMkF,GACjB,IAAImR,EAAQ3M,KACZA,KAAK8sB,aAAe,GACpB9sB,KAAKiyB,MAAQ,EACb,IAAIqE,EAAOnW,EAAMoW,aACjBv2B,KAAK2V,SAAWna,EAAUqE,EAAS,CAC/B22B,OAAQrW,EAAMqW,OAAQ5gB,UAAU,EAChCyB,UAAWif,EAAKjf,UAAWmV,YAAa8J,EAAK9J,aAAehxB,GAChEwE,KAAKoX,MAAQ,CACTC,UAAW7b,EAAQ6b,UACnBmV,YAAahxB,EAAQgxB,aAEzB,IAAIgK,EAASh7B,EAAQg7B,OACrBx2B,KAAKwV,UAAY,GACjBxV,KAAKiuB,UAAY,GACjBjuB,KAAK4tB,YAAc,GACnB5tB,KAAKoxB,WAAa,GAClBpxB,KAAK0mB,MAAQ,KACb,IAAI+K,EAAQ,CACR9K,YAAa,KACbjR,eAAe,EACfud,kBAAmB,KACnB5d,cAAc,EACduc,eAAgBrqB,EAChBsO,eAAgB,KAChB4gB,WAAYlvB,EACZmqB,cAAe,KACfK,YAAY,GAEhBN,EAAM5b,eAAiB,IAAI1K,GAAU,SAAUvR,GAC3C63B,EAAMG,eAAiBh4B,IAE3B63B,EAAMC,cAAgB,IAAIvmB,GAAU,SAAU6H,EAAGnZ,GAC7C43B,EAAMgF,WAAa58B,IAEvBmG,KAAK4L,OAAS6lB,EACdzxB,KAAK1J,KAAOA,EACZ0J,KAAKknB,GAAK/M,GAAOna,KAAM,WAAY,UAAW,gBAAiB,CAAEkzB,MAAO,CAAC1qB,GAAiBjB,KAC1FvH,KAAKknB,GAAGgM,MAAM1Y,UAAY5Y,EAAS5B,KAAKknB,GAAGgM,MAAM1Y,UAAW,SAAUA,GAClE,OAAO,SAAUD,EAAYmc,GACzBvW,EAAMoR,IAAI,WACN,IAAIE,EAAQ9kB,EAAMf,OAClB,GAAI6lB,EAAMpc,aACDoc,EAAM9K,aACPxb,GAAUvR,UAAU5C,KAAKujB,GACzBmc,GACAlc,EAAUD,QAEb,GAAIkX,EAAMwB,kBACXxB,EAAMwB,kBAAkBh9B,KAAKskB,GACzBmc,GACAlc,EAAUD,OAEb,CACDC,EAAUD,GACV,IAAIoc,EAAOhqB,EACN+pB,GACDlc,EAAU,SAAS7B,IACfge,EAAKzP,GAAGgM,MAAMva,YAAY4B,GAC1Boc,EAAKzP,GAAGgM,MAAMva,YAAYA,WAMlD3Y,KAAKqY,WAh2Db,SAAqCpD,GACjC,OAAO8F,GAAqB1C,GAAW7jB,UAAW,SAAuB8sB,EAAasV,GAClF52B,KAAKiV,GAAKA,EACV,IAAI4hB,EAAW3iB,GAAU7V,EAAQ,KACjC,GAAIu4B,EACA,IACIC,EAAWD,IAEf,MAAOvqB,GACHhO,EAAQgO,EAEhB,IAAIyqB,EAAWxV,EAAY/D,KACvBC,EAAQsZ,EAAStZ,MACjBuZ,EAAcvZ,EAAMtH,KAAKC,QAAQC,KACrCpW,KAAKud,KAAO,CACRC,MAAOA,EACP9F,MAAOof,EAASpf,MAChBmE,WAAaib,EAASpf,OAAU8F,EAAM1I,OAAO6B,QAAQvU,SAAW00B,EAASpf,QAAU8F,EAAM1I,OAAO6B,QAAQrgB,KACxGojB,MAAOmd,EACP3a,UAAU,EACVC,IAAK,OACLC,OAAQ,GACRlB,UAAW,KACX7X,OAAQ,KACRgY,aAAc,KACdD,WAAW,EACX4D,QAAS,KACT/G,OAAQ,EACRhJ,MAAOI,IACPhR,MAAOA,EACP8c,GAAI2b,EAAS3b,GACb8B,YAAa8Z,IAAgBvvB,EAASuvB,EAAc,QAi0DtCC,CAA4Bh3B,MAC9CA,KAAKuU,MA/yEb,SAAgCU,GAC5B,OAAO8F,GAAqBxG,GAAM/f,UAAW,SAAkB8B,EAAM+xB,EAAa3T,GAC9E1U,KAAKiV,GAAKA,EACVjV,KAAK2U,IAAMD,EACX1U,KAAK1J,KAAOA,EACZ0J,KAAK8U,OAASuT,EACdroB,KAAKkW,KAAOjB,EAAGmc,WAAW96B,GAAQ2e,EAAGmc,WAAW96B,GAAM4f,KAAOiE,GAAO,KAAM,CACtE,SAAY,CAACpS,GAAmBR,GAChC,QAAW,CAACE,EAAmBD,GAC/B,SAAY,CAACa,GAAmBd,GAChC,SAAY,CAACa,GAAmBb,OAqyEvB0vB,CAAuBj3B,MACpCA,KAAKimB,YAvxCb,SAAsChR,GAClC,OAAO8F,GAAqBkL,GAAYzxB,UAAW,SAAwB8C,EAAM8d,EAAY+X,EAAU7wB,GACnG,IAAIqQ,EAAQ3M,KACZA,KAAKiV,GAAKA,EACVjV,KAAK1I,KAAOA,EACZ0I,KAAKoV,WAAaA,EAClBpV,KAAK8U,OAASqY,EACdntB,KAAKgV,SAAW,KAChBhV,KAAKknB,GAAK/M,GAAOna,KAAM,WAAY,QAAS,SAC5CA,KAAK1D,OAASA,GAAU,KACxB0D,KAAKlK,QAAS,EACdkK,KAAKmmB,UAAY,EACjBnmB,KAAKsmB,cAAgB,GACrBtmB,KAAKonB,SAAW,KAChBpnB,KAAKgnB,QAAU,KACfhnB,KAAK2nB,YAAc,KACnB3nB,KAAK4nB,cAAgB,KACrB5nB,KAAKgoB,WAAa,EAClBhoB,KAAKyV,YAAc,IAAItK,GAAU,SAAUvR,EAASC,GAChD8S,EAAMya,SAAWxtB,EACjB+S,EAAMqa,QAAUntB,IAEpBmG,KAAKyV,YAAYze,KAAK,WAClB2V,EAAM7W,QAAS,EACf6W,EAAMua,GAAGgQ,SAAS9gB,QACnB,SAAUvf,GACT,IAAIsgC,EAAYxqB,EAAM7W,OAMtB,OALA6W,EAAM7W,QAAS,EACf6W,EAAMua,GAAG7oB,MAAM+X,KAAKvf,GACpB8V,EAAMrQ,OACFqQ,EAAMrQ,OAAO0qB,QAAQnwB,GACrBsgC,GAAaxqB,EAAMqI,UAAYrI,EAAMqI,SAASkT,QAC3CzW,GAAU5a,OAuvCFugC,CAA6Bp3B,MAChDA,KAAK2wB,QAzfb,SAAkC1b,GAC9B,OAAO8F,GAAqB4V,GAAQn8B,UAAW,SAAoB6iC,GAC/Dr3B,KAAKiV,GAAKA,EACVjV,KAAKstB,KAAO,CACRC,QAAS8J,EACTnG,aAAc,KACd/D,SAAU,GACVxD,OAAQ,GACR8F,eAAgB,MAEpBzvB,KAAK6wB,OAAO,MA+eGyG,CAAyBt3B,MACxCA,KAAKsW,YAl+Cb,SAAsCrB,GAClC,OAAO8F,GAAqBzE,GAAY9hB,UAAW,SAAwBgpB,EAAO9F,EAAO6f,GACrFv3B,KAAKiV,GAAKA,EACVjV,KAAKud,KAAO,CACRC,MAAOA,EACP9F,MAAiB,QAAVA,EAAkB,KAAOA,EAChCyD,GAAIoc,GAER,IAAIlgB,EAAYpC,EAAGmC,MAAMC,UACzB,IAAKA,EACD,MAAM,IAAI1Q,EAAWigB,WAAW,yBACpC5mB,KAAKujB,KAAOvjB,KAAKmkB,WAAa9M,EAAUC,IAAI9X,KAAK6X,GACjDrX,KAAKokB,YAAc,SAAU3nB,EAAGC,GAAK,OAAO2a,EAAUC,IAAI5a,EAAGD,IAC7DuD,KAAK+kB,KAAO,SAAUtoB,EAAGC,GAAK,OAAO2a,EAAUC,IAAI7a,EAAGC,GAAK,EAAID,EAAIC,GACnEsD,KAAK6kB,KAAO,SAAUpoB,EAAGC,GAAK,OAAO2a,EAAUC,IAAI7a,EAAGC,GAAK,EAAID,EAAIC,GACnEsD,KAAKw3B,aAAeviB,EAAGmC,MAAMoV,cAm9CViL,CAA6Bz3B,MAChDA,KAAKknB,GAAG,gBAAiB,SAAUH,GAC3BA,EAAG2Q,WAAa,EAChBvhC,QAAQC,KAAK,iDAAmDuW,EAAMrW,KAAO,4CAE7EH,QAAQC,KAAK,gDAAkDuW,EAAMrW,KAAO,mDAChFqW,EAAM2lB,UAEVtyB,KAAKknB,GAAG,UAAW,SAAUH,IACpBA,EAAG2Q,YAAc3Q,EAAG2Q,WAAa3Q,EAAG0G,WACrCt3B,QAAQC,KAAK,iBAAmBuW,EAAMrW,KAAO,kBAE7CH,QAAQC,KAAK,YAAcuW,EAAMrW,KAAO,iDAAmDywB,EAAG0G,WAAa,MAEnHztB,KAAK+W,QAAU2O,GAAUlqB,EAAQgxB,aACjCxsB,KAAKuV,mBAAqB,SAAUje,EAAM8d,EAAY+X,EAAU6G,GAAqB,OAAO,IAAIrnB,EAAMsZ,YAAY3uB,EAAM8d,EAAY+X,EAAU6G,IAC9Ih0B,KAAKmyB,eAAiB,SAAUpL,GAC5Bpa,EAAMua,GAAG,WAAW9Q,KAAK2Q,GACzBxT,GACKlQ,OAAO,SAAU3I,GAAK,OAAOA,EAAEpE,OAASqW,EAAMrW,MAAQoE,IAAMiS,IAAUjS,EAAEkR,OAAOonB,UAC/Eh3B,IAAI,SAAUtB,GAAK,OAAOA,EAAEwsB,GAAG,iBAAiB9Q,KAAK2Q,MAE9D/mB,KAAK23B,IAAIvD,IACTp0B,KAAK23B,IAAIxC,IACTqB,EAAO54B,QAAQ,SAAUg6B,GAAS,OAAOA,EAAMjrB,KAgMnD,OA9LAwT,EAAM3rB,UAAU+4B,QAAU,SAAU8J,GAEhC,GADAA,EAAgBxZ,KAAKmU,MAAsB,GAAhBqF,GAAsB,GAC7Cr3B,KAAK0mB,OAAS1mB,KAAK4L,OAAO8J,cAC1B,MAAM,IAAI/O,EAAWoV,OAAO,4CAChC/b,KAAKiyB,MAAQpU,KAAKiH,IAAI9kB,KAAKiyB,MAAOoF,GAClC,IAAIrJ,EAAWhuB,KAAKiuB,UAChB4J,EAAkB7J,EAAS3qB,OAAO,SAAU6C,GAAK,OAAOA,EAAEonB,KAAKC,UAAY8J,IAAkB,GACjG,OAAIQ,IAEJA,EAAkB,IAAI73B,KAAK2wB,QAAQ0G,GACnCrJ,EAAS/3B,KAAK4hC,GACd7J,EAASxP,KAAK6O,IACdrtB,KAAK4L,OAAOmmB,YAAa,EAClB8F,IAEX1X,EAAM3rB,UAAUsjC,WAAa,SAAUniC,GACnC,IAAIgX,EAAQ3M,KACZ,OAAOA,KAAK4L,OAAOyJ,cAAgBrK,GAAIsK,WAAa3f,IAAO,IAAIwV,GAAU,SAAUvR,EAASC,GACxF,IAAK8S,EAAMf,OAAO8J,cAAe,CAC7B,IAAK/I,EAAMgJ,SAASC,SAEhB,YADA/b,EAAO,IAAI8M,EAAWlB,gBAG1BkH,EAAM1S,OAAO0U,MAAMpH,GAEvBoF,EAAMf,OAAOiK,eAAe7e,KAAK4C,EAASC,KAC3C7C,KAAKrB,IAEZwqB,EAAM3rB,UAAUmjC,IAAM,SAAUpgB,GAC5B,IAAIzS,EAAQyS,EAAGzS,MAAOxF,EAASiY,EAAGjY,OAAQ+0B,EAAQ9c,EAAG8c,MAAO/9B,EAAOihB,EAAGjhB,KAClEA,GACA0J,KAAK+3B,MAAM,CAAEjzB,MAAOA,EAAOxO,KAAMA,IACrC,IAAIi2B,EAAcvsB,KAAK8sB,aAAahoB,KAAW9E,KAAK8sB,aAAahoB,GAAS,IAG1E,OAFAynB,EAAYt2B,KAAK,CAAE6O,MAAOA,EAAOxF,OAAQA,EAAQ+0B,MAAgB,MAATA,EAAgB,GAAKA,EAAO/9B,KAAMA,IAC1Fi2B,EAAY/N,KAAK,SAAU/hB,EAAGC,GAAK,OAAOD,EAAE43B,MAAQ33B,EAAE23B,QAC/Cr0B,MAEXmgB,EAAM3rB,UAAUujC,MAAQ,SAAUxgB,GAC9B,IAAIzS,EAAQyS,EAAGzS,MAAOxO,EAAOihB,EAAGjhB,KAAMgJ,EAASiY,EAAGjY,OAQlD,OAPIwF,GAAS9E,KAAK8sB,aAAahoB,KAC3B9E,KAAK8sB,aAAahoB,GAAS9E,KAAK8sB,aAAahoB,GAAOzB,OAAO,SAAU20B,GACjE,OAAO14B,EAAS04B,EAAG14B,SAAWA,IAC1BhJ,GAAO0hC,EAAG1hC,OAASA,KAIxB0J,MAEXmgB,EAAM3rB,UAAUyF,KAAO,WACnB,OAAOu3B,GAAUxxB,OAErBmgB,EAAM3rB,UAAU89B,MAAQ,WACpB,IAAI95B,EAAM+a,GAAYvd,QAAQgK,MAAOyxB,EAAQzxB,KAAK4L,OAGlD,GAFIpT,GAAO,GACP+a,GAAY9a,OAAOD,EAAK,GACxBwH,KAAK0mB,MAAO,CACZ,IACI1mB,KAAK0mB,MAAM4L,QAEf,MAAOz7B,IACPmJ,KAAK0mB,MAAQ,KAEjB1mB,KAAK2V,SAASC,UAAW,EACzB6b,EAAM9K,YAAc,IAAIhgB,EAAWlB,eAC/BgsB,EAAM/b,eACN+b,EAAMgF,WAAWhF,EAAM9K,aAC3B8K,EAAM5b,eAAiB,IAAI1K,GAAU,SAAUvR,GAC3C63B,EAAMG,eAAiBh4B,IAE3B63B,EAAMC,cAAgB,IAAIvmB,GAAU,SAAU6H,EAAGnZ,GAC7C43B,EAAMgF,WAAa58B,KAG3BsmB,EAAM3rB,UAAUglB,OAAS,WACrB,IAAI7M,EAAQ3M,KACRi4B,EAAel4B,UAAU5H,OAAS,EAClCs5B,EAAQzxB,KAAK4L,OACjB,OAAO,IAAIT,GAAU,SAAUvR,EAASC,GACpC,IAAIq+B,EAAW,WACXvrB,EAAM2lB,QACN,IAAIrJ,EAAMtc,EAAMyK,MAAMC,UAAUmb,eAAe7lB,EAAMrW,MACrD2yB,EAAIhhB,UAAYsG,GAAK,WACjBmiB,GAAmByH,OAAOxrB,EAAMrW,MAChCsD,MAEJqvB,EAAI/gB,QAAU2d,GAAmBhsB,GACjCovB,EAAIiJ,UAAYvlB,EAAMwlB,gBAE1B,GAAI8F,EACA,MAAM,IAAItxB,EAAW0S,gBAAgB,wCACrCoY,EAAM/b,cACN+b,EAAM5b,eAAe7e,KAAKkhC,GAG1BA,OAIZ/X,EAAM3rB,UAAU4jC,UAAY,WACxB,OAAOp4B,KAAK0mB,OAEhBvG,EAAM3rB,UAAU6jC,OAAS,WACrB,OAAsB,OAAfr4B,KAAK0mB,OAEhBvG,EAAM3rB,UAAU8jC,cAAgB,WAC5B,IAAI3R,EAAc3mB,KAAK4L,OAAO+a,YAC9B,OAAOA,GAAqC,mBAArBA,EAAYrwB,MAEvC6pB,EAAM3rB,UAAU+jC,UAAY,WACxB,OAAmC,OAA5Bv4B,KAAK4L,OAAO+a,aAEvBxG,EAAM3rB,UAAUgkC,kBAAoB,WAChC,OAAOx4B,KAAK4L,OAAOmmB,YAEvBx9B,OAAOqC,eAAeupB,EAAM3rB,UAAW,SAAU,CAC7CiC,IAAK,WACD,IAAIkW,EAAQ3M,KACZ,OAAOrC,EAAKqC,KAAKoxB,YAAYp1B,IAAI,SAAU1F,GAAQ,OAAOqW,EAAMykB,WAAW96B,MAE/EE,YAAY,EACZD,cAAc,IAElB4pB,EAAM3rB,UAAUsyB,YAAc,WAC1B,IAAIrlB,EAAOmyB,GAAuBh7B,MAAMoH,KAAMD,WAC9C,OAAOC,KAAKy4B,aAAa7/B,MAAMoH,KAAMyB,IAEzC0e,EAAM3rB,UAAUikC,aAAe,SAAUnhC,EAAMqyB,EAAQmK,GACnD,IAAInnB,EAAQ3M,KACRg0B,EAAoBhpB,GAAI0J,MACvBsf,GAAqBA,EAAkB/e,KAAOjV,OAA+B,IAAvB1I,EAAKtB,QAAQ,OACpEg+B,EAAoB,MACxB,IAEI0E,EAAStjB,EAFTujB,GAA0C,IAAvBrhC,EAAKtB,QAAQ,KACpCsB,EAAOA,EAAK05B,QAAQ,IAAK,IAAIA,QAAQ,IAAK,IAE1C,IAOI,GANA5b,EAAauU,EAAO3tB,IAAI,SAAUwhB,GAC9B,IAAIsS,EAAYtS,aAAiB7Q,EAAM4H,MAAQiJ,EAAMlnB,KAAOknB,EAC5D,GAAyB,iBAAdsS,EACP,MAAM,IAAI5oB,UAAU,mFACxB,OAAO4oB,IAEC,KAARx4B,GAtzFD,aAszFgBA,EACfohC,EAvzFD,eAwzFE,IAAY,MAARphC,GAvzFL,aAuzFqBA,EAGrB,MAAM,IAAIqP,EAAW0S,gBAAgB,6BAA+B/hB,GAFpEohC,EAxzFA,YA2zFJ,GAAI1E,EAAmB,CACnB,GA7zFD,aA6zFKA,EAAkB18B,MA5zFtB,cA4zF2CohC,EAAuB,CAC9D,IAAIC,EAIA,MAAM,IAAIhyB,EAAWiyB,eAAe,0FAHpC5E,EAAoB,KAKxBA,GACA5e,EAAWxX,QAAQ,SAAUkyB,GACzB,GAAIkE,IAA0E,IAArDA,EAAkB5e,WAAWpf,QAAQ85B,GAAmB,CAC7E,IAAI6I,EAIA,MAAM,IAAIhyB,EAAWiyB,eAAe,SAAW9I,EAC3C,wCAJJkE,EAAoB,QAQhC2E,GAAoB3E,IAAsBA,EAAkBl+B,SAC5Dk+B,EAAoB,OAIhC,MAAOn9B,GACH,OAAOm9B,EACHA,EAAkB5mB,SAAS,KAAM,SAAU4F,EAAGnZ,GAAUA,EAAOhD,KAC/D4a,GAAU5a,GAElB,IAAIgiC,EAAmB9E,GAAsBv0B,KAAK,KAAMQ,KAAM04B,EAAStjB,EAAY4e,EAAmBF,GACtG,OAAQE,EACJA,EAAkB5mB,SAASsrB,EAASG,EAAkB,QACtD7tB,GAAI0J,MACAzE,GAAOjF,GAAIkK,UAAW,WAAc,OAAOvI,EAAMmrB,WAAWe,KAC5D74B,KAAK83B,WAAWe,IAE5B1Y,EAAM3rB,UAAUgpB,MAAQ,SAAU5I,GAC9B,IAAKhU,EAAOZ,KAAKoxB,WAAYxc,GACzB,MAAM,IAAIjO,EAAWmyB,aAAa,SAAWlkB,EAAY,mBAE7D,OAAO5U,KAAKoxB,WAAWxc,IAEpBuL,EA9Re,GAiStB4Y,GAAU5Y,GACdrf,EAAMi4B,GAASl5B,EAAS,GAAIyH,EAAoB,CAC5CkS,OAAQ,SAAUwf,GAEd,OADS,IAAID,GAAQC,GACXxf,UAEdyf,OAAQ,SAAU3iC,GACd,OAAO,IAAIyiC,GAAQziC,EAAM,CAAEkgC,OAAQ,KAAMv8B,OAAOjD,KAAK,SAAUie,GAE3D,OADAA,EAAGqd,SACI,IACR3jB,MAAM,sBAAuB,WAAc,OAAO,KAEzDuqB,iBAAkB,SAAUz9B,GACxB,OAAOi1B,GACHA,GAAmBwI,mBAAmBliC,KAAKyE,GAC3C0P,GAAUvR,QAAQ,KAE1Bgf,YAAa,WAIT,OAHA,SAAeC,GACXvY,EAAON,KAAM6Y,KAIrBsgB,kBAAmB,SAAUrF,GACzB,OAAO9oB,GAAI0J,MACPzE,GAAOjF,GAAIkK,UAAW4e,GACtBA,KAERvC,IAAKA,GAAK6H,MAAO,SAAUC,GACvB,OAAO,WACH,IACI,IAAIh3B,EAAKgxB,GAAcgG,EAAYzgC,MAAMoH,KAAMD,YAC/C,OAAKsC,GAAyB,mBAAZA,EAAGrL,KAEdqL,EADI8I,GAAUvR,QAAQyI,GAGjC,MAAOxL,GACH,OAAO4a,GAAU5a,MAG1ByiC,MAAO,SAAUD,EAAa53B,EAAMgH,GACnC,IACI,IAAIpG,EAAKgxB,GAAcgG,EAAYzgC,MAAM6P,EAAMhH,GAAQ,KACvD,OAAKY,GAAyB,mBAAZA,EAAGrL,KAEdqL,EADI8I,GAAUvR,QAAQyI,GAGjC,MAAOxL,GACH,OAAO4a,GAAU5a,KAGzB0iC,mBAAoB,CAChB9iC,IAAK,WAAc,OAAOuU,GAAI0J,OAAS,OACxC8S,QAAS,SAAUgS,EAAmBC,GACrC,IAAI7+B,EAAUuQ,GAAUvR,QAAqC,mBAAtB4/B,EACnCT,GAAQI,kBAAkBK,GAC1BA,GACCt/B,QAAQu/B,GAAmB,KAChC,OAAOzuB,GAAI0J,MACP1J,GAAI0J,MAAM8S,QAAQ5sB,GAClBA,GAERjB,QAASwR,GACT5G,MAAO,CACH9N,IAAK,WAAc,OAAO8N,GAC1B7N,IAAK,SAAUC,GACXgO,EAAShO,EAAiB,UAAVA,EAAoB,WAAc,OAAO,GAAUkd,MAG3E1S,OAAQA,EAAQb,OAAQA,EAAQQ,MAAOA,EAAOc,SAAUA,EACxDuY,OAAQA,GACRhY,aAAcA,EAAcO,aAAcA,EAAcg3B,aA58H5D,SAAsBn5B,EAAK6B,GACA,iBAAZA,EACPM,EAAanC,EAAK6B,OAASnK,GACtB,WAAYmK,GACjB,GAAGpG,IAAItH,KAAK0N,EAAS,SAAU4U,GAC3BtU,EAAanC,EAAKyW,OAAI/e,MAu8HsD+K,aAAcA,EAAcM,UAAWA,EAAWG,cAAeA,EAAezB,KAAMA,EAC1K23B,QA37FS,IA47FTnD,OAAQ,GACRjjB,YAAaA,GACb/M,SAAUA,EACV+vB,aAAc,WACV,IACI,MAAO,CACHlf,UAAWlX,EAAQkX,WAAalX,EAAQy5B,cAAgBz5B,EAAQ05B,iBAAmB15B,EAAQ25B,YAC3FtN,YAAarsB,EAAQqsB,aAAersB,EAAQ45B,mBAGpD,MAAOljC,GACH,MAAO,CAAEwgB,UAAW,KAAMmV,YAAa,OARjC,GAWdwN,OA58FgB,gBA48FOzM,QA58FP,gBA48F8BpqB,MAAM,KAC/CnH,IAAI,SAAUyD,GAAK,OAAOsD,SAAStD,KACnCgH,OAAO,SAAUzM,EAAGU,EAAGxC,GAAK,OAAO8B,EAAKU,EAAImjB,KAAK8U,IAAI,GAAQ,EAAJz6B,KAC9D+hC,QAASlB,GACT5Y,MAAO4Y,MACXA,GAAQmB,OAASxU,GAAUqT,GAAQxC,aAAa/J,aA1wBhD,SAAgCnV,GAC5B,IACIqZ,GA1BR,SAA4BrZ,GACxB,IACI8iB,EADAC,EAAyB/iB,IAAcA,EAAU6hB,kBAAoB7hB,EAAUgjB,wBAEnF,IAAKD,EAAwB,CACzB,IAAInlB,EAAK,IAAIkL,GAAMrM,GAAY,CAAE0iB,OAAQ,KACzCvhB,EAAGsY,QAAQ,GAAGsD,OAAO,CAAEyJ,QAAS,SAChCH,EAAellB,EAAGuI,MAAM,WAE5B,MAAO,CACH0b,iBAAkB,WACd,OAAOkB,EAAyB,IAAIjvB,GAAU,SAAUvR,EAASC,GAC7D,IAAIovB,EAAMmR,EAAuB1lC,KAAK2iB,GACtC4R,EAAIhhB,UAAY,SAAUsK,GAAS,OAAO3Y,EAAQqE,EAAMsU,EAAMwT,OAAOzqB,OAAQ,KAC7E2tB,EAAI/gB,QAAU2d,GAAmBhsB,KAChCsgC,EAAatiB,eAAe0H,eAErCzG,IAAK,SAAUxiB,GACX,OAAQ8jC,GAA0B9jC,IAASwd,IAAcqmB,EAAa5gB,IAAI,CAAEjjB,KAAMA,IAAQqY,MAAMpH,IAEpG4wB,OAAQ,SAAU7hC,GACd,OAAQ8jC,GAA0B9jC,IAASwd,IAAcqmB,EAAa3gB,OAAOljB,GAAMqY,MAAMpH,KAMxEgzB,CAAmBljB,GAE5C,MAAOxgB,KAwwBX2jC,CAAuBra,GAAMoW,aAAalf,WAC1ClM,GAAUb,gBAhvHV,SAAkBmwB,EAAUt1B,GACxB,IAAKs1B,GAAYA,aAAoB70B,GAAc60B,aAAoBvzB,WAAauzB,aAAoBzzB,cAAgByzB,EAASnkC,OAAS+Q,EAAaozB,EAASnkC,MAC5J,OAAOmkC,EACX,IAAIp4B,EAAK,IAAIgF,EAAaozB,EAASnkC,MAAM6O,GAAWs1B,EAASt1B,QAASs1B,GAMtE,MALI,UAAWA,GACXz5B,EAAQqB,EAAI,QAAS,CAAE5L,IAAK,WACpB,OAAOuJ,KAAK8G,MAAMhC,SAGvBzC,GAwuHXsC,EAASJ,EAAOsP,IAED,ICppIP6mB,GCeGC,GAAoB,SAAUC,GACrC,OAAO,IAAIjhC,QAAQ,SAAUC,EAASC,GAClC,IAAIghC,EAAS,IAAIC,WACjBD,EAAOE,iBAAiB,UAAW,WAC/B,OAAOnhC,EAAQ,CAACihC,EAAOv/B,OAAQs/B,EAAKx+B,SAExCy+B,EAAOE,iBAAiB,QAASlhC,GACjCghC,EAAOG,kBAAkBJ,MDvB7BK,IACIP,GAAgB,SAAU57B,EAAGpC,GAI7B,OAHAg+B,GAAgBnmC,OAAO2mC,gBAClB,CAAEC,UAAW,cAAgBj7B,OAAS,SAAUpB,EAAGpC,GAAKoC,EAAEq8B,UAAYz+B,IACvE,SAAUoC,EAAGpC,GAAK,IAAK,IAAI1C,KAAK0C,EAAOA,EAAEjI,eAAeuF,KAAI8E,EAAE9E,GAAK0C,EAAE1C,MACpD8E,EAAGpC,IAErB,SAAUoC,EAAGpC,GAEhB,SAAS0+B,IAAOp7B,KAAKwD,YAAc1E,EADnC47B,GAAc57B,EAAGpC,GAEjBoC,EAAEtK,UAAkB,OAANkI,EAAanI,OAAO+K,OAAO5C,IAAM0+B,EAAG5mC,UAAYkI,EAAElI,UAAW,IAAI4mC,KAGnFC,GAAwC,SAAUC,EAASC,EAAYxyB,EAAGyyB,GAE1E,OAAO,IAAKzyB,IAAMA,EAAIpP,UAAU,SAAUC,EAASC,GAC/C,SAAS4hC,EAAU9kC,GAAS,IAAM68B,EAAKgI,EAAUn3B,KAAK1N,IAAW,MAAOE,GAAKgD,EAAOhD,IACpF,SAAS6kC,EAAS/kC,GAAS,IAAM68B,EAAKgI,EAAiB,MAAE7kC,IAAW,MAAOE,GAAKgD,EAAOhD,IACvF,SAAS28B,EAAKl4B,GAJlB,IAAe3E,EAIa2E,EAAOgJ,KAAO1K,EAAQ0B,EAAO3E,QAJ1CA,EAIyD2E,EAAO3E,MAJhDA,aAAiBoS,EAAIpS,EAAQ,IAAIoS,EAAE,SAAUnP,GAAWA,EAAQjD,MAITK,KAAKykC,EAAWC,GAClGlI,GAAMgI,EAAYA,EAAU5iC,MAAM0iC,EAASC,GAAc,KAAKl3B,WAGlEs3B,GAA4C,SAAUL,EAASM,GAC/D,IAAsGC,EAAGC,EAAGzkC,EAAG0kC,EAA3G/oB,EAAI,CAAEgpB,MAAO,EAAGC,KAAM,WAAa,GAAW,EAAP5kC,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAO6kC,KAAM,GAAIC,IAAK,IAChG,OAAOJ,EAAI,CAAE13B,KAAM+3B,EAAK,GAAI,MAASA,EAAK,GAAI,OAAUA,EAAK,IAAwB,mBAAXl9B,SAA0B68B,EAAE78B,OAAO4E,UAAY,WAAa,OAAO9D,OAAU+7B,EACvJ,SAASK,EAAK38B,GAAK,OAAO,SAAUyG,GAAK,OACzC,SAAcm2B,GACV,GAAIR,EAAG,MAAM,IAAI30B,UAAU,mCAC3B,KAAO8L,GAAG,IACN,GAAI6oB,EAAI,EAAGC,IAAMzkC,EAAY,EAARglC,EAAG,GAASP,EAAU,OAAIO,EAAG,GAAKP,EAAS,SAAOzkC,EAAIykC,EAAU,SAAMzkC,EAAE3C,KAAKonC,GAAI,GAAKA,EAAEz3B,SAAWhN,EAAIA,EAAE3C,KAAKonC,EAAGO,EAAG,KAAK/3B,KAAM,OAAOjN,EAE3J,OADIykC,EAAI,EAAGzkC,IAAGglC,EAAK,CAAS,EAARA,EAAG,GAAQhlC,EAAEV,QACzB0lC,EAAG,IACP,KAAK,EAAG,KAAK,EAAGhlC,EAAIglC,EAAI,MACxB,KAAK,EAAc,OAAXrpB,EAAEgpB,QAAgB,CAAErlC,MAAO0lC,EAAG,GAAI/3B,MAAM,GAChD,KAAK,EAAG0O,EAAEgpB,QAASF,EAAIO,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAKrpB,EAAEmpB,IAAIhgC,MAAO6W,EAAEkpB,KAAK//B,MAAO,SACxC,QACI,KAAkB9E,GAAZA,EAAI2b,EAAEkpB,MAAY/jC,OAAS,GAAKd,EAAEA,EAAEc,OAAS,MAAkB,IAAVkkC,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAErpB,EAAI,EAAG,SACjG,GAAc,IAAVqpB,EAAG,MAAchlC,GAAMglC,EAAG,GAAKhlC,EAAE,IAAMglC,EAAG,GAAKhlC,EAAE,IAAM,CAAE2b,EAAEgpB,MAAQK,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAYrpB,EAAEgpB,MAAQ3kC,EAAE,GAAI,CAAE2b,EAAEgpB,MAAQ3kC,EAAE,GAAIA,EAAIglC,EAAI,MAC7D,GAAIhlC,GAAK2b,EAAEgpB,MAAQ3kC,EAAE,GAAI,CAAE2b,EAAEgpB,MAAQ3kC,EAAE,GAAI2b,EAAEmpB,IAAIlmC,KAAKomC,GAAK,MACvDhlC,EAAE,IAAI2b,EAAEmpB,IAAIhgC,MAChB6W,EAAEkpB,KAAK//B,MAAO,SAEtBkgC,EAAKT,EAAKlnC,KAAK4mC,EAAStoB,GAC1B,MAAOnc,GAAKwlC,EAAK,CAAC,EAAGxlC,GAAIilC,EAAI,EAAK,QAAUD,EAAIxkC,EAAI,EACtD,GAAY,EAARglC,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAE1lC,MAAO0lC,EAAG,GAAKA,EAAG,QAAK,EAAQ/3B,MAAM,GArB9BkvB,CAAK,CAAC/zB,EAAGyG,OA8BzD,GAAiC,SAAUo2B,GAE3C,SAASC,EAAgBzK,GACrB,IAAInlB,EAAQ2vB,EAAO5nC,KAAKsL,KAAM8xB,IAAW9xB,KAkEzC,OA/DA2M,EAAM5Q,MAAQ,GAId4Q,EAAM6vB,OAAS,SAAUC,GACrB,OAAO9vB,EAAMma,YAAY,KAAMna,EAAM+vB,UAAW,WAC5C,OAAO/iC,QAAQ+V,IAAI+sB,EAAMzgC,IAAI,SAAUW,GACnC,OAAOA,EAAKggC,SACP/B,OACA5jC,KAAK2jC,IACL3jC,KAAK,SAAUugB,GAChB,IASYqlB,EATRC,EAAStlB,EAAG,GAAInb,EAAOmb,EAAG,GAC9B,MAAO,CACHulB,IAAKngC,EAAKmgC,IACVC,aAAcF,EACdG,aAAc5gC,EACd6gC,eAAgBtgC,EAAKggC,SAAS7jC,OAC9BokC,mBAAoBvgC,EAAKggC,SAASQ,WAClCC,iBAEQR,EAAU,GACdjgC,EAAKggC,SAASC,QAAQh/B,QAAQ,SAAU2B,EAAK5I,GAAS,OAAQimC,EAAQr9B,GAAO5I,IACtEimC,SAInB5lC,KAAK,SAAUqmC,GACf,OAAO1wB,EAAM+vB,UAAUziB,QAAQojB,QAK3C1wB,EAAMhP,KAAO,WAAc,OAAO09B,GAAU1uB,OAAO,OAAQ,EAAQ,WAAc,OAAOgvB,GAAY37B,KAAM,SAAUuX,GAChH,OAAQA,EAAGykB,OACP,KAAK,EAAG,MAAO,CAAC,EAAah8B,KAAK08B,UAAU7kB,eAAela,QAC3D,KAAK,EAAG,MAAO,CAAC,EAAe4Z,EAAG0kB,OAAQjgC,IAAI,SAAUuD,GAAO,OAAOA,EAAI0G,oBAIlF0G,EAAM2wB,MAAQ,WAAc,OAAO3wB,EAAM+vB,UAAUjjB,SAEnD9M,EAAM4wB,MAAQ5wB,EAAM6wB,OAEpB7wB,EAAM8wB,QAAU,WACZ,OAAO,IAAI9jC,QAAQ,SAAUC,EAASC,GAClC,IAAI6jC,EAAe,WACf,OAAO,IAAI/jC,QAAQ,SAAUqO,EAAK21B,GACP,IAAvBhxB,EAAM5Q,MAAM5D,OACN6P,EAAI,MACJ2E,EAAMixB,QAAQhlC,MAAM+T,EAAOA,EAAM5Q,MAAM0qB,SAASzvB,KAAK0mC,GAClD1mC,KAAKgR,GACL2G,MAAMgvB,MAGvBD,IACK1mC,KAAK4C,GACL+U,MAAM9U,MAGnB8S,EAAM4gB,QAAQ,GAAGsD,OAAO,CACpB6L,UAAW,QAEf/vB,EAAM+vB,UAAY/vB,EAAM6Q,MAAM,aACvB7Q,EAwGX,OA5KAsuB,GAAUsB,EAAiBD,GAuE3BC,EAAgB/nC,UAAU+kB,IAAM,SAAUujB,EAAKH,GAC3C38B,KAAKjE,MAAM9F,KAAK,CAAC6mC,EAAKH,IACtB38B,KAAKu9B,SAIThB,EAAgB/nC,UAAUiC,IAAM,SAAUkG,GACtC,OAAO0+B,GAAUr7B,UAAM,OAAQ,EAAQ,WACnC,IAAI28B,EACJ,OAAOhB,GAAY37B,KAAM,SAAUuX,GAC/B,OAAQA,EAAGykB,OACP,KAAK,EAAG,MAAO,CAAC,EAAah8B,KAAK08B,UAAUjmC,IAAI,CAAEqmC,IAAKngC,KACvD,KAAK,EAED,MAAO,CAAC,GADRggC,EAAWplB,EAAG0kB,QAEJ,IAAI4B,UCvIGhB,EDuIwBF,EAASI,aCvIzB3gC,EDuIuCugC,EAASK,aCtItF,IAAIc,KAAK,CAACjB,GAAS,CAAEzgC,KAAMA,KDsI0E,CAC5EtD,OAAQ6jC,EAASM,eACjBE,WAAYR,EAASO,mBACrBN,QAAS,IAAImB,QAAQpB,EAASS,wBAEhCnlC,GC5IH,IAAU4kC,EAAQzgC,ODkJ7CmgC,EAAgB/nC,UAAUopC,QAAU,SAAUd,EAAKH,GAC/C,OAAOtB,GAAUr7B,UAAM,OAAQ,EAAQ,WACnC,IAASuX,EAAIslB,EAAQzgC,EAAM4hC,EAAIpB,EAC/B,OAAOjB,GAAY37B,KAAM,SAAUi+B,GAC/B,OAAQA,EAAGjC,OACP,KAAK,EAAG,MAAO,CAAC,EAAah8B,KAAK08B,UAAUjmC,IAAIqmC,IAChD,KAAK,EAED,OADMmB,EAAGhC,OAEE,CAAC,EAActiC,QAAQC,QAAQ,MAE1CokC,EAAKrD,GACE,CAAC,EAAagC,EAAS/B,SAClC,KAAK,EAAG,MAAO,CAAC,EAAaoD,EAAGplC,WAAM,EAAQ,CAACqlC,EAAGhC,UAClD,KAAK,EACD1kB,EAAK0mB,EAAGhC,OAAQY,EAAStlB,EAAG,GAAInb,EAAOmb,EAAG,GAC1CqlB,EAAU,GACVD,EAASC,QAAQh/B,QAAQ,SAAUjH,EAAO4I,GAAO,OAAQq9B,EAAQr9B,GAAO5I,IACxE,IACI,MAAO,CAAC,EAAcqJ,KAAK08B,UAAU5jB,IAAI,CACjCgkB,IAAKA,EACLC,aAAcF,EACdG,aAAc5gC,EACd6gC,eAAgBN,EAAS7jC,OACzBokC,mBAAoBP,EAASQ,WAC7BC,gBAAiBR,KAG7B,MAAO/lC,GAEH,MAAO,CAAC,EAAc,IAE1B,MAAO,CAAC,SAQ5B0lC,EAAgB/nC,UAAU0pC,OAAS,SAAUpB,EAAKH,GAC9C,OAAOtB,GAAUr7B,UAAM,OAAQ,EAAQ,WACnC,IAAIuX,EAAIslB,EAAQzgC,EAAM4hC,EAAIpB,EAC1B,OAAOjB,GAAY37B,KAAM,SAAUi+B,GAC/B,OAAQA,EAAGjC,OACP,KAAK,EAED,OADAgC,EAAKrD,GACE,CAAC,EAAagC,EAAS/B,QAClC,KAAK,EAAG,MAAO,CAAC,EAAaoD,EAAGplC,WAAM,EAAQ,CAACqlC,EAAGhC,UAClD,KAAK,EAID,OAHA1kB,EAAK0mB,EAAGhC,OAAQY,EAAStlB,EAAG,GAAInb,EAAOmb,EAAG,GAC1CqlB,EAAU,GACVD,EAASC,QAAQh/B,QAAQ,SAAUjH,EAAO4I,GAAO,OAAQq9B,EAAQr9B,GAAO5I,IACjE,CAAC,EAAcqJ,KAAK08B,UAAUnjB,IAAI,CACjCujB,IAAKA,EACLC,aAAcF,EACdG,aAAc5gC,EACd6gC,eAAgBN,EAAS7jC,OACzBokC,mBAAoBP,EAASQ,WAC7BC,gBAAiBR,WAS7CL,EAAgB/nC,UAAUgpC,OAAS,WAC/B,IAAI7wB,EAAQ3M,KACZA,KAAKu9B,MAAQ,aACbv9B,KAAKy9B,UACAzmC,KAAK,WAAc,OAAQ2V,EAAM4wB,MAAQ,WAAc,OAAO5wB,EAAM6wB,YACpE7uB,MAAMxY,QAAQgoC,MAEhB5B,EA7KyB,CD8lIrB,I,QGrpIf,6FAAI,GAAwC,SAAUjB,EAASC,EAAYxyB,EAAGyyB,GAE1E,OAAO,IAAKzyB,IAAMA,EAAIpP,UAAU,SAAUC,EAASC,GAC/C,SAAS4hC,EAAU9kC,GAAS,IAAM68B,EAAKgI,EAAUn3B,KAAK1N,IAAW,MAAOE,GAAKgD,EAAOhD,IACpF,SAAS6kC,EAAS/kC,GAAS,IAAM68B,EAAKgI,EAAiB,MAAE7kC,IAAW,MAAOE,GAAKgD,EAAOhD,IACvF,SAAS28B,EAAKl4B,GAJlB,IAAe3E,EAIa2E,EAAOgJ,KAAO1K,EAAQ0B,EAAO3E,QAJ1CA,EAIyD2E,EAAO3E,MAJhDA,aAAiBoS,EAAIpS,EAAQ,IAAIoS,EAAE,SAAUnP,GAAWA,EAAQjD,MAITK,KAAKykC,EAAWC,GAClGlI,GAAMgI,EAAYA,EAAU5iC,MAAM0iC,EAASC,GAAc,KAAKl3B,WAGlE,GAA4C,SAAUi3B,EAASM,GAC/D,IAAsGC,EAAGC,EAAGzkC,EAAG0kC,EAA3G/oB,EAAI,CAAEgpB,MAAO,EAAGC,KAAM,WAAa,GAAW,EAAP5kC,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAO6kC,KAAM,GAAIC,IAAK,IAChG,OAAOJ,EAAI,CAAE13B,KAAM+3B,EAAK,GAAI,MAASA,EAAK,GAAI,OAAUA,EAAK,IAAwB,mBAAXl9B,SAA0B68B,EAAE78B,OAAO4E,UAAY,WAAa,OAAO9D,OAAU+7B,EACvJ,SAASK,EAAK38B,GAAK,OAAO,SAAUyG,GAAK,OACzC,SAAcm2B,GACV,GAAIR,EAAG,MAAM,IAAI30B,UAAU,mCAC3B,KAAO8L,GAAG,IACN,GAAI6oB,EAAI,EAAGC,IAAMzkC,EAAY,EAARglC,EAAG,GAASP,EAAU,OAAIO,EAAG,GAAKP,EAAS,SAAOzkC,EAAIykC,EAAU,SAAMzkC,EAAE3C,KAAKonC,GAAI,GAAKA,EAAEz3B,SAAWhN,EAAIA,EAAE3C,KAAKonC,EAAGO,EAAG,KAAK/3B,KAAM,OAAOjN,EAE3J,OADIykC,EAAI,EAAGzkC,IAAGglC,EAAK,CAAS,EAARA,EAAG,GAAQhlC,EAAEV,QACzB0lC,EAAG,IACP,KAAK,EAAG,KAAK,EAAGhlC,EAAIglC,EAAI,MACxB,KAAK,EAAc,OAAXrpB,EAAEgpB,QAAgB,CAAErlC,MAAO0lC,EAAG,GAAI/3B,MAAM,GAChD,KAAK,EAAG0O,EAAEgpB,QAASF,EAAIO,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAKrpB,EAAEmpB,IAAIhgC,MAAO6W,EAAEkpB,KAAK//B,MAAO,SACxC,QACI,KAAkB9E,GAAZA,EAAI2b,EAAEkpB,MAAY/jC,OAAS,GAAKd,EAAEA,EAAEc,OAAS,MAAkB,IAAVkkC,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAErpB,EAAI,EAAG,SACjG,GAAc,IAAVqpB,EAAG,MAAchlC,GAAMglC,EAAG,GAAKhlC,EAAE,IAAMglC,EAAG,GAAKhlC,EAAE,IAAM,CAAE2b,EAAEgpB,MAAQK,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAYrpB,EAAEgpB,MAAQ3kC,EAAE,GAAI,CAAE2b,EAAEgpB,MAAQ3kC,EAAE,GAAIA,EAAIglC,EAAI,MAC7D,GAAIhlC,GAAK2b,EAAEgpB,MAAQ3kC,EAAE,GAAI,CAAE2b,EAAEgpB,MAAQ3kC,EAAE,GAAI2b,EAAEmpB,IAAIlmC,KAAKomC,GAAK,MACvDhlC,EAAE,IAAI2b,EAAEmpB,IAAIhgC,MAChB6W,EAAEkpB,KAAK//B,MAAO,SAEtBkgC,EAAKT,EAAKlnC,KAAK4mC,EAAStoB,GAC1B,MAAOnc,GAAKwlC,EAAK,CAAC,EAAGxlC,GAAIilC,EAAI,EAAK,QAAUD,EAAIxkC,EAAI,EACtD,GAAY,EAARglC,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAE1lC,MAAO0lC,EAAG,GAAKA,EAAG,QAAK,EAAQ/3B,MAAM,GArB9BkvB,CAAK,CAAC/zB,EAAGyG,OA0B7Dk4B,cAAc,mBACd,IAGIC,GACAC,GAJAC,GAAW,GACXtpB,GAAK,IAAI,GAAgB,KAAMupB,MAC/BC,GAAgB,GAUhBC,GAAgCC,YAAY,WAC5C1qC,KAAK2qC,QAAQC,WAAW7nC,KAAK,SAAU0D,GAClB,IAAbA,EAAEvC,SACFomC,GAAStoC,KAAK,CAAEmG,KAAM,UACtB0iC,SAGT,KAMH7qC,KAAK8mC,iBAAiB,UAAW,SAAUxoB,GACvCA,EAAMwsB,UAAU9pB,GAAGqoB,WAEvBrpC,KAAK8mC,iBAAiB,WAAY,WAC9B9mC,KAAK2qC,QAAQI,UAEjB/qC,KAAK8mC,iBAAiB,QAAS,SAAUxoB,GACrC0sB,GAAa1sB,KASjB,IAAI0sB,GAAe,SAAU1sB,GACzB,OAAQA,EAAM3c,QAAQknC,KAClB,KAAK,KAAMoC,WAAa,IAAM,KAAMC,WAChCC,GAAW7sB,GACX,MACJ,KAAK,KAAM2sB,WAAa,IAAM,KAAMG,UAChCC,GAAW/sB,GACX,MASJ,KAAK,KAAM2sB,WAAa,IAAM,KAAMK,SAChCC,GAAoBjtB,GACpB,MAKJ,KAAK,KAAM2sB,WAAa,IAAM,KAAMO,YAChCC,GAAOntB,GACP,MACJ,QACIotB,GAAUptB,GAGlBusB,MAEAA,GAAc,WAwBd,IAvBA,IAAIc,EAAU,WACV,IAAI9tB,EAAM+tB,GAAetB,GAAS9X,SAClC,OAAQ3U,EAAI1V,MACR,IAAK,QACDnI,KAAK2qC,QAAQI,QAAQrwB,MAAM,WAEnB+vB,IACAoB,cAAcpB,MAGtB,MACJ,IAAK,oBACD,IAAIqB,EAAQjuB,EAAI3Y,KAEhB+I,WAAW,WACP,IAAItM,EAAU,IAAIoqC,QAAQD,GAC1BE,MAAMrqC,GAASoB,KAAK,SAAU2lC,GAAY,OAAOuD,GAAUtqC,EAAS+mC,SAO7E4B,GAASpmC,OAAS,GACrBynC,KAOJR,GAAa,SAAU7sB,GACvBA,EAAM4tB,YAAYlrB,GAAGtX,OAAO3G,KAAK,SAAU2G,GAEvC,OAAO,IAAIkgC,SAAStjC,KAAK0c,UAAUtZ,EAAK3B,IAAI,SAAUuD,GAAO,OAAO6gC,UAAU7gC,MAAW,CACrFzG,OAAQ,IACRqkC,WAAY,WAQpBmC,GAAa,SAAU/sB,GACvBA,EAAMwsB,UAAU9pB,GAAGqoB,SACnB/qB,EAAM4tB,YAAYxmC,QAAQC,QAAQ,IAAIikC,SAAS,IAAIC,KAAK,IAAK,CAAEhlC,OAAQ,IAAKqkC,WAAY,UAMxFwC,GAAY,SAAUptB,GAEtB,GAAI8rB,IAAoBA,GAAiB55B,KAAK8N,EAAM3c,QAAQknC,KACxDvqB,EAAM4tB,YAAYF,MAAM1tB,EAAM3c,cADlC,CAIA,IAAIyqC,EAAkB,IAAI1mC,QAAQ,SAAUC,EAASC,GACjD,IAAIymC,EAAyB,WACzB,OAAOrrB,GAAGxe,IAAI8b,EAAM3c,QAAQknC,KAAK9lC,KAAK,SAAUsE,GACxCA,EAGA1B,EAAQ0B,GAIR2kC,MAA6B,aAAvB1tB,EAAM3c,QAAQ0B,KACdib,EAAM3c,QACN,IAAIoqC,QAAQztB,EAAM3c,QAAS,CACzB0B,KAAM,OACNipC,YAAa,OACbC,MAA+B,mBAAxBjuB,EAAM3c,QAAQ4qC,MACf,UACAjuB,EAAM3c,QAAQ4qC,SAEvBxpC,KAAK,SAAU2lC,IAEXA,GACoB,MAApBA,EAAS7jC,QAAsC,MAApB6jC,EAAS7jC,OACrCe,EAAO,yCAA2C0Y,EAAM3c,QAAQknC,KAGhEljC,EAAQ6mC,GAAcluB,EAAM3c,QAAS+mC,MAGxChuB,MAAM9U,MAKnB4kC,GAAciC,SAASnuB,EAAM3c,QAAQknC,MAAQrpB,UAAUktB,OAEvDV,MAAM1tB,EAAM3c,SACPoB,KAAK,SAAUiI,GAEhBrF,EAAQgnC,GAAeruB,EAAM3c,QAASqJ,MAErC0P,MAAM,WAEP2xB,MAKJA,MAGR/tB,EAAM4tB,YAAYE,KAQlBI,GAAgB,SAAU7qC,EAAS+mC,GACnC,IAAIhf,EAAQgf,EAAShf,QAErB,OADAuiB,GAAUtqC,EAAS+mC,GACZhf,GAePijB,GAAiB,SAAUhrC,EAAS+mC,GACpC,IAAIhf,EAAQgf,EAAShf,QAErB,OADA1I,GAAGipB,OAAOtoC,EAAQknC,IAAKH,GAChBhf,GAGPuiB,GAAY,SAAUtqC,EAAS+mC,GAE/B,OADA1nB,GAAGsE,IAAI3jB,EAAQknC,IAAKH,GACbhjC,QAAQC,QAAQ,SAqCvB4lC,GAAsB,SAAUjtB,GAChCA,EAAM4tB,YAAY3tB,GAAUD,EAAO,OAC9Bvb,KAAK,SAAU8lC,GAChB,IAAIlnC,EAAU,IAAIoqC,QAAQlD,EAAK,CAI3BxlC,KAAM,SAEV,OAAOqC,QAAQ+V,IAAI,CAACuwB,MAAMrqC,GAAU+D,QAAQC,QAAQhE,OAEnDoB,KAAK,SAAUugB,GAEhB,IAAIolB,EAAWplB,EAAG,GAAI3hB,EAAU2hB,EAAG,GACnC,OAAO+mB,GAOC4B,GAAUtqC,EAAS+mC,GA/EZ,SAAU/mC,EAAS+mC,GACtC,OAAO1nB,GAAG2oB,QAAQhoC,EAAQknC,IAAKH,GAAUhuB,MAAM,SAAU9X,GACrDV,QAAQgoC,IAAI,iCAAkCtnC,GAE9C,IACI,OAAOoe,GAAG2oB,QAAQhoC,EAAQknC,IAAKH,GAAUhuB,MAAM,SAAU9X,GAAK,OAAOA,IAEzE,MAAOA,GAEH,OADAV,QAAQgoC,IAAI,gBAAiBtnC,GACtBA,KAuELgqC,CAAiBjrC,EAAS+mC,KAE/B3lC,KAAK,WAAc,OAAO,IAAI6mC,SAAS,YAyB5C6B,GAAS,SAAUntB,GACnB,OAAOA,EAAM4tB,YAAY5tB,EAAM3c,QAAQkrC,OAAO9pC,KAAK,SAAUmC,GAjFlD,IAAU4nC,EAwFjB,OAxFiBA,EAkFR5nC,EAAK6nC,aAlFkB,QAAU,OAAQ,OAAQ,EAAQ,WAEtE,OAAO,GAAYhhC,KAAM,SAAUuX,GAC/B,OAAQA,EAAGykB,OACP,KAAK,EAAG,MAAO,CAAC,EAAariC,QAAQ+V,IAAIqxB,EAAK/kC,IAAI,SAAU8gC,GAAO,OAAO,QAAU,OAAQ,OAAQ,EAAQ,WACpG,IAAIvlB,EACJ,OAAO,GAAYvX,KAAM,SAAUg+B,GAC/B,OAAQA,EAAGhC,OACP,KAAK,EAID,OAHAzkB,EAAK,CACDulB,IAAKA,GAEF,CAAC,EAAamD,MAAMnD,IAC/B,KAAK,EAAG,MAAO,CAAC,GAAevlB,EAAGolB,SAAWqB,EAAG/B,OACxC1kB,aAIxB,KAAK,EAID,OAHQA,EAAG0kB,OAELjgC,IAAI,SAAUW,GAAQ,OAAOsY,GAAGsE,IAAI5c,EAAKmgC,IAAKngC,EAAKggC,YAClD,CAAC,QA6DhB8B,GAAcxoC,KAAK2C,MAAM6lC,GAAetlC,EAAKslC,eAE7CA,GAAgBv+B,MAAMmB,KAAK,IAAI4/B,IAAIxC,KACnCJ,GAAmB,IAAI6C,OAAO/nC,EAAKgoC,kBACnC7C,GAAUnlC,EAAKmlC,QACR,IAAIT,aASfrrB,GAAY,SAAUD,EAAOpZ,GAC7B,OAAOoZ,EAAM3c,QAAQkrC,OAAO9pC,KAAK,SAAU8pC,GAAQ,OAAOA,EAAK3nC,MAWxDioC,GAAc,SAAUzqC,GAC/B,OAAOA,GAOAkpC,GAAiB,SAAUlpC,GAClC,OAAOyqC,GAAYzqC,K,+BC3XhB,IAAI0qC,EADX,gCAEA,SAAWA,GAEPA,EAAM7C,KAAO,mBAEb6C,EAAMnC,WAAaoC,OAAS,SAK5BD,EAAM5B,YAAc,cACpB4B,EAAMlC,WAAa,gBACnBkC,EAAMhC,UAAY,cAClBgC,EAAM9B,SAAW,iBAGjB8B,EAAME,OAAS,CACXC,MAAO,IACPC,eAAgB,QAjBxB,CAmBGJ,IAAUA,EAAQ","file":"sw.js","sourcesContent":[" \tfunction hotDisposeChunk(chunkId) {\n \t\tdelete installedChunks[chunkId];\n \t}\n \tvar parentHotUpdateCallback = self[\"webpackHotUpdate\"];\n \tself[\"webpackHotUpdate\"] = // eslint-disable-next-line no-unused-vars\n \tfunction webpackHotUpdateCallback(chunkId, moreModules) {\n \t\thotAddUpdateChunk(chunkId, moreModules);\n \t\tif (parentHotUpdateCallback) parentHotUpdateCallback(chunkId, moreModules);\n \t} ;\n\n \t// eslint-disable-next-line no-unused-vars\n \tfunction hotDownloadUpdateChunk(chunkId) {\n \t\tvar script = document.createElement(\"script\");\n \t\tscript.charset = \"utf-8\";\n \t\tscript.src = __webpack_require__.p + \"\" + chunkId + \".\" + hotCurrentHash + \".hot-update.js\";\n \t\tif (null) script.crossOrigin = null;\n \t\tdocument.head.appendChild(script);\n \t}\n\n \t// eslint-disable-next-line no-unused-vars\n \tfunction hotDownloadManifest(requestTimeout) {\n \t\trequestTimeout = requestTimeout || 10000;\n \t\treturn new Promise(function(resolve, reject) {\n \t\t\tif (typeof XMLHttpRequest === \"undefined\") {\n \t\t\t\treturn reject(new Error(\"No browser support\"));\n \t\t\t}\n \t\t\ttry {\n \t\t\t\tvar request = new XMLHttpRequest();\n \t\t\t\tvar requestPath = __webpack_require__.p + \"\" + hotCurrentHash + \".hot-update.json\";\n \t\t\t\trequest.open(\"GET\", requestPath, true);\n \t\t\t\trequest.timeout = requestTimeout;\n \t\t\t\trequest.send(null);\n \t\t\t} catch (err) {\n \t\t\t\treturn reject(err);\n \t\t\t}\n \t\t\trequest.onreadystatechange = function() {\n \t\t\t\tif (request.readyState !== 4) return;\n \t\t\t\tif (request.status === 0) {\n \t\t\t\t\t// timeout\n \t\t\t\t\treject(\n \t\t\t\t\t\tnew Error(\"Manifest request to \" + requestPath + \" timed out.\")\n \t\t\t\t\t);\n \t\t\t\t} else if (request.status === 404) {\n \t\t\t\t\t// no update available\n \t\t\t\t\tresolve();\n \t\t\t\t} else if (request.status !== 200 && request.status !== 304) {\n \t\t\t\t\t// other failure\n \t\t\t\t\treject(new Error(\"Manifest request to \" + requestPath + \" failed.\"));\n \t\t\t\t} else {\n \t\t\t\t\t// success\n \t\t\t\t\ttry {\n \t\t\t\t\t\tvar update = JSON.parse(request.responseText);\n \t\t\t\t\t} catch (e) {\n \t\t\t\t\t\treject(e);\n \t\t\t\t\t\treturn;\n \t\t\t\t\t}\n \t\t\t\t\tresolve(update);\n \t\t\t\t}\n \t\t\t};\n \t\t});\n \t}\n\n \tvar hotApplyOnUpdate = true;\n \t// eslint-disable-next-line no-unused-vars\n \tvar hotCurrentHash = \"d688b7afcd058a278c15\";\n \tvar hotRequestTimeout = 10000;\n \tvar hotCurrentModuleData = {};\n \tvar hotCurrentChildModule;\n \t// eslint-disable-next-line no-unused-vars\n \tvar hotCurrentParents = [];\n \t// eslint-disable-next-line no-unused-vars\n \tvar hotCurrentParentsTemp = [];\n\n \t// eslint-disable-next-line no-unused-vars\n \tfunction hotCreateRequire(moduleId) {\n \t\tvar me = installedModules[moduleId];\n \t\tif (!me) return __webpack_require__;\n \t\tvar fn = function(request) {\n \t\t\tif (me.hot.active) {\n \t\t\t\tif (installedModules[request]) {\n \t\t\t\t\tif (installedModules[request].parents.indexOf(moduleId) === -1) {\n \t\t\t\t\t\tinstalledModules[request].parents.push(moduleId);\n \t\t\t\t\t}\n \t\t\t\t} else {\n \t\t\t\t\thotCurrentParents = [moduleId];\n \t\t\t\t\thotCurrentChildModule = request;\n \t\t\t\t}\n \t\t\t\tif (me.children.indexOf(request) === -1) {\n \t\t\t\t\tme.children.push(request);\n \t\t\t\t}\n \t\t\t} else {\n \t\t\t\tconsole.warn(\n \t\t\t\t\t\"[HMR] unexpected require(\" +\n \t\t\t\t\t\trequest +\n \t\t\t\t\t\t\") from disposed module \" +\n \t\t\t\t\t\tmoduleId\n \t\t\t\t);\n \t\t\t\thotCurrentParents = [];\n \t\t\t}\n \t\t\treturn __webpack_require__(request);\n \t\t};\n \t\tvar ObjectFactory = function ObjectFactory(name) {\n \t\t\treturn {\n \t\t\t\tconfigurable: true,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: function() {\n \t\t\t\t\treturn __webpack_require__[name];\n \t\t\t\t},\n \t\t\t\tset: function(value) {\n \t\t\t\t\t__webpack_require__[name] = value;\n \t\t\t\t}\n \t\t\t};\n \t\t};\n \t\tfor (var name in __webpack_require__) {\n \t\t\tif (\n \t\t\t\tObject.prototype.hasOwnProperty.call(__webpack_require__, name) &&\n \t\t\t\tname !== \"e\" &&\n \t\t\t\tname !== \"t\"\n \t\t\t) {\n \t\t\t\tObject.defineProperty(fn, name, ObjectFactory(name));\n \t\t\t}\n \t\t}\n \t\tfn.e = function(chunkId) {\n \t\t\tif (hotStatus === \"ready\") hotSetStatus(\"prepare\");\n \t\t\thotChunksLoading++;\n \t\t\treturn __webpack_require__.e(chunkId).then(finishChunkLoading, function(err) {\n \t\t\t\tfinishChunkLoading();\n \t\t\t\tthrow err;\n \t\t\t});\n\n \t\t\tfunction finishChunkLoading() {\n \t\t\t\thotChunksLoading--;\n \t\t\t\tif (hotStatus === \"prepare\") {\n \t\t\t\t\tif (!hotWaitingFilesMap[chunkId]) {\n \t\t\t\t\t\thotEnsureUpdateChunk(chunkId);\n \t\t\t\t\t}\n \t\t\t\t\tif (hotChunksLoading === 0 && hotWaitingFiles === 0) {\n \t\t\t\t\t\thotUpdateDownloaded();\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t};\n \t\tfn.t = function(value, mode) {\n \t\t\tif (mode & 1) value = fn(value);\n \t\t\treturn __webpack_require__.t(value, mode & ~1);\n \t\t};\n \t\treturn fn;\n \t}\n\n \t// eslint-disable-next-line no-unused-vars\n \tfunction hotCreateModule(moduleId) {\n \t\tvar hot = {\n \t\t\t// private stuff\n \t\t\t_acceptedDependencies: {},\n \t\t\t_declinedDependencies: {},\n \t\t\t_selfAccepted: false,\n \t\t\t_selfDeclined: false,\n \t\t\t_disposeHandlers: [],\n \t\t\t_main: hotCurrentChildModule !== moduleId,\n\n \t\t\t// Module API\n \t\t\tactive: true,\n \t\t\taccept: function(dep, callback) {\n \t\t\t\tif (dep === undefined) hot._selfAccepted = true;\n \t\t\t\telse if (typeof dep === \"function\") hot._selfAccepted = dep;\n \t\t\t\telse if (typeof dep === \"object\")\n \t\t\t\t\tfor (var i = 0; i < dep.length; i++)\n \t\t\t\t\t\thot._acceptedDependencies[dep[i]] = callback || function() {};\n \t\t\t\telse hot._acceptedDependencies[dep] = callback || function() {};\n \t\t\t},\n \t\t\tdecline: function(dep) {\n \t\t\t\tif (dep === undefined) hot._selfDeclined = true;\n \t\t\t\telse if (typeof dep === \"object\")\n \t\t\t\t\tfor (var i = 0; i < dep.length; i++)\n \t\t\t\t\t\thot._declinedDependencies[dep[i]] = true;\n \t\t\t\telse hot._declinedDependencies[dep] = true;\n \t\t\t},\n \t\t\tdispose: function(callback) {\n \t\t\t\thot._disposeHandlers.push(callback);\n \t\t\t},\n \t\t\taddDisposeHandler: function(callback) {\n \t\t\t\thot._disposeHandlers.push(callback);\n \t\t\t},\n \t\t\tremoveDisposeHandler: function(callback) {\n \t\t\t\tvar idx = hot._disposeHandlers.indexOf(callback);\n \t\t\t\tif (idx >= 0) hot._disposeHandlers.splice(idx, 1);\n \t\t\t},\n\n \t\t\t// Management API\n \t\t\tcheck: hotCheck,\n \t\t\tapply: hotApply,\n \t\t\tstatus: function(l) {\n \t\t\t\tif (!l) return hotStatus;\n \t\t\t\thotStatusHandlers.push(l);\n \t\t\t},\n \t\t\taddStatusHandler: function(l) {\n \t\t\t\thotStatusHandlers.push(l);\n \t\t\t},\n \t\t\tremoveStatusHandler: function(l) {\n \t\t\t\tvar idx = hotStatusHandlers.indexOf(l);\n \t\t\t\tif (idx >= 0) hotStatusHandlers.splice(idx, 1);\n \t\t\t},\n\n \t\t\t//inherit from previous dispose call\n \t\t\tdata: hotCurrentModuleData[moduleId]\n \t\t};\n \t\thotCurrentChildModule = undefined;\n \t\treturn hot;\n \t}\n\n \tvar hotStatusHandlers = [];\n \tvar hotStatus = \"idle\";\n\n \tfunction hotSetStatus(newStatus) {\n \t\thotStatus = newStatus;\n \t\tfor (var i = 0; i < hotStatusHandlers.length; i++)\n \t\t\thotStatusHandlers[i].call(null, newStatus);\n \t}\n\n \t// while downloading\n \tvar hotWaitingFiles = 0;\n \tvar hotChunksLoading = 0;\n \tvar hotWaitingFilesMap = {};\n \tvar hotRequestedFilesMap = {};\n \tvar hotAvailableFilesMap = {};\n \tvar hotDeferred;\n\n \t// The update info\n \tvar hotUpdate, hotUpdateNewHash;\n\n \tfunction toModuleId(id) {\n \t\tvar isNumber = +id + \"\" === id;\n \t\treturn isNumber ? +id : id;\n \t}\n\n \tfunction hotCheck(apply) {\n \t\tif (hotStatus !== \"idle\") {\n \t\t\tthrow new Error(\"check() is only allowed in idle status\");\n \t\t}\n \t\thotApplyOnUpdate = apply;\n \t\thotSetStatus(\"check\");\n \t\treturn hotDownloadManifest(hotRequestTimeout).then(function(update) {\n \t\t\tif (!update) {\n \t\t\t\thotSetStatus(\"idle\");\n \t\t\t\treturn null;\n \t\t\t}\n \t\t\thotRequestedFilesMap = {};\n \t\t\thotWaitingFilesMap = {};\n \t\t\thotAvailableFilesMap = update.c;\n \t\t\thotUpdateNewHash = update.h;\n\n \t\t\thotSetStatus(\"prepare\");\n \t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\thotDeferred = {\n \t\t\t\t\tresolve: resolve,\n \t\t\t\t\treject: reject\n \t\t\t\t};\n \t\t\t});\n \t\t\thotUpdate = {};\n \t\t\tvar chunkId = 1;\n \t\t\t// eslint-disable-next-line no-lone-blocks\n \t\t\t{\n \t\t\t\t/*globals chunkId */\n \t\t\t\thotEnsureUpdateChunk(chunkId);\n \t\t\t}\n \t\t\tif (\n \t\t\t\thotStatus === \"prepare\" &&\n \t\t\t\thotChunksLoading === 0 &&\n \t\t\t\thotWaitingFiles === 0\n \t\t\t) {\n \t\t\t\thotUpdateDownloaded();\n \t\t\t}\n \t\t\treturn promise;\n \t\t});\n \t}\n\n \t// eslint-disable-next-line no-unused-vars\n \tfunction hotAddUpdateChunk(chunkId, moreModules) {\n \t\tif (!hotAvailableFilesMap[chunkId] || !hotRequestedFilesMap[chunkId])\n \t\t\treturn;\n \t\thotRequestedFilesMap[chunkId] = false;\n \t\tfor (var moduleId in moreModules) {\n \t\t\tif (Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\thotUpdate[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif (--hotWaitingFiles === 0 && hotChunksLoading === 0) {\n \t\t\thotUpdateDownloaded();\n \t\t}\n \t}\n\n \tfunction hotEnsureUpdateChunk(chunkId) {\n \t\tif (!hotAvailableFilesMap[chunkId]) {\n \t\t\thotWaitingFilesMap[chunkId] = true;\n \t\t} else {\n \t\t\thotRequestedFilesMap[chunkId] = true;\n \t\t\thotWaitingFiles++;\n \t\t\thotDownloadUpdateChunk(chunkId);\n \t\t}\n \t}\n\n \tfunction hotUpdateDownloaded() {\n \t\thotSetStatus(\"ready\");\n \t\tvar deferred = hotDeferred;\n \t\thotDeferred = null;\n \t\tif (!deferred) return;\n \t\tif (hotApplyOnUpdate) {\n \t\t\t// Wrap deferred object in Promise to mark it as a well-handled Promise to\n \t\t\t// avoid triggering uncaught exception warning in Chrome.\n \t\t\t// See https://bugs.chromium.org/p/chromium/issues/detail?id=465666\n \t\t\tPromise.resolve()\n \t\t\t\t.then(function() {\n \t\t\t\t\treturn hotApply(hotApplyOnUpdate);\n \t\t\t\t})\n \t\t\t\t.then(\n \t\t\t\t\tfunction(result) {\n \t\t\t\t\t\tdeferred.resolve(result);\n \t\t\t\t\t},\n \t\t\t\t\tfunction(err) {\n \t\t\t\t\t\tdeferred.reject(err);\n \t\t\t\t\t}\n \t\t\t\t);\n \t\t} else {\n \t\t\tvar outdatedModules = [];\n \t\t\tfor (var id in hotUpdate) {\n \t\t\t\tif (Object.prototype.hasOwnProperty.call(hotUpdate, id)) {\n \t\t\t\t\toutdatedModules.push(toModuleId(id));\n \t\t\t\t}\n \t\t\t}\n \t\t\tdeferred.resolve(outdatedModules);\n \t\t}\n \t}\n\n \tfunction hotApply(options) {\n \t\tif (hotStatus !== \"ready\")\n \t\t\tthrow new Error(\"apply() is only allowed in ready status\");\n \t\toptions = options || {};\n\n \t\tvar cb;\n \t\tvar i;\n \t\tvar j;\n \t\tvar module;\n \t\tvar moduleId;\n\n \t\tfunction getAffectedStuff(updateModuleId) {\n \t\t\tvar outdatedModules = [updateModuleId];\n \t\t\tvar outdatedDependencies = {};\n\n \t\t\tvar queue = outdatedModules.map(function(id) {\n \t\t\t\treturn {\n \t\t\t\t\tchain: [id],\n \t\t\t\t\tid: id\n \t\t\t\t};\n \t\t\t});\n \t\t\twhile (queue.length > 0) {\n \t\t\t\tvar queueItem = queue.pop();\n \t\t\t\tvar moduleId = queueItem.id;\n \t\t\t\tvar chain = queueItem.chain;\n \t\t\t\tmodule = installedModules[moduleId];\n \t\t\t\tif (!module || module.hot._selfAccepted) continue;\n \t\t\t\tif (module.hot._selfDeclined) {\n \t\t\t\t\treturn {\n \t\t\t\t\t\ttype: \"self-declined\",\n \t\t\t\t\t\tchain: chain,\n \t\t\t\t\t\tmoduleId: moduleId\n \t\t\t\t\t};\n \t\t\t\t}\n \t\t\t\tif (module.hot._main) {\n \t\t\t\t\treturn {\n \t\t\t\t\t\ttype: \"unaccepted\",\n \t\t\t\t\t\tchain: chain,\n \t\t\t\t\t\tmoduleId: moduleId\n \t\t\t\t\t};\n \t\t\t\t}\n \t\t\t\tfor (var i = 0; i < module.parents.length; i++) {\n \t\t\t\t\tvar parentId = module.parents[i];\n \t\t\t\t\tvar parent = installedModules[parentId];\n \t\t\t\t\tif (!parent) continue;\n \t\t\t\t\tif (parent.hot._declinedDependencies[moduleId]) {\n \t\t\t\t\t\treturn {\n \t\t\t\t\t\t\ttype: \"declined\",\n \t\t\t\t\t\t\tchain: chain.concat([parentId]),\n \t\t\t\t\t\t\tmoduleId: moduleId,\n \t\t\t\t\t\t\tparentId: parentId\n \t\t\t\t\t\t};\n \t\t\t\t\t}\n \t\t\t\t\tif (outdatedModules.indexOf(parentId) !== -1) continue;\n \t\t\t\t\tif (parent.hot._acceptedDependencies[moduleId]) {\n \t\t\t\t\t\tif (!outdatedDependencies[parentId])\n \t\t\t\t\t\t\toutdatedDependencies[parentId] = [];\n \t\t\t\t\t\taddAllToSet(outdatedDependencies[parentId], [moduleId]);\n \t\t\t\t\t\tcontinue;\n \t\t\t\t\t}\n \t\t\t\t\tdelete outdatedDependencies[parentId];\n \t\t\t\t\toutdatedModules.push(parentId);\n \t\t\t\t\tqueue.push({\n \t\t\t\t\t\tchain: chain.concat([parentId]),\n \t\t\t\t\t\tid: parentId\n \t\t\t\t\t});\n \t\t\t\t}\n \t\t\t}\n\n \t\t\treturn {\n \t\t\t\ttype: \"accepted\",\n \t\t\t\tmoduleId: updateModuleId,\n \t\t\t\toutdatedModules: outdatedModules,\n \t\t\t\toutdatedDependencies: outdatedDependencies\n \t\t\t};\n \t\t}\n\n \t\tfunction addAllToSet(a, b) {\n \t\t\tfor (var i = 0; i < b.length; i++) {\n \t\t\t\tvar item = b[i];\n \t\t\t\tif (a.indexOf(item) === -1) a.push(item);\n \t\t\t}\n \t\t}\n\n \t\t// at begin all updates modules are outdated\n \t\t// the \"outdated\" status can propagate to parents if they don't accept the children\n \t\tvar outdatedDependencies = {};\n \t\tvar outdatedModules = [];\n \t\tvar appliedUpdate = {};\n\n \t\tvar warnUnexpectedRequire = function warnUnexpectedRequire() {\n \t\t\tconsole.warn(\n \t\t\t\t\"[HMR] unexpected require(\" + result.moduleId + \") to disposed module\"\n \t\t\t);\n \t\t};\n\n \t\tfor (var id in hotUpdate) {\n \t\t\tif (Object.prototype.hasOwnProperty.call(hotUpdate, id)) {\n \t\t\t\tmoduleId = toModuleId(id);\n \t\t\t\t/** @type {TODO} */\n \t\t\t\tvar result;\n \t\t\t\tif (hotUpdate[id]) {\n \t\t\t\t\tresult = getAffectedStuff(moduleId);\n \t\t\t\t} else {\n \t\t\t\t\tresult = {\n \t\t\t\t\t\ttype: \"disposed\",\n \t\t\t\t\t\tmoduleId: id\n \t\t\t\t\t};\n \t\t\t\t}\n \t\t\t\t/** @type {Error|false} */\n \t\t\t\tvar abortError = false;\n \t\t\t\tvar doApply = false;\n \t\t\t\tvar doDispose = false;\n \t\t\t\tvar chainInfo = \"\";\n \t\t\t\tif (result.chain) {\n \t\t\t\t\tchainInfo = \"\\nUpdate propagation: \" + result.chain.join(\" -> \");\n \t\t\t\t}\n \t\t\t\tswitch (result.type) {\n \t\t\t\t\tcase \"self-declined\":\n \t\t\t\t\t\tif (options.onDeclined) options.onDeclined(result);\n \t\t\t\t\t\tif (!options.ignoreDeclined)\n \t\t\t\t\t\t\tabortError = new Error(\n \t\t\t\t\t\t\t\t\"Aborted because of self decline: \" +\n \t\t\t\t\t\t\t\t\tresult.moduleId +\n \t\t\t\t\t\t\t\t\tchainInfo\n \t\t\t\t\t\t\t);\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tcase \"declined\":\n \t\t\t\t\t\tif (options.onDeclined) options.onDeclined(result);\n \t\t\t\t\t\tif (!options.ignoreDeclined)\n \t\t\t\t\t\t\tabortError = new Error(\n \t\t\t\t\t\t\t\t\"Aborted because of declined dependency: \" +\n \t\t\t\t\t\t\t\t\tresult.moduleId +\n \t\t\t\t\t\t\t\t\t\" in \" +\n \t\t\t\t\t\t\t\t\tresult.parentId +\n \t\t\t\t\t\t\t\t\tchainInfo\n \t\t\t\t\t\t\t);\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tcase \"unaccepted\":\n \t\t\t\t\t\tif (options.onUnaccepted) options.onUnaccepted(result);\n \t\t\t\t\t\tif (!options.ignoreUnaccepted)\n \t\t\t\t\t\t\tabortError = new Error(\n \t\t\t\t\t\t\t\t\"Aborted because \" + moduleId + \" is not accepted\" + chainInfo\n \t\t\t\t\t\t\t);\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tcase \"accepted\":\n \t\t\t\t\t\tif (options.onAccepted) options.onAccepted(result);\n \t\t\t\t\t\tdoApply = true;\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tcase \"disposed\":\n \t\t\t\t\t\tif (options.onDisposed) options.onDisposed(result);\n \t\t\t\t\t\tdoDispose = true;\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tdefault:\n \t\t\t\t\t\tthrow new Error(\"Unexception type \" + result.type);\n \t\t\t\t}\n \t\t\t\tif (abortError) {\n \t\t\t\t\thotSetStatus(\"abort\");\n \t\t\t\t\treturn Promise.reject(abortError);\n \t\t\t\t}\n \t\t\t\tif (doApply) {\n \t\t\t\t\tappliedUpdate[moduleId] = hotUpdate[moduleId];\n \t\t\t\t\taddAllToSet(outdatedModules, result.outdatedModules);\n \t\t\t\t\tfor (moduleId in result.outdatedDependencies) {\n \t\t\t\t\t\tif (\n \t\t\t\t\t\t\tObject.prototype.hasOwnProperty.call(\n \t\t\t\t\t\t\t\tresult.outdatedDependencies,\n \t\t\t\t\t\t\t\tmoduleId\n \t\t\t\t\t\t\t)\n \t\t\t\t\t\t) {\n \t\t\t\t\t\t\tif (!outdatedDependencies[moduleId])\n \t\t\t\t\t\t\t\toutdatedDependencies[moduleId] = [];\n \t\t\t\t\t\t\taddAllToSet(\n \t\t\t\t\t\t\t\toutdatedDependencies[moduleId],\n \t\t\t\t\t\t\t\tresult.outdatedDependencies[moduleId]\n \t\t\t\t\t\t\t);\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t\tif (doDispose) {\n \t\t\t\t\taddAllToSet(outdatedModules, [result.moduleId]);\n \t\t\t\t\tappliedUpdate[moduleId] = warnUnexpectedRequire;\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n \t\t// Store self accepted outdated modules to require them later by the module system\n \t\tvar outdatedSelfAcceptedModules = [];\n \t\tfor (i = 0; i < outdatedModules.length; i++) {\n \t\t\tmoduleId = outdatedModules[i];\n \t\t\tif (\n \t\t\t\tinstalledModules[moduleId] &&\n \t\t\t\tinstalledModules[moduleId].hot._selfAccepted &&\n \t\t\t\t// removed self-accepted modules should not be required\n \t\t\t\tappliedUpdate[moduleId] !== warnUnexpectedRequire\n \t\t\t) {\n \t\t\t\toutdatedSelfAcceptedModules.push({\n \t\t\t\t\tmodule: moduleId,\n \t\t\t\t\terrorHandler: installedModules[moduleId].hot._selfAccepted\n \t\t\t\t});\n \t\t\t}\n \t\t}\n\n \t\t// Now in \"dispose\" phase\n \t\thotSetStatus(\"dispose\");\n \t\tObject.keys(hotAvailableFilesMap).forEach(function(chunkId) {\n \t\t\tif (hotAvailableFilesMap[chunkId] === false) {\n \t\t\t\thotDisposeChunk(chunkId);\n \t\t\t}\n \t\t});\n\n \t\tvar idx;\n \t\tvar queue = outdatedModules.slice();\n \t\twhile (queue.length > 0) {\n \t\t\tmoduleId = queue.pop();\n \t\t\tmodule = installedModules[moduleId];\n \t\t\tif (!module) continue;\n\n \t\t\tvar data = {};\n\n \t\t\t// Call dispose handlers\n \t\t\tvar disposeHandlers = module.hot._disposeHandlers;\n \t\t\tfor (j = 0; j < disposeHandlers.length; j++) {\n \t\t\t\tcb = disposeHandlers[j];\n \t\t\t\tcb(data);\n \t\t\t}\n \t\t\thotCurrentModuleData[moduleId] = data;\n\n \t\t\t// disable module (this disables requires from this module)\n \t\t\tmodule.hot.active = false;\n\n \t\t\t// remove module from cache\n \t\t\tdelete installedModules[moduleId];\n\n \t\t\t// when disposing there is no need to call dispose handler\n \t\t\tdelete outdatedDependencies[moduleId];\n\n \t\t\t// remove \"parents\" references from all children\n \t\t\tfor (j = 0; j < module.children.length; j++) {\n \t\t\t\tvar child = installedModules[module.children[j]];\n \t\t\t\tif (!child) continue;\n \t\t\t\tidx = child.parents.indexOf(moduleId);\n \t\t\t\tif (idx >= 0) {\n \t\t\t\t\tchild.parents.splice(idx, 1);\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n \t\t// remove outdated dependency from module children\n \t\tvar dependency;\n \t\tvar moduleOutdatedDependencies;\n \t\tfor (moduleId in outdatedDependencies) {\n \t\t\tif (\n \t\t\t\tObject.prototype.hasOwnProperty.call(outdatedDependencies, moduleId)\n \t\t\t) {\n \t\t\t\tmodule = installedModules[moduleId];\n \t\t\t\tif (module) {\n \t\t\t\t\tmoduleOutdatedDependencies = outdatedDependencies[moduleId];\n \t\t\t\t\tfor (j = 0; j < moduleOutdatedDependencies.length; j++) {\n \t\t\t\t\t\tdependency = moduleOutdatedDependencies[j];\n \t\t\t\t\t\tidx = module.children.indexOf(dependency);\n \t\t\t\t\t\tif (idx >= 0) module.children.splice(idx, 1);\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n \t\t// Now in \"apply\" phase\n \t\thotSetStatus(\"apply\");\n\n \t\thotCurrentHash = hotUpdateNewHash;\n\n \t\t// insert new code\n \t\tfor (moduleId in appliedUpdate) {\n \t\t\tif (Object.prototype.hasOwnProperty.call(appliedUpdate, moduleId)) {\n \t\t\t\tmodules[moduleId] = appliedUpdate[moduleId];\n \t\t\t}\n \t\t}\n\n \t\t// call accept handlers\n \t\tvar error = null;\n \t\tfor (moduleId in outdatedDependencies) {\n \t\t\tif (\n \t\t\t\tObject.prototype.hasOwnProperty.call(outdatedDependencies, moduleId)\n \t\t\t) {\n \t\t\t\tmodule = installedModules[moduleId];\n \t\t\t\tif (module) {\n \t\t\t\t\tmoduleOutdatedDependencies = outdatedDependencies[moduleId];\n \t\t\t\t\tvar callbacks = [];\n \t\t\t\t\tfor (i = 0; i < moduleOutdatedDependencies.length; i++) {\n \t\t\t\t\t\tdependency = moduleOutdatedDependencies[i];\n \t\t\t\t\t\tcb = module.hot._acceptedDependencies[dependency];\n \t\t\t\t\t\tif (cb) {\n \t\t\t\t\t\t\tif (callbacks.indexOf(cb) !== -1) continue;\n \t\t\t\t\t\t\tcallbacks.push(cb);\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t\tfor (i = 0; i < callbacks.length; i++) {\n \t\t\t\t\t\tcb = callbacks[i];\n \t\t\t\t\t\ttry {\n \t\t\t\t\t\t\tcb(moduleOutdatedDependencies);\n \t\t\t\t\t\t} catch (err) {\n \t\t\t\t\t\t\tif (options.onErrored) {\n \t\t\t\t\t\t\t\toptions.onErrored({\n \t\t\t\t\t\t\t\t\ttype: \"accept-errored\",\n \t\t\t\t\t\t\t\t\tmoduleId: moduleId,\n \t\t\t\t\t\t\t\t\tdependencyId: moduleOutdatedDependencies[i],\n \t\t\t\t\t\t\t\t\terror: err\n \t\t\t\t\t\t\t\t});\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t\tif (!options.ignoreErrored) {\n \t\t\t\t\t\t\t\tif (!error) error = err;\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n \t\t// Load self accepted modules\n \t\tfor (i = 0; i < outdatedSelfAcceptedModules.length; i++) {\n \t\t\tvar item = outdatedSelfAcceptedModules[i];\n \t\t\tmoduleId = item.module;\n \t\t\thotCurrentParents = [moduleId];\n \t\t\ttry {\n \t\t\t\t__webpack_require__(moduleId);\n \t\t\t} catch (err) {\n \t\t\t\tif (typeof item.errorHandler === \"function\") {\n \t\t\t\t\ttry {\n \t\t\t\t\t\titem.errorHandler(err);\n \t\t\t\t\t} catch (err2) {\n \t\t\t\t\t\tif (options.onErrored) {\n \t\t\t\t\t\t\toptions.onErrored({\n \t\t\t\t\t\t\t\ttype: \"self-accept-error-handler-errored\",\n \t\t\t\t\t\t\t\tmoduleId: moduleId,\n \t\t\t\t\t\t\t\terror: err2,\n \t\t\t\t\t\t\t\toriginalError: err\n \t\t\t\t\t\t\t});\n \t\t\t\t\t\t}\n \t\t\t\t\t\tif (!options.ignoreErrored) {\n \t\t\t\t\t\t\tif (!error) error = err2;\n \t\t\t\t\t\t}\n \t\t\t\t\t\tif (!error) error = err;\n \t\t\t\t\t}\n \t\t\t\t} else {\n \t\t\t\t\tif (options.onErrored) {\n \t\t\t\t\t\toptions.onErrored({\n \t\t\t\t\t\t\ttype: \"self-accept-errored\",\n \t\t\t\t\t\t\tmoduleId: moduleId,\n \t\t\t\t\t\t\terror: err\n \t\t\t\t\t\t});\n \t\t\t\t\t}\n \t\t\t\t\tif (!options.ignoreErrored) {\n \t\t\t\t\t\tif (!error) error = err;\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n \t\t// handle errors in accept handlers and self accepted module load\n \t\tif (error) {\n \t\t\thotSetStatus(\"fail\");\n \t\t\treturn Promise.reject(error);\n \t\t}\n\n \t\thotSetStatus(\"idle\");\n \t\treturn new Promise(function(resolve) {\n \t\t\tresolve(outdatedModules);\n \t\t});\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {},\n \t\t\thot: hotCreateModule(moduleId),\n \t\t\tparents: (hotCurrentParentsTemp = hotCurrentParents, hotCurrentParents = [], hotCurrentParentsTemp),\n \t\t\tchildren: []\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, hotCreateRequire(moduleId));\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// __webpack_hash__\n \t__webpack_require__.h = function() { return hotCurrentHash; };\n\n\n \t// Load entry module and return exports\n \treturn hotCreateRequire(228)(__webpack_require__.s = 228);\n","/*\n * Dexie.js - a minimalistic wrapper for IndexedDB\n * ===============================================\n *\n * By David Fahlander, david.fahlander@gmail.com\n *\n * Version 3.0.0-alpha.8, Fri Apr 26 2019\n *\n * http://dexie.org\n *\n * Apache License Version 2.0, January 2004, http://www.apache.org/licenses/\n */\n \nvar __assign = function() {\n    __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\n\nvar keys = Object.keys;\nvar isArray = Array.isArray;\nvar _global = typeof self !== 'undefined' ? self :\n    typeof window !== 'undefined' ? window :\n        global;\nif (typeof Promise !== 'undefined' && !_global.Promise) {\n    _global.Promise = Promise;\n}\nfunction extend(obj, extension) {\n    if (typeof extension !== 'object')\n        return obj;\n    keys(extension).forEach(function (key) {\n        obj[key] = extension[key];\n    });\n    return obj;\n}\nvar getProto = Object.getPrototypeOf;\nvar _hasOwn = {}.hasOwnProperty;\nfunction hasOwn(obj, prop) {\n    return _hasOwn.call(obj, prop);\n}\nfunction props(proto, extension) {\n    if (typeof extension === 'function')\n        extension = extension(getProto(proto));\n    keys(extension).forEach(function (key) {\n        setProp(proto, key, extension[key]);\n    });\n}\nvar defineProperty = Object.defineProperty;\nfunction setProp(obj, prop, functionOrGetSet, options) {\n    defineProperty(obj, prop, extend(functionOrGetSet && hasOwn(functionOrGetSet, \"get\") && typeof functionOrGetSet.get === 'function' ?\n        { get: functionOrGetSet.get, set: functionOrGetSet.set, configurable: true } :\n        { value: functionOrGetSet, configurable: true, writable: true }, options));\n}\nfunction derive(Child) {\n    return {\n        from: function (Parent) {\n            Child.prototype = Object.create(Parent.prototype);\n            setProp(Child.prototype, \"constructor\", Child);\n            return {\n                extend: props.bind(null, Child.prototype)\n            };\n        }\n    };\n}\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nfunction getPropertyDescriptor(obj, prop) {\n    var pd = getOwnPropertyDescriptor(obj, prop);\n    var proto;\n    return pd || (proto = getProto(obj)) && getPropertyDescriptor(proto, prop);\n}\nvar _slice = [].slice;\nfunction slice(args, start, end) {\n    return _slice.call(args, start, end);\n}\nfunction override(origFunc, overridedFactory) {\n    return overridedFactory(origFunc);\n}\nfunction assert(b) {\n    if (!b)\n        throw new Error(\"Assertion Failed\");\n}\nfunction asap(fn) {\n    if (_global.setImmediate)\n        setImmediate(fn);\n    else\n        setTimeout(fn, 0);\n}\n\nfunction arrayToObject(array, extractor) {\n    return array.reduce(function (result, item, i) {\n        var nameAndValue = extractor(item, i);\n        if (nameAndValue)\n            result[nameAndValue[0]] = nameAndValue[1];\n        return result;\n    }, {});\n}\n\nfunction tryCatch(fn, onerror, args) {\n    try {\n        fn.apply(null, args);\n    }\n    catch (ex) {\n        onerror && onerror(ex);\n    }\n}\nfunction getByKeyPath(obj, keyPath) {\n    if (hasOwn(obj, keyPath))\n        return obj[keyPath];\n    if (!keyPath)\n        return obj;\n    if (typeof keyPath !== 'string') {\n        var rv = [];\n        for (var i = 0, l = keyPath.length; i < l; ++i) {\n            var val = getByKeyPath(obj, keyPath[i]);\n            rv.push(val);\n        }\n        return rv;\n    }\n    var period = keyPath.indexOf('.');\n    if (period !== -1) {\n        var innerObj = obj[keyPath.substr(0, period)];\n        return innerObj === undefined ? undefined : getByKeyPath(innerObj, keyPath.substr(period + 1));\n    }\n    return undefined;\n}\nfunction setByKeyPath(obj, keyPath, value) {\n    if (!obj || keyPath === undefined)\n        return;\n    if ('isFrozen' in Object && Object.isFrozen(obj))\n        return;\n    if (typeof keyPath !== 'string' && 'length' in keyPath) {\n        assert(typeof value !== 'string' && 'length' in value);\n        for (var i = 0, l = keyPath.length; i < l; ++i) {\n            setByKeyPath(obj, keyPath[i], value[i]);\n        }\n    }\n    else {\n        var period = keyPath.indexOf('.');\n        if (period !== -1) {\n            var currentKeyPath = keyPath.substr(0, period);\n            var remainingKeyPath = keyPath.substr(period + 1);\n            if (remainingKeyPath === \"\")\n                if (value === undefined) {\n                    if (isArray(obj) && !isNaN(parseInt(currentKeyPath)))\n                        obj.splice(currentKeyPath, 1);\n                    else\n                        delete obj[currentKeyPath];\n                }\n                else\n                    obj[currentKeyPath] = value;\n            else {\n                var innerObj = obj[currentKeyPath];\n                if (!innerObj)\n                    innerObj = (obj[currentKeyPath] = {});\n                setByKeyPath(innerObj, remainingKeyPath, value);\n            }\n        }\n        else {\n            if (value === undefined) {\n                if (isArray(obj) && !isNaN(parseInt(keyPath)))\n                    obj.splice(keyPath, 1);\n                else\n                    delete obj[keyPath];\n            }\n            else\n                obj[keyPath] = value;\n        }\n    }\n}\nfunction delByKeyPath(obj, keyPath) {\n    if (typeof keyPath === 'string')\n        setByKeyPath(obj, keyPath, undefined);\n    else if ('length' in keyPath)\n        [].map.call(keyPath, function (kp) {\n            setByKeyPath(obj, kp, undefined);\n        });\n}\nfunction shallowClone(obj) {\n    var rv = {};\n    for (var m in obj) {\n        if (hasOwn(obj, m))\n            rv[m] = obj[m];\n    }\n    return rv;\n}\nvar concat = [].concat;\nfunction flatten(a) {\n    return concat.apply([], a);\n}\nvar intrinsicTypes = \"Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set\"\n    .split(',').concat(flatten([8, 16, 32, 64].map(function (num) { return [\"Int\", \"Uint\", \"Float\"].map(function (t) { return t + num + \"Array\"; }); }))).filter(function (t) { return _global[t]; }).map(function (t) { return _global[t]; });\nfunction deepClone(any) {\n    if (!any || typeof any !== 'object')\n        return any;\n    var rv;\n    if (isArray(any)) {\n        rv = [];\n        for (var i = 0, l = any.length; i < l; ++i) {\n            rv.push(deepClone(any[i]));\n        }\n    }\n    else if (intrinsicTypes.indexOf(any.constructor) >= 0) {\n        rv = any;\n    }\n    else {\n        rv = any.constructor ? Object.create(any.constructor.prototype) : {};\n        for (var prop in any) {\n            if (hasOwn(any, prop)) {\n                rv[prop] = deepClone(any[prop]);\n            }\n        }\n    }\n    return rv;\n}\nfunction getObjectDiff(a, b, rv, prfx) {\n    rv = rv || {};\n    prfx = prfx || '';\n    keys(a).forEach(function (prop) {\n        if (!hasOwn(b, prop))\n            rv[prfx + prop] = undefined;\n        else {\n            var ap = a[prop], bp = b[prop];\n            if (typeof ap === 'object' && typeof bp === 'object' &&\n                ap && bp &&\n                ('' + ap.constructor) === ('' + bp.constructor))\n                getObjectDiff(ap, bp, rv, prfx + prop + \".\");\n            else if (ap !== bp)\n                rv[prfx + prop] = b[prop];\n        }\n    });\n    keys(b).forEach(function (prop) {\n        if (!hasOwn(a, prop)) {\n            rv[prfx + prop] = b[prop];\n        }\n    });\n    return rv;\n}\nvar iteratorSymbol = typeof Symbol !== 'undefined' && Symbol.iterator;\nvar getIteratorOf = iteratorSymbol ? function (x) {\n    var i;\n    return x != null && (i = x[iteratorSymbol]) && i.apply(x);\n} : function () { return null; };\nvar NO_CHAR_ARRAY = {};\nfunction getArrayOf(arrayLike) {\n    var i, a, x, it;\n    if (arguments.length === 1) {\n        if (isArray(arrayLike))\n            return arrayLike.slice();\n        if (this === NO_CHAR_ARRAY && typeof arrayLike === 'string')\n            return [arrayLike];\n        if ((it = getIteratorOf(arrayLike))) {\n            a = [];\n            while (x = it.next(), !x.done)\n                a.push(x.value);\n            return a;\n        }\n        if (arrayLike == null)\n            return [arrayLike];\n        i = arrayLike.length;\n        if (typeof i === 'number') {\n            a = new Array(i);\n            while (i--)\n                a[i] = arrayLike[i];\n            return a;\n        }\n        return [arrayLike];\n    }\n    i = arguments.length;\n    a = new Array(i);\n    while (i--)\n        a[i] = arguments[i];\n    return a;\n}\n\nvar debug = typeof location !== 'undefined' &&\n    /^(http|https):\\/\\/(localhost|127\\.0\\.0\\.1)/.test(location.href);\nfunction setDebug(value, filter) {\n    debug = value;\n    libraryFilter = filter;\n}\nvar libraryFilter = function () { return true; };\nvar NEEDS_THROW_FOR_STACK = !new Error(\"\").stack;\nfunction getErrorWithStack() {\n    if (NEEDS_THROW_FOR_STACK)\n        try {\n            throw new Error();\n        }\n        catch (e) {\n            return e;\n        }\n    return new Error();\n}\nfunction prettyStack(exception, numIgnoredFrames) {\n    var stack = exception.stack;\n    if (!stack)\n        return \"\";\n    numIgnoredFrames = (numIgnoredFrames || 0);\n    if (stack.indexOf(exception.name) === 0)\n        numIgnoredFrames += (exception.name + exception.message).split('\\n').length;\n    return stack.split('\\n')\n        .slice(numIgnoredFrames)\n        .filter(libraryFilter)\n        .map(function (frame) { return \"\\n\" + frame; })\n        .join('');\n}\n\nvar dexieErrorNames = [\n    'Modify',\n    'Bulk',\n    'OpenFailed',\n    'VersionChange',\n    'Schema',\n    'Upgrade',\n    'InvalidTable',\n    'MissingAPI',\n    'NoSuchDatabase',\n    'InvalidArgument',\n    'SubTransaction',\n    'Unsupported',\n    'Internal',\n    'DatabaseClosed',\n    'PrematureCommit',\n    'ForeignAwait'\n];\nvar idbDomErrorNames = [\n    'Unknown',\n    'Constraint',\n    'Data',\n    'TransactionInactive',\n    'ReadOnly',\n    'Version',\n    'NotFound',\n    'InvalidState',\n    'InvalidAccess',\n    'Abort',\n    'Timeout',\n    'QuotaExceeded',\n    'Syntax',\n    'DataClone'\n];\nvar errorList = dexieErrorNames.concat(idbDomErrorNames);\nvar defaultTexts = {\n    VersionChanged: \"Database version changed by other database connection\",\n    DatabaseClosed: \"Database has been closed\",\n    Abort: \"Transaction aborted\",\n    TransactionInactive: \"Transaction has already completed or failed\"\n};\nfunction DexieError(name, msg) {\n    this._e = getErrorWithStack();\n    this.name = name;\n    this.message = msg;\n}\nderive(DexieError).from(Error).extend({\n    stack: {\n        get: function () {\n            return this._stack ||\n                (this._stack = this.name + \": \" + this.message + prettyStack(this._e, 2));\n        }\n    },\n    toString: function () { return this.name + \": \" + this.message; }\n});\nfunction getMultiErrorMessage(msg, failures) {\n    return msg + \". Errors: \" + Object.keys(failures)\n        .map(function (key) { return failures[key].toString(); })\n        .filter(function (v, i, s) { return s.indexOf(v) === i; })\n        .join('\\n');\n}\nfunction ModifyError(msg, failures, successCount, failedKeys) {\n    this._e = getErrorWithStack();\n    this.failures = failures;\n    this.failedKeys = failedKeys;\n    this.successCount = successCount;\n    this.message = getMultiErrorMessage(msg, failures);\n}\nderive(ModifyError).from(DexieError);\nfunction BulkError(msg, failures) {\n    this._e = getErrorWithStack();\n    this.name = \"BulkError\";\n    this.failures = failures;\n    this.message = getMultiErrorMessage(msg, failures);\n}\nderive(BulkError).from(DexieError);\nvar errnames = errorList.reduce(function (obj, name) { return (obj[name] = name + \"Error\", obj); }, {});\nvar BaseException = DexieError;\nvar exceptions = errorList.reduce(function (obj, name) {\n    var fullName = name + \"Error\";\n    function DexieError(msgOrInner, inner) {\n        this._e = getErrorWithStack();\n        this.name = fullName;\n        if (!msgOrInner) {\n            this.message = defaultTexts[name] || fullName;\n            this.inner = null;\n        }\n        else if (typeof msgOrInner === 'string') {\n            this.message = \"\" + msgOrInner + (!inner ? '' : '\\n ' + inner);\n            this.inner = inner || null;\n        }\n        else if (typeof msgOrInner === 'object') {\n            this.message = msgOrInner.name + \" \" + msgOrInner.message;\n            this.inner = msgOrInner;\n        }\n    }\n    derive(DexieError).from(BaseException);\n    obj[name] = DexieError;\n    return obj;\n}, {});\nexceptions.Syntax = SyntaxError;\nexceptions.Type = TypeError;\nexceptions.Range = RangeError;\nvar exceptionMap = idbDomErrorNames.reduce(function (obj, name) {\n    obj[name + \"Error\"] = exceptions[name];\n    return obj;\n}, {});\nfunction mapError(domError, message) {\n    if (!domError || domError instanceof DexieError || domError instanceof TypeError || domError instanceof SyntaxError || !domError.name || !exceptionMap[domError.name])\n        return domError;\n    var rv = new exceptionMap[domError.name](message || domError.message, domError);\n    if (\"stack\" in domError) {\n        setProp(rv, \"stack\", { get: function () {\n                return this.inner.stack;\n            } });\n    }\n    return rv;\n}\nvar fullNameExceptions = errorList.reduce(function (obj, name) {\n    if ([\"Syntax\", \"Type\", \"Range\"].indexOf(name) === -1)\n        obj[name + \"Error\"] = exceptions[name];\n    return obj;\n}, {});\nfullNameExceptions.ModifyError = ModifyError;\nfullNameExceptions.DexieError = DexieError;\nfullNameExceptions.BulkError = BulkError;\n\nfunction nop() { }\nfunction mirror(val) { return val; }\nfunction pureFunctionChain(f1, f2) {\n    if (f1 == null || f1 === mirror)\n        return f2;\n    return function (val) {\n        return f2(f1(val));\n    };\n}\nfunction callBoth(on1, on2) {\n    return function () {\n        on1.apply(this, arguments);\n        on2.apply(this, arguments);\n    };\n}\nfunction hookCreatingChain(f1, f2) {\n    if (f1 === nop)\n        return f2;\n    return function () {\n        var res = f1.apply(this, arguments);\n        if (res !== undefined)\n            arguments[0] = res;\n        var onsuccess = this.onsuccess,\n        onerror = this.onerror;\n        this.onsuccess = null;\n        this.onerror = null;\n        var res2 = f2.apply(this, arguments);\n        if (onsuccess)\n            this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\n        if (onerror)\n            this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\n        return res2 !== undefined ? res2 : res;\n    };\n}\nfunction hookDeletingChain(f1, f2) {\n    if (f1 === nop)\n        return f2;\n    return function () {\n        f1.apply(this, arguments);\n        var onsuccess = this.onsuccess,\n        onerror = this.onerror;\n        this.onsuccess = this.onerror = null;\n        f2.apply(this, arguments);\n        if (onsuccess)\n            this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\n        if (onerror)\n            this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\n    };\n}\nfunction hookUpdatingChain(f1, f2) {\n    if (f1 === nop)\n        return f2;\n    return function (modifications) {\n        var res = f1.apply(this, arguments);\n        extend(modifications, res);\n        var onsuccess = this.onsuccess,\n        onerror = this.onerror;\n        this.onsuccess = null;\n        this.onerror = null;\n        var res2 = f2.apply(this, arguments);\n        if (onsuccess)\n            this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\n        if (onerror)\n            this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\n        return res === undefined ?\n            (res2 === undefined ? undefined : res2) :\n            (extend(res, res2));\n    };\n}\nfunction reverseStoppableEventChain(f1, f2) {\n    if (f1 === nop)\n        return f2;\n    return function () {\n        if (f2.apply(this, arguments) === false)\n            return false;\n        return f1.apply(this, arguments);\n    };\n}\n\nfunction promisableChain(f1, f2) {\n    if (f1 === nop)\n        return f2;\n    return function () {\n        var res = f1.apply(this, arguments);\n        if (res && typeof res.then === 'function') {\n            var thiz = this, i = arguments.length, args = new Array(i);\n            while (i--)\n                args[i] = arguments[i];\n            return res.then(function () {\n                return f2.apply(thiz, args);\n            });\n        }\n        return f2.apply(this, arguments);\n    };\n}\n\nvar INTERNAL = {};\nvar LONG_STACKS_CLIP_LIMIT = 100;\nvar MAX_LONG_STACKS = 20;\nvar ZONE_ECHO_LIMIT = 7;\nvar nativePromiseInstanceAndProto = (function () {\n    try {\n        return new Function('let F=async ()=>{},p=F();return [p,Object.getPrototypeOf(p),Promise.resolve(),F.constructor];')();\n    }\n    catch (e) {\n        var P = _global.Promise;\n        return P ?\n            [P.resolve(), P.prototype, P.resolve()] :\n            [];\n    }\n})();\nvar resolvedNativePromise = nativePromiseInstanceAndProto[0];\nvar nativePromiseProto = nativePromiseInstanceAndProto[1];\nvar resolvedGlobalPromise = nativePromiseInstanceAndProto[2];\nvar nativePromiseThen = nativePromiseProto && nativePromiseProto.then;\nvar NativePromise = resolvedNativePromise && resolvedNativePromise.constructor;\nvar AsyncFunction = nativePromiseInstanceAndProto[3];\nvar patchGlobalPromise = !!resolvedGlobalPromise;\nvar stack_being_generated = false;\nvar schedulePhysicalTick = resolvedGlobalPromise ?\n    function () { resolvedGlobalPromise.then(physicalTick); }\n    :\n        _global.setImmediate ?\n            setImmediate.bind(null, physicalTick) :\n            _global.MutationObserver ?\n                function () {\n                    var hiddenDiv = document.createElement(\"div\");\n                    (new MutationObserver(function () {\n                        physicalTick();\n                        hiddenDiv = null;\n                    })).observe(hiddenDiv, { attributes: true });\n                    hiddenDiv.setAttribute('i', '1');\n                } :\n                function () { setTimeout(physicalTick, 0); };\nvar asap$1 = function (callback, args) {\n    microtickQueue.push([callback, args]);\n    if (needsNewPhysicalTick) {\n        schedulePhysicalTick();\n        needsNewPhysicalTick = false;\n    }\n};\nvar isOutsideMicroTick = true;\nvar needsNewPhysicalTick = true;\nvar unhandledErrors = [];\nvar rejectingErrors = [];\nvar currentFulfiller = null;\nvar rejectionMapper = mirror;\nvar globalPSD = {\n    id: 'global',\n    global: true,\n    ref: 0,\n    unhandleds: [],\n    onunhandled: globalError,\n    pgp: false,\n    env: {},\n    finalize: function () {\n        this.unhandleds.forEach(function (uh) {\n            try {\n                globalError(uh[0], uh[1]);\n            }\n            catch (e) { }\n        });\n    }\n};\nvar PSD = globalPSD;\nvar microtickQueue = [];\nvar numScheduledCalls = 0;\nvar tickFinalizers = [];\nfunction Promise$1(fn) {\n    if (typeof this !== 'object')\n        throw new TypeError('Promises must be constructed via new');\n    this._listeners = [];\n    this.onuncatched = nop;\n    this._lib = false;\n    var psd = (this._PSD = PSD);\n    if (debug) {\n        this._stackHolder = getErrorWithStack();\n        this._prev = null;\n        this._numPrev = 0;\n    }\n    if (typeof fn !== 'function') {\n        if (fn !== INTERNAL)\n            throw new TypeError('Not a function');\n        this._state = arguments[1];\n        this._value = arguments[2];\n        if (this._state === false)\n            handleRejection(this, this._value);\n        return;\n    }\n    this._state = null;\n    this._value = null;\n    ++psd.ref;\n    executePromiseTask(this, fn);\n}\nvar thenProp = {\n    get: function () {\n        var psd = PSD, microTaskId = totalEchoes;\n        function then(onFulfilled, onRejected) {\n            var _this = this;\n            var possibleAwait = !psd.global && (psd !== PSD || microTaskId !== totalEchoes);\n            if (possibleAwait)\n                decrementExpectedAwaits();\n            var rv = new Promise$1(function (resolve, reject) {\n                propagateToListener(_this, new Listener(nativeAwaitCompatibleWrap(onFulfilled, psd, possibleAwait), nativeAwaitCompatibleWrap(onRejected, psd, possibleAwait), resolve, reject, psd));\n            });\n            debug && linkToPreviousPromise(rv, this);\n            return rv;\n        }\n        then.prototype = INTERNAL;\n        return then;\n    },\n    set: function (value) {\n        setProp(this, 'then', value && value.prototype === INTERNAL ?\n            thenProp :\n            {\n                get: function () {\n                    return value;\n                },\n                set: thenProp.set\n            });\n    }\n};\nprops(Promise$1.prototype, {\n    then: thenProp,\n    _then: function (onFulfilled, onRejected) {\n        propagateToListener(this, new Listener(null, null, onFulfilled, onRejected, PSD));\n    },\n    catch: function (onRejected) {\n        if (arguments.length === 1)\n            return this.then(null, onRejected);\n        var type = arguments[0], handler = arguments[1];\n        return typeof type === 'function' ? this.then(null, function (err) {\n            return err instanceof type ? handler(err) : PromiseReject(err);\n        })\n            : this.then(null, function (err) {\n                return err && err.name === type ? handler(err) : PromiseReject(err);\n            });\n    },\n    finally: function (onFinally) {\n        return this.then(function (value) {\n            onFinally();\n            return value;\n        }, function (err) {\n            onFinally();\n            return PromiseReject(err);\n        });\n    },\n    stack: {\n        get: function () {\n            if (this._stack)\n                return this._stack;\n            try {\n                stack_being_generated = true;\n                var stacks = getStack(this, [], MAX_LONG_STACKS);\n                var stack = stacks.join(\"\\nFrom previous: \");\n                if (this._state !== null)\n                    this._stack = stack;\n                return stack;\n            }\n            finally {\n                stack_being_generated = false;\n            }\n        }\n    },\n    timeout: function (ms, msg) {\n        var _this = this;\n        return ms < Infinity ?\n            new Promise$1(function (resolve, reject) {\n                var handle = setTimeout(function () { return reject(new exceptions.Timeout(msg)); }, ms);\n                _this.then(resolve, reject).finally(clearTimeout.bind(null, handle));\n            }) : this;\n    }\n});\nif (typeof Symbol !== 'undefined' && Symbol.toStringTag)\n    setProp(Promise$1.prototype, Symbol.toStringTag, 'Promise');\nglobalPSD.env = snapShot();\nfunction Listener(onFulfilled, onRejected, resolve, reject, zone) {\n    this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n    this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n    this.resolve = resolve;\n    this.reject = reject;\n    this.psd = zone;\n}\nprops(Promise$1, {\n    all: function () {\n        var values = getArrayOf.apply(null, arguments)\n            .map(onPossibleParallellAsync);\n        return new Promise$1(function (resolve, reject) {\n            if (values.length === 0)\n                resolve([]);\n            var remaining = values.length;\n            values.forEach(function (a, i) { return Promise$1.resolve(a).then(function (x) {\n                values[i] = x;\n                if (!--remaining)\n                    resolve(values);\n            }, reject); });\n        });\n    },\n    resolve: function (value) {\n        if (value instanceof Promise$1)\n            return value;\n        if (value && typeof value.then === 'function')\n            return new Promise$1(function (resolve, reject) {\n                value.then(resolve, reject);\n            });\n        var rv = new Promise$1(INTERNAL, true, value);\n        linkToPreviousPromise(rv, currentFulfiller);\n        return rv;\n    },\n    reject: PromiseReject,\n    race: function () {\n        var values = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);\n        return new Promise$1(function (resolve, reject) {\n            values.map(function (value) { return Promise$1.resolve(value).then(resolve, reject); });\n        });\n    },\n    PSD: {\n        get: function () { return PSD; },\n        set: function (value) { return PSD = value; }\n    },\n    newPSD: newScope,\n    usePSD: usePSD,\n    scheduler: {\n        get: function () { return asap$1; },\n        set: function (value) { asap$1 = value; }\n    },\n    rejectionMapper: {\n        get: function () { return rejectionMapper; },\n        set: function (value) { rejectionMapper = value; }\n    },\n    follow: function (fn, zoneProps) {\n        return new Promise$1(function (resolve, reject) {\n            return newScope(function (resolve, reject) {\n                var psd = PSD;\n                psd.unhandleds = [];\n                psd.onunhandled = reject;\n                psd.finalize = callBoth(function () {\n                    var _this = this;\n                    run_at_end_of_this_or_next_physical_tick(function () {\n                        _this.unhandleds.length === 0 ? resolve() : reject(_this.unhandleds[0]);\n                    });\n                }, psd.finalize);\n                fn();\n            }, zoneProps, resolve, reject);\n        });\n    }\n});\nfunction executePromiseTask(promise, fn) {\n    try {\n        fn(function (value) {\n            if (promise._state !== null)\n                return;\n            if (value === promise)\n                throw new TypeError('A promise cannot be resolved with itself.');\n            var shouldExecuteTick = promise._lib && beginMicroTickScope();\n            if (value && typeof value.then === 'function') {\n                executePromiseTask(promise, function (resolve, reject) {\n                    value instanceof Promise$1 ?\n                        value._then(resolve, reject) :\n                        value.then(resolve, reject);\n                });\n            }\n            else {\n                promise._state = true;\n                promise._value = value;\n                propagateAllListeners(promise);\n            }\n            if (shouldExecuteTick)\n                endMicroTickScope();\n        }, handleRejection.bind(null, promise));\n    }\n    catch (ex) {\n        handleRejection(promise, ex);\n    }\n}\nfunction handleRejection(promise, reason) {\n    rejectingErrors.push(reason);\n    if (promise._state !== null)\n        return;\n    var shouldExecuteTick = promise._lib && beginMicroTickScope();\n    reason = rejectionMapper(reason);\n    promise._state = false;\n    promise._value = reason;\n    debug && reason !== null && typeof reason === 'object' && !reason._promise && tryCatch(function () {\n        var origProp = getPropertyDescriptor(reason, \"stack\");\n        reason._promise = promise;\n        setProp(reason, \"stack\", {\n            get: function () {\n                return stack_being_generated ?\n                    origProp && (origProp.get ?\n                        origProp.get.apply(reason) :\n                        origProp.value) :\n                    promise.stack;\n            }\n        });\n    });\n    addPossiblyUnhandledError(promise);\n    propagateAllListeners(promise);\n    if (shouldExecuteTick)\n        endMicroTickScope();\n}\nfunction propagateAllListeners(promise) {\n    var listeners = promise._listeners;\n    promise._listeners = [];\n    for (var i = 0, len = listeners.length; i < len; ++i) {\n        propagateToListener(promise, listeners[i]);\n    }\n    var psd = promise._PSD;\n    --psd.ref || psd.finalize();\n    if (numScheduledCalls === 0) {\n        ++numScheduledCalls;\n        asap$1(function () {\n            if (--numScheduledCalls === 0)\n                finalizePhysicalTick();\n        }, []);\n    }\n}\nfunction propagateToListener(promise, listener) {\n    if (promise._state === null) {\n        promise._listeners.push(listener);\n        return;\n    }\n    var cb = promise._state ? listener.onFulfilled : listener.onRejected;\n    if (cb === null) {\n        return (promise._state ? listener.resolve : listener.reject)(promise._value);\n    }\n    ++listener.psd.ref;\n    ++numScheduledCalls;\n    asap$1(callListener, [cb, promise, listener]);\n}\nfunction callListener(cb, promise, listener) {\n    try {\n        currentFulfiller = promise;\n        var ret, value = promise._value;\n        if (promise._state) {\n            ret = cb(value);\n        }\n        else {\n            if (rejectingErrors.length)\n                rejectingErrors = [];\n            ret = cb(value);\n            if (rejectingErrors.indexOf(value) === -1)\n                markErrorAsHandled(promise);\n        }\n        listener.resolve(ret);\n    }\n    catch (e) {\n        listener.reject(e);\n    }\n    finally {\n        currentFulfiller = null;\n        if (--numScheduledCalls === 0)\n            finalizePhysicalTick();\n        --listener.psd.ref || listener.psd.finalize();\n    }\n}\nfunction getStack(promise, stacks, limit) {\n    if (stacks.length === limit)\n        return stacks;\n    var stack = \"\";\n    if (promise._state === false) {\n        var failure = promise._value, errorName, message;\n        if (failure != null) {\n            errorName = failure.name || \"Error\";\n            message = failure.message || failure;\n            stack = prettyStack(failure, 0);\n        }\n        else {\n            errorName = failure;\n            message = \"\";\n        }\n        stacks.push(errorName + (message ? \": \" + message : \"\") + stack);\n    }\n    if (debug) {\n        stack = prettyStack(promise._stackHolder, 2);\n        if (stack && stacks.indexOf(stack) === -1)\n            stacks.push(stack);\n        if (promise._prev)\n            getStack(promise._prev, stacks, limit);\n    }\n    return stacks;\n}\nfunction linkToPreviousPromise(promise, prev) {\n    var numPrev = prev ? prev._numPrev + 1 : 0;\n    if (numPrev < LONG_STACKS_CLIP_LIMIT) {\n        promise._prev = prev;\n        promise._numPrev = numPrev;\n    }\n}\nfunction physicalTick() {\n    beginMicroTickScope() && endMicroTickScope();\n}\nfunction beginMicroTickScope() {\n    var wasRootExec = isOutsideMicroTick;\n    isOutsideMicroTick = false;\n    needsNewPhysicalTick = false;\n    return wasRootExec;\n}\nfunction endMicroTickScope() {\n    var callbacks, i, l;\n    do {\n        while (microtickQueue.length > 0) {\n            callbacks = microtickQueue;\n            microtickQueue = [];\n            l = callbacks.length;\n            for (i = 0; i < l; ++i) {\n                var item = callbacks[i];\n                item[0].apply(null, item[1]);\n            }\n        }\n    } while (microtickQueue.length > 0);\n    isOutsideMicroTick = true;\n    needsNewPhysicalTick = true;\n}\nfunction finalizePhysicalTick() {\n    var unhandledErrs = unhandledErrors;\n    unhandledErrors = [];\n    unhandledErrs.forEach(function (p) {\n        p._PSD.onunhandled.call(null, p._value, p);\n    });\n    var finalizers = tickFinalizers.slice(0);\n    var i = finalizers.length;\n    while (i)\n        finalizers[--i]();\n}\nfunction run_at_end_of_this_or_next_physical_tick(fn) {\n    function finalizer() {\n        fn();\n        tickFinalizers.splice(tickFinalizers.indexOf(finalizer), 1);\n    }\n    tickFinalizers.push(finalizer);\n    ++numScheduledCalls;\n    asap$1(function () {\n        if (--numScheduledCalls === 0)\n            finalizePhysicalTick();\n    }, []);\n}\nfunction addPossiblyUnhandledError(promise) {\n    if (!unhandledErrors.some(function (p) { return p._value === promise._value; }))\n        unhandledErrors.push(promise);\n}\nfunction markErrorAsHandled(promise) {\n    var i = unhandledErrors.length;\n    while (i)\n        if (unhandledErrors[--i]._value === promise._value) {\n            unhandledErrors.splice(i, 1);\n            return;\n        }\n}\nfunction PromiseReject(reason) {\n    return new Promise$1(INTERNAL, false, reason);\n}\nfunction wrap(fn, errorCatcher) {\n    var psd = PSD;\n    return function () {\n        var wasRootExec = beginMicroTickScope(), outerScope = PSD;\n        try {\n            switchToZone(psd, true);\n            return fn.apply(this, arguments);\n        }\n        catch (e) {\n            errorCatcher && errorCatcher(e);\n        }\n        finally {\n            switchToZone(outerScope, false);\n            if (wasRootExec)\n                endMicroTickScope();\n        }\n    };\n}\nvar task = { awaits: 0, echoes: 0, id: 0 };\nvar taskCounter = 0;\nvar zoneStack = [];\nvar zoneEchoes = 0;\nvar totalEchoes = 0;\nvar zone_id_counter = 0;\nfunction newScope(fn, props$$1, a1, a2) {\n    var parent = PSD, psd = Object.create(parent);\n    psd.parent = parent;\n    psd.ref = 0;\n    psd.global = false;\n    psd.id = ++zone_id_counter;\n    var globalEnv = globalPSD.env;\n    psd.env = patchGlobalPromise ? {\n        Promise: Promise$1,\n        PromiseProp: { value: Promise$1, configurable: true, writable: true },\n        all: Promise$1.all,\n        race: Promise$1.race,\n        resolve: Promise$1.resolve,\n        reject: Promise$1.reject,\n        nthen: getPatchedPromiseThen(globalEnv.nthen, psd),\n        gthen: getPatchedPromiseThen(globalEnv.gthen, psd)\n    } : {};\n    if (props$$1)\n        extend(psd, props$$1);\n    ++parent.ref;\n    psd.finalize = function () {\n        --this.parent.ref || this.parent.finalize();\n    };\n    var rv = usePSD(psd, fn, a1, a2);\n    if (psd.ref === 0)\n        psd.finalize();\n    return rv;\n}\nfunction incrementExpectedAwaits() {\n    if (!task.id)\n        task.id = ++taskCounter;\n    ++task.awaits;\n    task.echoes += ZONE_ECHO_LIMIT;\n    return task.id;\n}\nfunction decrementExpectedAwaits(sourceTaskId) {\n    if (!task.awaits || (sourceTaskId && sourceTaskId !== task.id))\n        return;\n    if (--task.awaits === 0)\n        task.id = 0;\n    task.echoes = task.awaits * ZONE_ECHO_LIMIT;\n}\nfunction onPossibleParallellAsync(possiblePromise) {\n    if (task.echoes && possiblePromise && possiblePromise.constructor === NativePromise) {\n        incrementExpectedAwaits();\n        return possiblePromise.then(function (x) {\n            decrementExpectedAwaits();\n            return x;\n        }, function (e) {\n            decrementExpectedAwaits();\n            return rejection(e);\n        });\n    }\n    return possiblePromise;\n}\nfunction zoneEnterEcho(targetZone) {\n    ++totalEchoes;\n    if (!task.echoes || --task.echoes === 0) {\n        task.echoes = task.id = 0;\n    }\n    zoneStack.push(PSD);\n    switchToZone(targetZone, true);\n}\nfunction zoneLeaveEcho() {\n    var zone = zoneStack[zoneStack.length - 1];\n    zoneStack.pop();\n    switchToZone(zone, false);\n}\nfunction switchToZone(targetZone, bEnteringZone) {\n    var currentZone = PSD;\n    if (bEnteringZone ? task.echoes && (!zoneEchoes++ || targetZone !== PSD) : zoneEchoes && (!--zoneEchoes || targetZone !== PSD)) {\n        enqueueNativeMicroTask(bEnteringZone ? zoneEnterEcho.bind(null, targetZone) : zoneLeaveEcho);\n    }\n    if (targetZone === PSD)\n        return;\n    PSD = targetZone;\n    if (currentZone === globalPSD)\n        globalPSD.env = snapShot();\n    if (patchGlobalPromise) {\n        var GlobalPromise = globalPSD.env.Promise;\n        var targetEnv = targetZone.env;\n        nativePromiseProto.then = targetEnv.nthen;\n        GlobalPromise.prototype.then = targetEnv.gthen;\n        if (currentZone.global || targetZone.global) {\n            Object.defineProperty(_global, 'Promise', targetEnv.PromiseProp);\n            GlobalPromise.all = targetEnv.all;\n            GlobalPromise.race = targetEnv.race;\n            GlobalPromise.resolve = targetEnv.resolve;\n            GlobalPromise.reject = targetEnv.reject;\n        }\n    }\n}\nfunction snapShot() {\n    var GlobalPromise = _global.Promise;\n    return patchGlobalPromise ? {\n        Promise: GlobalPromise,\n        PromiseProp: Object.getOwnPropertyDescriptor(_global, \"Promise\"),\n        all: GlobalPromise.all,\n        race: GlobalPromise.race,\n        resolve: GlobalPromise.resolve,\n        reject: GlobalPromise.reject,\n        nthen: nativePromiseProto.then,\n        gthen: GlobalPromise.prototype.then\n    } : {};\n}\nfunction usePSD(psd, fn, a1, a2, a3) {\n    var outerScope = PSD;\n    try {\n        switchToZone(psd, true);\n        return fn(a1, a2, a3);\n    }\n    finally {\n        switchToZone(outerScope, false);\n    }\n}\nfunction enqueueNativeMicroTask(job) {\n    nativePromiseThen.call(resolvedNativePromise, job);\n}\nfunction nativeAwaitCompatibleWrap(fn, zone, possibleAwait) {\n    return typeof fn !== 'function' ? fn : function () {\n        var outerZone = PSD;\n        if (possibleAwait)\n            incrementExpectedAwaits();\n        switchToZone(zone, true);\n        try {\n            return fn.apply(this, arguments);\n        }\n        finally {\n            switchToZone(outerZone, false);\n        }\n    };\n}\nfunction getPatchedPromiseThen(origThen, zone) {\n    return function (onResolved, onRejected) {\n        return origThen.call(this, nativeAwaitCompatibleWrap(onResolved, zone, false), nativeAwaitCompatibleWrap(onRejected, zone, false));\n    };\n}\nvar UNHANDLEDREJECTION = \"unhandledrejection\";\nfunction globalError(err, promise) {\n    var rv;\n    try {\n        rv = promise.onuncatched(err);\n    }\n    catch (e) { }\n    if (rv !== false)\n        try {\n            var event, eventData = { promise: promise, reason: err };\n            if (_global.document && document.createEvent) {\n                event = document.createEvent('Event');\n                event.initEvent(UNHANDLEDREJECTION, true, true);\n                extend(event, eventData);\n            }\n            else if (_global.CustomEvent) {\n                event = new CustomEvent(UNHANDLEDREJECTION, { detail: eventData });\n                extend(event, eventData);\n            }\n            if (event && _global.dispatchEvent) {\n                dispatchEvent(event);\n                if (!_global.PromiseRejectionEvent && _global.onunhandledrejection)\n                    try {\n                        _global.onunhandledrejection(event);\n                    }\n                    catch (_) { }\n            }\n            if (debug && event && !event.defaultPrevented) {\n                console.warn(\"Unhandled rejection: \" + (err.stack || err));\n            }\n        }\n        catch (e) { }\n}\nvar rejection = Promise$1.reject;\n\nfunction tempTransaction(db, mode, storeNames, fn) {\n    if (!db._state.openComplete && (!PSD.letThrough)) {\n        if (!db._state.isBeingOpened) {\n            if (!db._options.autoOpen)\n                return rejection(new exceptions.DatabaseClosed());\n            db.open().catch(nop);\n        }\n        return db._state.dbReadyPromise.then(function () { return tempTransaction(db, mode, storeNames, fn); });\n    }\n    else {\n        var trans = db._createTransaction(mode, storeNames, db._dbSchema);\n        try {\n            trans.create();\n        }\n        catch (ex) {\n            return rejection(ex);\n        }\n        return trans._promise(mode, function (resolve, reject) {\n            return newScope(function () {\n                PSD.trans = trans;\n                return fn(resolve, reject, trans);\n            });\n        }).then(function (result) {\n            return trans._completion.then(function () { return result; });\n        });\n    }\n}\n\nvar DEXIE_VERSION = '3.0.0-alpha.8';\nvar maxString = String.fromCharCode(65535);\nvar minKey = -Infinity;\nvar INVALID_KEY_ARGUMENT = \"Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.\";\nvar STRING_EXPECTED = \"String expected.\";\nvar connections = [];\nvar isIEOrEdge = typeof navigator !== 'undefined' && /(MSIE|Trident|Edge)/.test(navigator.userAgent);\nvar hasIEDeleteObjectStoreBug = isIEOrEdge;\nvar hangsOnDeleteLargeKeyRange = isIEOrEdge;\nvar dexieStackFrameFilter = function (frame) { return !/(dexie\\.js|dexie\\.min\\.js)/.test(frame); };\nvar DBNAMES_DB = '__dbnames';\nvar READONLY = 'readonly';\nvar READWRITE = 'readwrite';\n\nfunction combine(filter1, filter2) {\n    return filter1 ?\n        filter2 ?\n            function () { return filter1.apply(this, arguments) && filter2.apply(this, arguments); } :\n            filter1 :\n        filter2;\n}\n\nvar AnyRange = {\n    type: 3          ,\n    lower: -Infinity,\n    lowerOpen: false,\n    upper: [[]],\n    upperOpen: false\n};\n\nvar Table =               (function () {\n    function Table() {\n    }\n    Table.prototype._trans = function (mode, fn, writeLocked) {\n        var trans = this._tx || PSD.trans;\n        var tableName = this.name;\n        function checkTableInTransaction(resolve, reject, trans) {\n            if (!trans.schema[tableName])\n                throw new exceptions.NotFound(\"Table \" + tableName + \" not part of transaction\");\n            return fn(trans.idbtrans, trans);\n        }\n        var wasRootExec = beginMicroTickScope();\n        try {\n            return trans && trans.db === this.db ?\n                trans === PSD.trans ?\n                    trans._promise(mode, checkTableInTransaction, writeLocked) :\n                    newScope(function () { return trans._promise(mode, checkTableInTransaction, writeLocked); }, { trans: trans, transless: PSD.transless || PSD }) :\n                tempTransaction(this.db, mode, [this.name], checkTableInTransaction);\n        }\n        finally {\n            if (wasRootExec)\n                endMicroTickScope();\n        }\n    };\n    Table.prototype.get = function (keyOrCrit, cb) {\n        var _this = this;\n        if (keyOrCrit && keyOrCrit.constructor === Object)\n            return this.where(keyOrCrit).first(cb);\n        return this._trans('readonly', function (trans) {\n            return _this.core.get({ trans: trans, key: keyOrCrit })\n                .then(function (res) { return _this.hook.reading.fire(res); });\n        }).then(cb);\n    };\n    Table.prototype.where = function (indexOrCrit) {\n        if (typeof indexOrCrit === 'string')\n            return new this.db.WhereClause(this, indexOrCrit);\n        if (isArray(indexOrCrit))\n            return new this.db.WhereClause(this, \"[\" + indexOrCrit.join('+') + \"]\");\n        var keyPaths = keys(indexOrCrit);\n        if (keyPaths.length === 1)\n            return this\n                .where(keyPaths[0])\n                .equals(indexOrCrit[keyPaths[0]]);\n        var compoundIndex = this.schema.indexes.concat(this.schema.primKey).filter(function (ix) {\n            return ix.compound &&\n                keyPaths.every(function (keyPath) { return ix.keyPath.indexOf(keyPath) >= 0; }) &&\n                ix.keyPath.every(function (keyPath) { return keyPaths.indexOf(keyPath) >= 0; });\n        })[0];\n        if (compoundIndex && this.db._maxKey !== maxString)\n            return this\n                .where(compoundIndex.name)\n                .equals(compoundIndex.keyPath.map(function (kp) { return indexOrCrit[kp]; }));\n        if (!compoundIndex && debug)\n            console.warn(\"The query \" + JSON.stringify(indexOrCrit) + \" on \" + this.name + \" would benefit of a \" +\n                (\"compound index [\" + keyPaths.join('+') + \"]\"));\n        var idxByName = this.schema.idxByName;\n        var idb = this.db._deps.indexedDB;\n        function equals(a, b) {\n            try {\n                return idb.cmp(a, b) === 0;\n            }\n            catch (e) {\n                return false;\n            }\n        }\n        var _a = keyPaths.reduce(function (_a, keyPath) {\n            var prevIndex = _a[0], prevFilterFn = _a[1];\n            var index = idxByName[keyPath];\n            var value = indexOrCrit[keyPath];\n            return [\n                prevIndex || index,\n                prevIndex || !index ?\n                    combine(prevFilterFn, index && index.multi ?\n                        function (x) {\n                            var prop = getByKeyPath(x, keyPath);\n                            return isArray(prop) && prop.some(function (item) { return equals(value, item); });\n                        } : function (x) { return equals(value, getByKeyPath(x, keyPath)); })\n                    : prevFilterFn\n            ];\n        }, [null, null]), idx = _a[0], filterFunction = _a[1];\n        return idx ?\n            this.where(idx.name).equals(indexOrCrit[idx.keyPath])\n                .filter(filterFunction) :\n            compoundIndex ?\n                this.filter(filterFunction) :\n                this.where(keyPaths).equals('');\n    };\n    Table.prototype.filter = function (filterFunction) {\n        return this.toCollection().and(filterFunction);\n    };\n    Table.prototype.count = function (thenShortcut) {\n        return this.toCollection().count(thenShortcut);\n    };\n    Table.prototype.offset = function (offset) {\n        return this.toCollection().offset(offset);\n    };\n    Table.prototype.limit = function (numRows) {\n        return this.toCollection().limit(numRows);\n    };\n    Table.prototype.each = function (callback) {\n        return this.toCollection().each(callback);\n    };\n    Table.prototype.toArray = function (thenShortcut) {\n        return this.toCollection().toArray(thenShortcut);\n    };\n    Table.prototype.toCollection = function () {\n        return new this.db.Collection(new this.db.WhereClause(this));\n    };\n    Table.prototype.orderBy = function (index) {\n        return new this.db.Collection(new this.db.WhereClause(this, isArray(index) ?\n            \"[\" + index.join('+') + \"]\" :\n            index));\n    };\n    Table.prototype.reverse = function () {\n        return this.toCollection().reverse();\n    };\n    Table.prototype.mapToClass = function (constructor) {\n        this.schema.mappedClass = constructor;\n        var readHook = function (obj) {\n            if (!obj)\n                return obj;\n            var res = Object.create(constructor.prototype);\n            for (var m in obj)\n                if (hasOwn(obj, m))\n                    try {\n                        res[m] = obj[m];\n                    }\n                    catch (_) { }\n            return res;\n        };\n        if (this.schema.readHook) {\n            this.hook.reading.unsubscribe(this.schema.readHook);\n        }\n        this.schema.readHook = readHook;\n        this.hook(\"reading\", readHook);\n        return constructor;\n    };\n    Table.prototype.defineClass = function () {\n        function Class(content) {\n            extend(this, content);\n        }\n        \n        return this.mapToClass(Class);\n    };\n    Table.prototype.add = function (obj, key) {\n        var _this = this;\n        return this._trans('readwrite', function (trans) {\n            return _this.core.mutate({ trans: trans, type: 'add', keys: key != null ? [key] : null, values: [obj] });\n        }).then(function (res) { return res.numFailures ? Promise$1.reject(res.failures[0]) : res.lastResult; })\n            .then(function (lastResult) {\n            if (!_this.core.schema.primaryKey.outbound) {\n                try {\n                    setByKeyPath(obj, _this.core.schema.primaryKey.keyPath, lastResult);\n                }\n                catch (_) { }\n                \n            }\n            return lastResult;\n        });\n    };\n    Table.prototype.update = function (keyOrObject, modifications) {\n        if (typeof modifications !== 'object' || isArray(modifications))\n            throw new exceptions.InvalidArgument(\"Modifications must be an object.\");\n        if (typeof keyOrObject === 'object' && !isArray(keyOrObject)) {\n            keys(modifications).forEach(function (keyPath) {\n                setByKeyPath(keyOrObject, keyPath, modifications[keyPath]);\n            });\n            var key = getByKeyPath(keyOrObject, this.schema.primKey.keyPath);\n            if (key === undefined)\n                return rejection(new exceptions.InvalidArgument(\"Given object does not contain its primary key\"));\n            return this.where(\":id\").equals(key).modify(modifications);\n        }\n        else {\n            return this.where(\":id\").equals(keyOrObject).modify(modifications);\n        }\n    };\n    Table.prototype.put = function (obj, key) {\n        var _this = this;\n        return this._trans('readwrite', function (trans) { return _this.core.mutate({ trans: trans, type: 'put', values: [obj], keys: key != null ? [key] : null }); })\n            .then(function (res) { return res.numFailures ? Promise$1.reject(res.failures[0]) : res.lastResult; })\n            .then(function (lastResult) {\n            if (!_this.core.schema.primaryKey.outbound) {\n                try {\n                    setByKeyPath(obj, _this.core.schema.primaryKey.keyPath, lastResult);\n                }\n                catch (_) { }\n                \n            }\n            return lastResult;\n        });\n    };\n    Table.prototype.delete = function (key) {\n        var _this = this;\n        return this._trans('readwrite', function (trans) { return _this.core.mutate({ trans: trans, type: 'delete', keys: [key] }); })\n            .then(function (res) { return res.numFailures ? Promise$1.reject(res.failures[0]) : undefined; });\n    };\n    Table.prototype.clear = function () {\n        var _this = this;\n        return this._trans('readwrite', function (trans) { return _this.core.mutate({ trans: trans, type: 'deleteRange', range: AnyRange }); })\n            .then(function (res) { return res.numFailures ? Promise$1.reject(res.failures[0]) : undefined; });\n    };\n    Table.prototype.bulkGet = function (keys$$1) {\n        var _this = this;\n        return this._trans('readonly', function (trans) {\n            return _this.core.getMany({\n                keys: keys$$1,\n                trans: trans\n            });\n        });\n    };\n    Table.prototype.bulkAdd = function (objects, keys$$1) {\n        var _this = this;\n        return this._trans('readwrite', function (trans) {\n            var outbound = _this.core.schema.primaryKey.outbound;\n            if (!outbound && keys$$1)\n                throw new exceptions.InvalidArgument(\"bulkAdd(): keys argument invalid on tables with inbound keys\");\n            if (keys$$1 && keys$$1.length !== objects.length)\n                throw new exceptions.InvalidArgument(\"Arguments objects and keys must have the same length\");\n            return _this.core.mutate({ trans: trans, type: 'add', keys: keys$$1, values: objects })\n                .then(function (_a) {\n                var numFailures = _a.numFailures, lastResult = _a.lastResult, failures = _a.failures;\n                if (numFailures === 0)\n                    return lastResult;\n                throw new BulkError(_this.name + \".bulkAdd(): \" + numFailures + \" of \" + objects.length + \" operations failed\", Object.keys(failures).map(function (pos) { return failures[pos]; }));\n            });\n        });\n    };\n    Table.prototype.bulkPut = function (objects, keys$$1) {\n        var _this = this;\n        return this._trans('readwrite', function (trans) {\n            var outbound = _this.core.schema.primaryKey.outbound;\n            if (!outbound && keys$$1)\n                throw new exceptions.InvalidArgument(\"bulkPut(): keys argument invalid on tables with inbound keys\");\n            if (keys$$1 && keys$$1.length !== objects.length)\n                throw new exceptions.InvalidArgument(\"Arguments objects and keys must have the same length\");\n            return _this.core.mutate({ trans: trans, type: 'put', keys: keys$$1, values: objects })\n                .then(function (_a) {\n                var numFailures = _a.numFailures, lastResult = _a.lastResult, failures = _a.failures;\n                if (numFailures === 0)\n                    return lastResult;\n                throw new BulkError(_this.name + \".bulkPut(): \" + numFailures + \" of \" + objects.length + \" operations failed\", Object.keys(failures).map(function (pos) { return failures[pos]; }));\n            });\n        });\n    };\n    Table.prototype.bulkDelete = function (keys$$1) {\n        var _this = this;\n        return this._trans('readwrite', function (trans) {\n            return _this.core.mutate({ trans: trans, type: 'delete', keys: keys$$1 });\n        }).then(function (_a) {\n            var numFailures = _a.numFailures, lastResult = _a.lastResult, failures = _a.failures;\n            if (numFailures === 0)\n                return lastResult;\n            throw new BulkError(_this.name + \".bulkDelete(): \" + numFailures + \" of \" + keys$$1.length + \" operations failed\", failures);\n        });\n    };\n    return Table;\n}());\n\nfunction Events(ctx) {\n    var evs = {};\n    var rv = function (eventName, subscriber) {\n        if (subscriber) {\n            var i = arguments.length, args = new Array(i - 1);\n            while (--i)\n                args[i - 1] = arguments[i];\n            evs[eventName].subscribe.apply(null, args);\n            return ctx;\n        }\n        else if (typeof (eventName) === 'string') {\n            return evs[eventName];\n        }\n    };\n    rv.addEventType = add;\n    for (var i = 1, l = arguments.length; i < l; ++i) {\n        add(arguments[i]);\n    }\n    return rv;\n    function add(eventName, chainFunction, defaultFunction) {\n        if (typeof eventName === 'object')\n            return addConfiguredEvents(eventName);\n        if (!chainFunction)\n            chainFunction = reverseStoppableEventChain;\n        if (!defaultFunction)\n            defaultFunction = nop;\n        var context = {\n            subscribers: [],\n            fire: defaultFunction,\n            subscribe: function (cb) {\n                if (context.subscribers.indexOf(cb) === -1) {\n                    context.subscribers.push(cb);\n                    context.fire = chainFunction(context.fire, cb);\n                }\n            },\n            unsubscribe: function (cb) {\n                context.subscribers = context.subscribers.filter(function (fn) { return fn !== cb; });\n                context.fire = context.subscribers.reduce(chainFunction, defaultFunction);\n            }\n        };\n        evs[eventName] = rv[eventName] = context;\n        return context;\n    }\n    function addConfiguredEvents(cfg) {\n        keys(cfg).forEach(function (eventName) {\n            var args = cfg[eventName];\n            if (isArray(args)) {\n                add(eventName, cfg[eventName][0], cfg[eventName][1]);\n            }\n            else if (args === 'asap') {\n                var context = add(eventName, mirror, function fire() {\n                    var i = arguments.length, args = new Array(i);\n                    while (i--)\n                        args[i] = arguments[i];\n                    context.subscribers.forEach(function (fn) {\n                        asap(function fireEvent() {\n                            fn.apply(null, args);\n                        });\n                    });\n                });\n            }\n            else\n                throw new exceptions.InvalidArgument(\"Invalid event config\");\n        });\n    }\n}\n\nfunction makeClassConstructor(prototype, constructor) {\n    derive(constructor).from({ prototype: prototype });\n    return constructor;\n}\n\nfunction createTableConstructor(db) {\n    return makeClassConstructor(Table.prototype, function Table$$1(name, tableSchema, trans) {\n        this.db = db;\n        this._tx = trans;\n        this.name = name;\n        this.schema = tableSchema;\n        this.hook = db._allTables[name] ? db._allTables[name].hook : Events(null, {\n            \"creating\": [hookCreatingChain, nop],\n            \"reading\": [pureFunctionChain, mirror],\n            \"updating\": [hookUpdatingChain, nop],\n            \"deleting\": [hookDeletingChain, nop]\n        });\n    });\n}\n\nfunction isPlainKeyRange(ctx, ignoreLimitFilter) {\n    return !(ctx.filter || ctx.algorithm || ctx.or) &&\n        (ignoreLimitFilter ? ctx.justLimit : !ctx.replayFilter);\n}\nfunction addFilter(ctx, fn) {\n    ctx.filter = combine(ctx.filter, fn);\n}\nfunction addReplayFilter(ctx, factory, isLimitFilter) {\n    var curr = ctx.replayFilter;\n    ctx.replayFilter = curr ? function () { return combine(curr(), factory()); } : factory;\n    ctx.justLimit = isLimitFilter && !curr;\n}\nfunction addMatchFilter(ctx, fn) {\n    ctx.isMatch = combine(ctx.isMatch, fn);\n}\nfunction getIndexOrStore(ctx, coreSchema) {\n    if (ctx.isPrimKey)\n        return coreSchema.primaryKey;\n    var index = coreSchema.getIndexByKeyPath(ctx.index);\n    if (!index)\n        throw new exceptions.Schema(\"KeyPath \" + ctx.index + \" on object store \" + coreSchema.name + \" is not indexed\");\n    return index;\n}\nfunction openCursor(ctx, coreTable, trans) {\n    var index = getIndexOrStore(ctx, coreTable.schema);\n    return coreTable.openCursor({\n        trans: trans,\n        values: !ctx.keysOnly,\n        reverse: ctx.dir === 'prev',\n        unique: !!ctx.unique,\n        query: {\n            index: index,\n            range: ctx.range\n        }\n    });\n}\nfunction iter(ctx, fn, coreTrans, coreTable) {\n    var filter = ctx.replayFilter ? combine(ctx.filter, ctx.replayFilter()) : ctx.filter;\n    if (!ctx.or) {\n        return iterate(openCursor(ctx, coreTable, coreTrans), combine(ctx.algorithm, filter), fn, !ctx.keysOnly && ctx.valueMapper);\n    }\n    else {\n        var set_1 = {};\n        var union = function (item, cursor, advance) {\n            if (!filter || filter(cursor, advance, function (result) { return cursor.stop(result); }, function (err) { return cursor.fail(err); })) {\n                var primaryKey = cursor.primaryKey;\n                var key = '' + primaryKey;\n                if (key === '[object ArrayBuffer]')\n                    key = '' + new Uint8Array(primaryKey);\n                if (!hasOwn(set_1, key)) {\n                    set_1[key] = true;\n                    fn(item, cursor, advance);\n                }\n            }\n        };\n        return Promise.all([\n            ctx.or._iterate(union, coreTrans),\n            iterate(openCursor(ctx, coreTable, coreTrans), ctx.algorithm, union, !ctx.keysOnly && ctx.valueMapper)\n        ]);\n    }\n}\nfunction iterate(cursorPromise, filter, fn, valueMapper) {\n    var mappedFn = valueMapper ? function (x, c, a) { return fn(valueMapper(x), c, a); } : fn;\n    var wrappedFn = wrap(mappedFn);\n    return cursorPromise.then(function (cursor) {\n        if (cursor) {\n            return cursor.start(function () {\n                var c = function () { return cursor.continue(); };\n                if (!filter || filter(cursor, function (advancer) { return c = advancer; }, function (val) { cursor.stop(val); c = nop; }, function (e) { cursor.fail(e); c = nop; }))\n                    wrappedFn(cursor.value, cursor, function (advancer) { return c = advancer; });\n                c();\n            });\n        }\n    });\n}\n\nvar Collection =               (function () {\n    function Collection() {\n    }\n    Collection.prototype._read = function (fn, cb) {\n        var ctx = this._ctx;\n        return ctx.error ?\n            ctx.table._trans(null, rejection.bind(null, ctx.error)) :\n            ctx.table._trans('readonly', fn).then(cb);\n    };\n    Collection.prototype._write = function (fn) {\n        var ctx = this._ctx;\n        return ctx.error ?\n            ctx.table._trans(null, rejection.bind(null, ctx.error)) :\n            ctx.table._trans('readwrite', fn, \"locked\");\n    };\n    Collection.prototype._addAlgorithm = function (fn) {\n        var ctx = this._ctx;\n        ctx.algorithm = combine(ctx.algorithm, fn);\n    };\n    Collection.prototype._iterate = function (fn, coreTrans) {\n        return iter(this._ctx, fn, coreTrans, this._ctx.table.core);\n    };\n    Collection.prototype.clone = function (props$$1) {\n        var rv = Object.create(this.constructor.prototype), ctx = Object.create(this._ctx);\n        if (props$$1)\n            extend(ctx, props$$1);\n        rv._ctx = ctx;\n        return rv;\n    };\n    Collection.prototype.raw = function () {\n        this._ctx.valueMapper = null;\n        return this;\n    };\n    Collection.prototype.each = function (fn) {\n        var ctx = this._ctx;\n        return this._read(function (trans) { return iter(ctx, fn, trans, ctx.table.core); });\n    };\n    Collection.prototype.count = function (cb) {\n        var _this = this;\n        return this._read(function (trans) {\n            var ctx = _this._ctx;\n            var coreTable = ctx.table.core;\n            if (isPlainKeyRange(ctx, true)) {\n                return coreTable.count({\n                    trans: trans,\n                    query: {\n                        index: getIndexOrStore(ctx, coreTable.schema),\n                        range: ctx.range\n                    }\n                }).then(function (count) { return Math.min(count, ctx.limit); });\n            }\n            else {\n                var count = 0;\n                return iter(ctx, function () { ++count; return false; }, trans, coreTable)\n                    .then(function () { return count; });\n            }\n        }).then(cb);\n    };\n    Collection.prototype.sortBy = function (keyPath, cb) {\n        var parts = keyPath.split('.').reverse(), lastPart = parts[0], lastIndex = parts.length - 1;\n        function getval(obj, i) {\n            if (i)\n                return getval(obj[parts[i]], i - 1);\n            return obj[lastPart];\n        }\n        var order = this._ctx.dir === \"next\" ? 1 : -1;\n        function sorter(a, b) {\n            var aVal = getval(a, lastIndex), bVal = getval(b, lastIndex);\n            return aVal < bVal ? -order : aVal > bVal ? order : 0;\n        }\n        return this.toArray(function (a) {\n            return a.sort(sorter);\n        }).then(cb);\n    };\n    Collection.prototype.toArray = function (cb) {\n        var _this = this;\n        return this._read(function (trans) {\n            var ctx = _this._ctx;\n            if (ctx.dir === 'next' && isPlainKeyRange(ctx, true) && ctx.limit > 0) {\n                var valueMapper_1 = ctx.valueMapper;\n                var index = getIndexOrStore(ctx, ctx.table.core.schema);\n                return ctx.table.core.query({\n                    trans: trans,\n                    limit: ctx.limit,\n                    values: true,\n                    query: {\n                        index: index,\n                        range: ctx.range\n                    }\n                }).then(function (_a) {\n                    var result = _a.result;\n                    return valueMapper_1 ? result.map(valueMapper_1) : result;\n                });\n            }\n            else {\n                var a_1 = [];\n                return iter(ctx, function (item) { return a_1.push(item); }, trans, ctx.table.core).then(function () { return a_1; });\n            }\n        }, cb);\n    };\n    Collection.prototype.offset = function (offset) {\n        var ctx = this._ctx;\n        if (offset <= 0)\n            return this;\n        ctx.offset += offset;\n        if (isPlainKeyRange(ctx)) {\n            addReplayFilter(ctx, function () {\n                var offsetLeft = offset;\n                return function (cursor, advance) {\n                    if (offsetLeft === 0)\n                        return true;\n                    if (offsetLeft === 1) {\n                        --offsetLeft;\n                        return false;\n                    }\n                    advance(function () {\n                        cursor.advance(offsetLeft);\n                        offsetLeft = 0;\n                    });\n                    return false;\n                };\n            });\n        }\n        else {\n            addReplayFilter(ctx, function () {\n                var offsetLeft = offset;\n                return function () { return (--offsetLeft < 0); };\n            });\n        }\n        return this;\n    };\n    Collection.prototype.limit = function (numRows) {\n        this._ctx.limit = Math.min(this._ctx.limit, numRows);\n        addReplayFilter(this._ctx, function () {\n            var rowsLeft = numRows;\n            return function (cursor, advance, resolve) {\n                if (--rowsLeft <= 0)\n                    advance(resolve);\n                return rowsLeft >= 0;\n            };\n        }, true);\n        return this;\n    };\n    Collection.prototype.until = function (filterFunction, bIncludeStopEntry) {\n        addFilter(this._ctx, function (cursor, advance, resolve) {\n            if (filterFunction(cursor.value)) {\n                advance(resolve);\n                return bIncludeStopEntry;\n            }\n            else {\n                return true;\n            }\n        });\n        return this;\n    };\n    Collection.prototype.first = function (cb) {\n        return this.limit(1).toArray(function (a) { return a[0]; }).then(cb);\n    };\n    Collection.prototype.last = function (cb) {\n        return this.reverse().first(cb);\n    };\n    Collection.prototype.filter = function (filterFunction) {\n        addFilter(this._ctx, function (cursor) {\n            return filterFunction(cursor.value);\n        });\n        addMatchFilter(this._ctx, filterFunction);\n        return this;\n    };\n    Collection.prototype.and = function (filter) {\n        return this.filter(filter);\n    };\n    Collection.prototype.or = function (indexName) {\n        return new this.db.WhereClause(this._ctx.table, indexName, this);\n    };\n    Collection.prototype.reverse = function () {\n        this._ctx.dir = (this._ctx.dir === \"prev\" ? \"next\" : \"prev\");\n        if (this._ondirectionchange)\n            this._ondirectionchange(this._ctx.dir);\n        return this;\n    };\n    Collection.prototype.desc = function () {\n        return this.reverse();\n    };\n    Collection.prototype.eachKey = function (cb) {\n        var ctx = this._ctx;\n        ctx.keysOnly = !ctx.isMatch;\n        return this.each(function (val, cursor) { cb(cursor.key, cursor); });\n    };\n    Collection.prototype.eachUniqueKey = function (cb) {\n        this._ctx.unique = \"unique\";\n        return this.eachKey(cb);\n    };\n    Collection.prototype.eachPrimaryKey = function (cb) {\n        var ctx = this._ctx;\n        ctx.keysOnly = !ctx.isMatch;\n        return this.each(function (val, cursor) { cb(cursor.primaryKey, cursor); });\n    };\n    Collection.prototype.keys = function (cb) {\n        var ctx = this._ctx;\n        ctx.keysOnly = !ctx.isMatch;\n        var a = [];\n        return this.each(function (item, cursor) {\n            a.push(cursor.key);\n        }).then(function () {\n            return a;\n        }).then(cb);\n    };\n    Collection.prototype.primaryKeys = function (cb) {\n        var ctx = this._ctx;\n        if (ctx.dir === 'next' && isPlainKeyRange(ctx, true) && ctx.limit > 0) {\n            return this._read(function (trans) {\n                var index = getIndexOrStore(ctx, ctx.table.core.schema);\n                return ctx.table.core.query({\n                    trans: trans,\n                    values: false,\n                    limit: ctx.limit,\n                    query: {\n                        index: index,\n                        range: ctx.range\n                    }\n                });\n            }).then(function (_a) {\n                var result = _a.result;\n                return result;\n            }).then(cb);\n        }\n        ctx.keysOnly = !ctx.isMatch;\n        var a = [];\n        return this.each(function (item, cursor) {\n            a.push(cursor.primaryKey);\n        }).then(function () {\n            return a;\n        }).then(cb);\n    };\n    Collection.prototype.uniqueKeys = function (cb) {\n        this._ctx.unique = \"unique\";\n        return this.keys(cb);\n    };\n    Collection.prototype.firstKey = function (cb) {\n        return this.limit(1).keys(function (a) { return a[0]; }).then(cb);\n    };\n    Collection.prototype.lastKey = function (cb) {\n        return this.reverse().firstKey(cb);\n    };\n    Collection.prototype.distinct = function () {\n        var ctx = this._ctx, idx = ctx.index && ctx.table.schema.idxByName[ctx.index];\n        if (!idx || !idx.multi)\n            return this;\n        var set = {};\n        addFilter(this._ctx, function (cursor) {\n            var strKey = cursor.primaryKey.toString();\n            var found = hasOwn(set, strKey);\n            set[strKey] = true;\n            return !found;\n        });\n        return this;\n    };\n    Collection.prototype.modify = function (changes) {\n        var _this = this;\n        var ctx = this._ctx;\n        return this._write(function (trans) {\n            var modifyer;\n            if (typeof changes === 'function') {\n                modifyer = changes;\n            }\n            else {\n                var keyPaths = keys(changes);\n                var numKeys = keyPaths.length;\n                modifyer = function (item) {\n                    var anythingModified = false;\n                    for (var i = 0; i < numKeys; ++i) {\n                        var keyPath = keyPaths[i], val = changes[keyPath];\n                        if (getByKeyPath(item, keyPath) !== val) {\n                            setByKeyPath(item, keyPath, val);\n                            anythingModified = true;\n                        }\n                    }\n                    return anythingModified;\n                };\n            }\n            var coreTable = ctx.table.core;\n            var _a = coreTable.schema.primaryKey, outbound = _a.outbound, extractKey = _a.extractKey;\n            var limit = 'testmode' in Dexie ? 1 : 2000;\n            var cmp = _this.db.core.cmp;\n            var totalFailures = [];\n            var successCount = 0;\n            var failedKeys = [];\n            var applyMutateResult = function (expectedCount, res) {\n                var failures = res.failures, numFailures = res.numFailures;\n                successCount += expectedCount - numFailures;\n                for (var pos in failures) {\n                    totalFailures.push(failures[pos]);\n                }\n            };\n            return _this.clone().primaryKeys().then(function (keys$$1) {\n                var nextChunk = function (offset) {\n                    var count = Math.min(limit, keys$$1.length - offset);\n                    return coreTable.getMany({ trans: trans, keys: keys$$1.slice(offset, offset + count) }).then(function (values) {\n                        var addValues = [];\n                        var putValues = [];\n                        var putKeys = outbound ? [] : null;\n                        var deleteKeys = [];\n                        for (var i = 0; i < count; ++i) {\n                            var origValue = values[i];\n                            var ctx_1 = {\n                                value: deepClone(origValue),\n                                primKey: keys$$1[offset + i]\n                            };\n                            if (modifyer.call(ctx_1, ctx_1.value, ctx_1) !== false) {\n                                if (ctx_1.value == null) {\n                                    deleteKeys.push(keys$$1[offset + i]);\n                                }\n                                else if (!outbound && cmp(extractKey(origValue), extractKey(ctx_1.value)) !== 0) {\n                                    deleteKeys.push(keys$$1[offset + i]);\n                                    addValues.push(ctx_1.value);\n                                }\n                                else {\n                                    putValues.push(ctx_1.value);\n                                    if (outbound)\n                                        putKeys.push(keys$$1[offset + i]);\n                                }\n                            }\n                        }\n                        return Promise.resolve(addValues.length > 0 &&\n                            coreTable.mutate({ trans: trans, type: 'add', values: addValues })\n                                .then(function (res) {\n                                for (var pos in res.failures) {\n                                    deleteKeys.splice(parseInt(pos), 1);\n                                }\n                                applyMutateResult(addValues.length, res);\n                            })).then(function (res) { return putValues.length > 0 &&\n                            coreTable.mutate({ trans: trans, type: 'put', keys: putKeys, values: putValues })\n                                .then(function (res) { return applyMutateResult(putValues.length, res); }); }).then(function () { return deleteKeys.length > 0 &&\n                            coreTable.mutate({ trans: trans, type: 'delete', keys: deleteKeys })\n                                .then(function (res) { return applyMutateResult(deleteKeys.length, res); }); }).then(function () {\n                            return keys$$1.length > offset + count && nextChunk(offset + limit);\n                        });\n                    });\n                };\n                return nextChunk(0).then(function () {\n                    if (totalFailures.length > 0)\n                        throw new ModifyError(\"Error modifying one or more objects\", totalFailures, successCount, failedKeys);\n                    return keys$$1.length;\n                });\n            });\n        });\n    };\n    Collection.prototype.delete = function () {\n        var ctx = this._ctx, range = ctx.range;\n        if (isPlainKeyRange(ctx) &&\n            ((ctx.isPrimKey && !hangsOnDeleteLargeKeyRange) || range.type === 3          ))\n         {\n            return this._write(function (trans) {\n                var primaryKey = ctx.table.core.schema.primaryKey;\n                var coreRange = range;\n                return ctx.table.core.count({ trans: trans, query: { index: primaryKey, range: coreRange } }).then(function (count) {\n                    return ctx.table.core.mutate({ trans: trans, type: 'deleteRange', range: coreRange })\n                        .then(function (_a) {\n                        var failures = _a.failures, lastResult = _a.lastResult, results = _a.results, numFailures = _a.numFailures;\n                        if (numFailures)\n                            throw new ModifyError(\"Could not delete some values\", Object.keys(failures).map(function (pos) { return failures[pos]; }), count - numFailures);\n                        return count - numFailures;\n                    });\n                });\n            });\n        }\n        return this.modify(function (value, ctx) { return ctx.value = null; });\n    };\n    return Collection;\n}());\n\nfunction createCollectionConstructor(db) {\n    return makeClassConstructor(Collection.prototype, function Collection$$1(whereClause, keyRangeGenerator) {\n        this.db = db;\n        var keyRange = AnyRange, error = null;\n        if (keyRangeGenerator)\n            try {\n                keyRange = keyRangeGenerator();\n            }\n            catch (ex) {\n                error = ex;\n            }\n        var whereCtx = whereClause._ctx;\n        var table = whereCtx.table;\n        var readingHook = table.hook.reading.fire;\n        this._ctx = {\n            table: table,\n            index: whereCtx.index,\n            isPrimKey: (!whereCtx.index || (table.schema.primKey.keyPath && whereCtx.index === table.schema.primKey.name)),\n            range: keyRange,\n            keysOnly: false,\n            dir: \"next\",\n            unique: \"\",\n            algorithm: null,\n            filter: null,\n            replayFilter: null,\n            justLimit: true,\n            isMatch: null,\n            offset: 0,\n            limit: Infinity,\n            error: error,\n            or: whereCtx.or,\n            valueMapper: readingHook !== mirror ? readingHook : null\n        };\n    });\n}\n\nfunction simpleCompare(a, b) {\n    return a < b ? -1 : a === b ? 0 : 1;\n}\nfunction simpleCompareReverse(a, b) {\n    return a > b ? -1 : a === b ? 0 : 1;\n}\n\nfunction fail(collectionOrWhereClause, err, T) {\n    var collection = collectionOrWhereClause instanceof WhereClause ?\n        new collectionOrWhereClause.Collection(collectionOrWhereClause) :\n        collectionOrWhereClause;\n    collection._ctx.error = T ? new T(err) : new TypeError(err);\n    return collection;\n}\nfunction emptyCollection(whereClause) {\n    return new whereClause.Collection(whereClause, function () { return rangeEqual(\"\"); }).limit(0);\n}\nfunction upperFactory(dir) {\n    return dir === \"next\" ?\n        function (s) { return s.toUpperCase(); } :\n        function (s) { return s.toLowerCase(); };\n}\nfunction lowerFactory(dir) {\n    return dir === \"next\" ?\n        function (s) { return s.toLowerCase(); } :\n        function (s) { return s.toUpperCase(); };\n}\nfunction nextCasing(key, lowerKey, upperNeedle, lowerNeedle, cmp, dir) {\n    var length = Math.min(key.length, lowerNeedle.length);\n    var llp = -1;\n    for (var i = 0; i < length; ++i) {\n        var lwrKeyChar = lowerKey[i];\n        if (lwrKeyChar !== lowerNeedle[i]) {\n            if (cmp(key[i], upperNeedle[i]) < 0)\n                return key.substr(0, i) + upperNeedle[i] + upperNeedle.substr(i + 1);\n            if (cmp(key[i], lowerNeedle[i]) < 0)\n                return key.substr(0, i) + lowerNeedle[i] + upperNeedle.substr(i + 1);\n            if (llp >= 0)\n                return key.substr(0, llp) + lowerKey[llp] + upperNeedle.substr(llp + 1);\n            return null;\n        }\n        if (cmp(key[i], lwrKeyChar) < 0)\n            llp = i;\n    }\n    if (length < lowerNeedle.length && dir === \"next\")\n        return key + upperNeedle.substr(key.length);\n    if (length < key.length && dir === \"prev\")\n        return key.substr(0, upperNeedle.length);\n    return (llp < 0 ? null : key.substr(0, llp) + lowerNeedle[llp] + upperNeedle.substr(llp + 1));\n}\nfunction addIgnoreCaseAlgorithm(whereClause, match, needles, suffix) {\n    var upper, lower, compare, upperNeedles, lowerNeedles, direction, nextKeySuffix, needlesLen = needles.length;\n    if (!needles.every(function (s) { return typeof s === 'string'; })) {\n        return fail(whereClause, STRING_EXPECTED);\n    }\n    function initDirection(dir) {\n        upper = upperFactory(dir);\n        lower = lowerFactory(dir);\n        compare = (dir === \"next\" ? simpleCompare : simpleCompareReverse);\n        var needleBounds = needles.map(function (needle) {\n            return { lower: lower(needle), upper: upper(needle) };\n        }).sort(function (a, b) {\n            return compare(a.lower, b.lower);\n        });\n        upperNeedles = needleBounds.map(function (nb) { return nb.upper; });\n        lowerNeedles = needleBounds.map(function (nb) { return nb.lower; });\n        direction = dir;\n        nextKeySuffix = (dir === \"next\" ? \"\" : suffix);\n    }\n    initDirection(\"next\");\n    var c = new whereClause.Collection(whereClause, function () { return createRange(upperNeedles[0], lowerNeedles[needlesLen - 1] + suffix); });\n    c._ondirectionchange = function (direction) {\n        initDirection(direction);\n    };\n    var firstPossibleNeedle = 0;\n    c._addAlgorithm(function (cursor, advance, resolve) {\n        var key = cursor.key;\n        if (typeof key !== 'string')\n            return false;\n        var lowerKey = lower(key);\n        if (match(lowerKey, lowerNeedles, firstPossibleNeedle)) {\n            return true;\n        }\n        else {\n            var lowestPossibleCasing = null;\n            for (var i = firstPossibleNeedle; i < needlesLen; ++i) {\n                var casing = nextCasing(key, lowerKey, upperNeedles[i], lowerNeedles[i], compare, direction);\n                if (casing === null && lowestPossibleCasing === null)\n                    firstPossibleNeedle = i + 1;\n                else if (lowestPossibleCasing === null || compare(lowestPossibleCasing, casing) > 0) {\n                    lowestPossibleCasing = casing;\n                }\n            }\n            if (lowestPossibleCasing !== null) {\n                advance(function () { cursor.continue(lowestPossibleCasing + nextKeySuffix); });\n            }\n            else {\n                advance(resolve);\n            }\n            return false;\n        }\n    });\n    return c;\n}\nfunction createRange(lower, upper, lowerOpen, upperOpen) {\n    return {\n        type: 2            ,\n        lower: lower,\n        upper: upper,\n        lowerOpen: lowerOpen,\n        upperOpen: upperOpen\n    };\n}\nfunction rangeEqual(value) {\n    return {\n        type: 1            ,\n        lower: value,\n        upper: value\n    };\n}\n\nvar WhereClause =               (function () {\n    function WhereClause() {\n    }\n    Object.defineProperty(WhereClause.prototype, \"Collection\", {\n        get: function () {\n            return this._ctx.table.db.Collection;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    WhereClause.prototype.between = function (lower, upper, includeLower, includeUpper) {\n        includeLower = includeLower !== false;\n        includeUpper = includeUpper === true;\n        try {\n            if ((this._cmp(lower, upper) > 0) ||\n                (this._cmp(lower, upper) === 0 && (includeLower || includeUpper) && !(includeLower && includeUpper)))\n                return emptyCollection(this);\n            return new this.Collection(this, function () { return createRange(lower, upper, !includeLower, !includeUpper); });\n        }\n        catch (e) {\n            return fail(this, INVALID_KEY_ARGUMENT);\n        }\n    };\n    WhereClause.prototype.equals = function (value) {\n        return new this.Collection(this, function () { return rangeEqual(value); });\n    };\n    WhereClause.prototype.above = function (value) {\n        if (value == null)\n            return fail(this, INVALID_KEY_ARGUMENT);\n        return new this.Collection(this, function () { return createRange(value, undefined, true); });\n    };\n    WhereClause.prototype.aboveOrEqual = function (value) {\n        if (value == null)\n            return fail(this, INVALID_KEY_ARGUMENT);\n        return new this.Collection(this, function () { return createRange(value, undefined, false); });\n    };\n    WhereClause.prototype.below = function (value) {\n        if (value == null)\n            return fail(this, INVALID_KEY_ARGUMENT);\n        return new this.Collection(this, function () { return createRange(undefined, value, false, true); });\n    };\n    WhereClause.prototype.belowOrEqual = function (value) {\n        if (value == null)\n            return fail(this, INVALID_KEY_ARGUMENT);\n        return new this.Collection(this, function () { return createRange(undefined, value); });\n    };\n    WhereClause.prototype.startsWith = function (str) {\n        if (typeof str !== 'string')\n            return fail(this, STRING_EXPECTED);\n        return this.between(str, str + maxString, true, true);\n    };\n    WhereClause.prototype.startsWithIgnoreCase = function (str) {\n        if (str === \"\")\n            return this.startsWith(str);\n        return addIgnoreCaseAlgorithm(this, function (x, a) { return x.indexOf(a[0]) === 0; }, [str], maxString);\n    };\n    WhereClause.prototype.equalsIgnoreCase = function (str) {\n        return addIgnoreCaseAlgorithm(this, function (x, a) { return x === a[0]; }, [str], \"\");\n    };\n    WhereClause.prototype.anyOfIgnoreCase = function () {\n        var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n        if (set.length === 0)\n            return emptyCollection(this);\n        return addIgnoreCaseAlgorithm(this, function (x, a) { return a.indexOf(x) !== -1; }, set, \"\");\n    };\n    WhereClause.prototype.startsWithAnyOfIgnoreCase = function () {\n        var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n        if (set.length === 0)\n            return emptyCollection(this);\n        return addIgnoreCaseAlgorithm(this, function (x, a) { return a.some(function (n) { return x.indexOf(n) === 0; }); }, set, maxString);\n    };\n    WhereClause.prototype.anyOf = function () {\n        var _this = this;\n        var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n        var compare = this._cmp;\n        try {\n            set.sort(compare);\n        }\n        catch (e) {\n            return fail(this, INVALID_KEY_ARGUMENT);\n        }\n        if (set.length === 0)\n            return emptyCollection(this);\n        var c = new this.Collection(this, function () { return createRange(set[0], set[set.length - 1]); });\n        c._ondirectionchange = function (direction) {\n            compare = (direction === \"next\" ?\n                _this._ascending :\n                _this._descending);\n            set.sort(compare);\n        };\n        var i = 0;\n        c._addAlgorithm(function (cursor, advance, resolve) {\n            var key = cursor.key;\n            while (compare(key, set[i]) > 0) {\n                ++i;\n                if (i === set.length) {\n                    advance(resolve);\n                    return false;\n                }\n            }\n            if (compare(key, set[i]) === 0) {\n                return true;\n            }\n            else {\n                advance(function () { cursor.continue(set[i]); });\n                return false;\n            }\n        });\n        return c;\n    };\n    WhereClause.prototype.notEqual = function (value) {\n        return this.inAnyRange([[minKey, value], [value, this.db._maxKey]], { includeLowers: false, includeUppers: false });\n    };\n    WhereClause.prototype.noneOf = function () {\n        var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n        if (set.length === 0)\n            return new this.Collection(this);\n        try {\n            set.sort(this._ascending);\n        }\n        catch (e) {\n            return fail(this, INVALID_KEY_ARGUMENT);\n        }\n        var ranges = set.reduce(function (res, val) { return res ?\n            res.concat([[res[res.length - 1][1], val]]) :\n            [[minKey, val]]; }, null);\n        ranges.push([set[set.length - 1], this.db._maxKey]);\n        return this.inAnyRange(ranges, { includeLowers: false, includeUppers: false });\n    };\n    WhereClause.prototype.inAnyRange = function (ranges, options) {\n        var _this = this;\n        var cmp = this._cmp, ascending = this._ascending, descending = this._descending, min = this._min, max = this._max;\n        if (ranges.length === 0)\n            return emptyCollection(this);\n        if (!ranges.every(function (range) {\n            return range[0] !== undefined &&\n                range[1] !== undefined &&\n                ascending(range[0], range[1]) <= 0;\n        })) {\n            return fail(this, \"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower\", exceptions.InvalidArgument);\n        }\n        var includeLowers = !options || options.includeLowers !== false;\n        var includeUppers = options && options.includeUppers === true;\n        function addRange(ranges, newRange) {\n            var i = 0, l = ranges.length;\n            for (; i < l; ++i) {\n                var range = ranges[i];\n                if (cmp(newRange[0], range[1]) < 0 && cmp(newRange[1], range[0]) > 0) {\n                    range[0] = min(range[0], newRange[0]);\n                    range[1] = max(range[1], newRange[1]);\n                    break;\n                }\n            }\n            if (i === l)\n                ranges.push(newRange);\n            return ranges;\n        }\n        var sortDirection = ascending;\n        function rangeSorter(a, b) { return sortDirection(a[0], b[0]); }\n        var set;\n        try {\n            set = ranges.reduce(addRange, []);\n            set.sort(rangeSorter);\n        }\n        catch (ex) {\n            return fail(this, INVALID_KEY_ARGUMENT);\n        }\n        var rangePos = 0;\n        var keyIsBeyondCurrentEntry = includeUppers ?\n            function (key) { return ascending(key, set[rangePos][1]) > 0; } :\n            function (key) { return ascending(key, set[rangePos][1]) >= 0; };\n        var keyIsBeforeCurrentEntry = includeLowers ?\n            function (key) { return descending(key, set[rangePos][0]) > 0; } :\n            function (key) { return descending(key, set[rangePos][0]) >= 0; };\n        function keyWithinCurrentRange(key) {\n            return !keyIsBeyondCurrentEntry(key) && !keyIsBeforeCurrentEntry(key);\n        }\n        var checkKey = keyIsBeyondCurrentEntry;\n        var c = new this.Collection(this, function () { return createRange(set[0][0], set[set.length - 1][1], !includeLowers, !includeUppers); });\n        c._ondirectionchange = function (direction) {\n            if (direction === \"next\") {\n                checkKey = keyIsBeyondCurrentEntry;\n                sortDirection = ascending;\n            }\n            else {\n                checkKey = keyIsBeforeCurrentEntry;\n                sortDirection = descending;\n            }\n            set.sort(rangeSorter);\n        };\n        c._addAlgorithm(function (cursor, advance, resolve) {\n            var key = cursor.key;\n            while (checkKey(key)) {\n                ++rangePos;\n                if (rangePos === set.length) {\n                    advance(resolve);\n                    return false;\n                }\n            }\n            if (keyWithinCurrentRange(key)) {\n                return true;\n            }\n            else if (_this._cmp(key, set[rangePos][1]) === 0 || _this._cmp(key, set[rangePos][0]) === 0) {\n                return false;\n            }\n            else {\n                advance(function () {\n                    if (sortDirection === ascending)\n                        cursor.continue(set[rangePos][0]);\n                    else\n                        cursor.continue(set[rangePos][1]);\n                });\n                return false;\n            }\n        });\n        return c;\n    };\n    WhereClause.prototype.startsWithAnyOf = function () {\n        var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n        if (!set.every(function (s) { return typeof s === 'string'; })) {\n            return fail(this, \"startsWithAnyOf() only works with strings\");\n        }\n        if (set.length === 0)\n            return emptyCollection(this);\n        return this.inAnyRange(set.map(function (str) { return [str, str + maxString]; }));\n    };\n    return WhereClause;\n}());\n\nfunction createWhereClauseConstructor(db) {\n    return makeClassConstructor(WhereClause.prototype, function WhereClause$$1(table, index, orCollection) {\n        this.db = db;\n        this._ctx = {\n            table: table,\n            index: index === \":id\" ? null : index,\n            or: orCollection\n        };\n        var indexedDB = db._deps.indexedDB;\n        if (!indexedDB)\n            throw new exceptions.MissingAPI(\"indexedDB API missing\");\n        this._cmp = this._ascending = indexedDB.cmp.bind(indexedDB);\n        this._descending = function (a, b) { return indexedDB.cmp(b, a); };\n        this._max = function (a, b) { return indexedDB.cmp(a, b) > 0 ? a : b; };\n        this._min = function (a, b) { return indexedDB.cmp(a, b) < 0 ? a : b; };\n        this._IDBKeyRange = db._deps.IDBKeyRange;\n    });\n}\n\nfunction safariMultiStoreFix(storeNames) {\n    return storeNames.length === 1 ? storeNames[0] : storeNames;\n}\n\nfunction getMaxKey(IdbKeyRange) {\n    try {\n        IdbKeyRange.only([[]]);\n        return [[]];\n    }\n    catch (e) {\n        return maxString;\n    }\n}\n\nfunction eventRejectHandler(reject) {\n    return wrap(function (event) {\n        preventDefault(event);\n        reject(event.target.error);\n        return false;\n    });\n}\n\n\n\nfunction preventDefault(event) {\n    if (event.stopPropagation)\n        event.stopPropagation();\n    if (event.preventDefault)\n        event.preventDefault();\n}\n\nvar Transaction =               (function () {\n    function Transaction() {\n    }\n    Transaction.prototype._lock = function () {\n        assert(!PSD.global);\n        ++this._reculock;\n        if (this._reculock === 1 && !PSD.global)\n            PSD.lockOwnerFor = this;\n        return this;\n    };\n    Transaction.prototype._unlock = function () {\n        assert(!PSD.global);\n        if (--this._reculock === 0) {\n            if (!PSD.global)\n                PSD.lockOwnerFor = null;\n            while (this._blockedFuncs.length > 0 && !this._locked()) {\n                var fnAndPSD = this._blockedFuncs.shift();\n                try {\n                    usePSD(fnAndPSD[1], fnAndPSD[0]);\n                }\n                catch (e) { }\n            }\n        }\n        return this;\n    };\n    Transaction.prototype._locked = function () {\n        return this._reculock && PSD.lockOwnerFor !== this;\n    };\n    Transaction.prototype.create = function (idbtrans) {\n        var _this = this;\n        if (!this.mode)\n            return this;\n        var idbdb = this.db.idbdb;\n        var dbOpenError = this.db._state.dbOpenError;\n        assert(!this.idbtrans);\n        if (!idbtrans && !idbdb) {\n            switch (dbOpenError && dbOpenError.name) {\n                case \"DatabaseClosedError\":\n                    throw new exceptions.DatabaseClosed(dbOpenError);\n                case \"MissingAPIError\":\n                    throw new exceptions.MissingAPI(dbOpenError.message, dbOpenError);\n                default:\n                    throw new exceptions.OpenFailed(dbOpenError);\n            }\n        }\n        if (!this.active)\n            throw new exceptions.TransactionInactive();\n        assert(this._completion._state === null);\n        idbtrans = this.idbtrans = idbtrans || idbdb.transaction(safariMultiStoreFix(this.storeNames), this.mode);\n        idbtrans.onerror = wrap(function (ev) {\n            preventDefault(ev);\n            _this._reject(idbtrans.error);\n        });\n        idbtrans.onabort = wrap(function (ev) {\n            preventDefault(ev);\n            _this.active && _this._reject(new exceptions.Abort(idbtrans.error));\n            _this.active = false;\n            _this.on(\"abort\").fire(ev);\n        });\n        idbtrans.oncomplete = wrap(function () {\n            _this.active = false;\n            _this._resolve();\n        });\n        return this;\n    };\n    Transaction.prototype._promise = function (mode, fn, bWriteLock) {\n        var _this = this;\n        if (mode === 'readwrite' && this.mode !== 'readwrite')\n            return rejection(new exceptions.ReadOnly(\"Transaction is readonly\"));\n        if (!this.active)\n            return rejection(new exceptions.TransactionInactive());\n        if (this._locked()) {\n            return new Promise$1(function (resolve, reject) {\n                _this._blockedFuncs.push([function () {\n                        _this._promise(mode, fn, bWriteLock).then(resolve, reject);\n                    }, PSD]);\n            });\n        }\n        else if (bWriteLock) {\n            return newScope(function () {\n                var p = new Promise$1(function (resolve, reject) {\n                    _this._lock();\n                    var rv = fn(resolve, reject, _this);\n                    if (rv && rv.then)\n                        rv.then(resolve, reject);\n                });\n                p.finally(function () { return _this._unlock(); });\n                p._lib = true;\n                return p;\n            });\n        }\n        else {\n            var p = new Promise$1(function (resolve, reject) {\n                var rv = fn(resolve, reject, _this);\n                if (rv && rv.then)\n                    rv.then(resolve, reject);\n            });\n            p._lib = true;\n            return p;\n        }\n    };\n    Transaction.prototype._root = function () {\n        return this.parent ? this.parent._root() : this;\n    };\n    Transaction.prototype.waitFor = function (promiseLike) {\n        var root = this._root();\n        var promise = Promise$1.resolve(promiseLike);\n        if (root._waitingFor) {\n            root._waitingFor = root._waitingFor.then(function () { return promise; });\n        }\n        else {\n            root._waitingFor = promise;\n            root._waitingQueue = [];\n            var store = root.idbtrans.objectStore(root.storeNames[0]);\n            (function spin() {\n                ++root._spinCount;\n                while (root._waitingQueue.length)\n                    (root._waitingQueue.shift())();\n                if (root._waitingFor)\n                    store.get(-Infinity).onsuccess = spin;\n            }());\n        }\n        var currentWaitPromise = root._waitingFor;\n        return new Promise$1(function (resolve, reject) {\n            promise.then(function (res) { return root._waitingQueue.push(wrap(resolve.bind(null, res))); }, function (err) { return root._waitingQueue.push(wrap(reject.bind(null, err))); }).finally(function () {\n                if (root._waitingFor === currentWaitPromise) {\n                    root._waitingFor = null;\n                }\n            });\n        });\n    };\n    Transaction.prototype.abort = function () {\n        this.active && this._reject(new exceptions.Abort());\n        this.active = false;\n    };\n    Transaction.prototype.table = function (tableName) {\n        var memoizedTables = (this._memoizedTables || (this._memoizedTables = {}));\n        if (hasOwn(memoizedTables, tableName))\n            return memoizedTables[tableName];\n        var tableSchema = this.schema[tableName];\n        if (!tableSchema) {\n            throw new exceptions.NotFound(\"Table \" + tableName + \" not part of transaction\");\n        }\n        var transactionBoundTable = new this.db.Table(tableName, tableSchema, this);\n        transactionBoundTable.core = this.db.core.table(tableName);\n        memoizedTables[tableName] = transactionBoundTable;\n        return transactionBoundTable;\n    };\n    return Transaction;\n}());\n\nfunction createTransactionConstructor(db) {\n    return makeClassConstructor(Transaction.prototype, function Transaction$$1(mode, storeNames, dbschema, parent) {\n        var _this = this;\n        this.db = db;\n        this.mode = mode;\n        this.storeNames = storeNames;\n        this.schema = dbschema;\n        this.idbtrans = null;\n        this.on = Events(this, \"complete\", \"error\", \"abort\");\n        this.parent = parent || null;\n        this.active = true;\n        this._reculock = 0;\n        this._blockedFuncs = [];\n        this._resolve = null;\n        this._reject = null;\n        this._waitingFor = null;\n        this._waitingQueue = null;\n        this._spinCount = 0;\n        this._completion = new Promise$1(function (resolve, reject) {\n            _this._resolve = resolve;\n            _this._reject = reject;\n        });\n        this._completion.then(function () {\n            _this.active = false;\n            _this.on.complete.fire();\n        }, function (e) {\n            var wasActive = _this.active;\n            _this.active = false;\n            _this.on.error.fire(e);\n            _this.parent ?\n                _this.parent._reject(e) :\n                wasActive && _this.idbtrans && _this.idbtrans.abort();\n            return rejection(e);\n        });\n    });\n}\n\nfunction createIndexSpec(name, keyPath, unique, multi, auto, compound) {\n    return {\n        name: name,\n        keyPath: keyPath,\n        unique: unique,\n        multi: multi,\n        auto: auto,\n        compound: compound,\n        src: (unique ? '&' : '') + (multi ? '*' : '') + (auto ? \"++\" : \"\") + nameFromKeyPath(keyPath)\n    };\n}\nfunction nameFromKeyPath(keyPath) {\n    return typeof keyPath === 'string' ?\n        keyPath :\n        keyPath ? ('[' + [].join.call(keyPath, '+') + ']') : \"\";\n}\n\nfunction createTableSchema(name, primKey, indexes) {\n    return {\n        name: name,\n        primKey: primKey,\n        indexes: indexes,\n        mappedClass: null,\n        idxByName: arrayToObject(indexes, function (index) { return [index.name, index]; })\n    };\n}\n\nfunction getKeyExtractor(keyPath) {\n    if (keyPath == null) {\n        return function () { return undefined; };\n    }\n    else if (typeof keyPath === 'string') {\n        return getSinglePathKeyExtractor(keyPath);\n    }\n    else {\n        return function (obj) { return getByKeyPath(obj, keyPath); };\n    }\n}\nfunction getSinglePathKeyExtractor(keyPath) {\n    var split = keyPath.split('.');\n    if (split.length === 1) {\n        return function (obj) { return obj[keyPath]; };\n    }\n    else {\n        return function (obj) { return getByKeyPath(obj, keyPath); };\n    }\n}\n\nfunction getEffectiveKeys(primaryKey, req) {\n    if (req.type === 'delete')\n        return req.keys;\n    return req.keys || req.values.map(primaryKey.extractKey);\n}\nfunction getExistingValues(table, req, effectiveKeys) {\n    return req.type === 'add' ? Promise.resolve(new Array(req.values.length)) :\n        table.getMany({ trans: req.trans, keys: effectiveKeys });\n}\n\nfunction arrayify(arrayLike) {\n    return [].slice.call(arrayLike);\n}\n\nvar _id_counter = 0;\nfunction getKeyPathAlias(keyPath) {\n    return keyPath == null ?\n        \":id\" :\n        typeof keyPath === 'string' ?\n            keyPath :\n            \"[\" + keyPath.join('+') + \"]\";\n}\nfunction createDBCore(db, indexedDB, IdbKeyRange, tmpTrans) {\n    var cmp = indexedDB.cmp.bind(indexedDB);\n    function extractSchema(db, trans) {\n        var tables = arrayify(db.objectStoreNames);\n        return {\n            schema: {\n                name: db.name,\n                tables: tables.map(function (table) { return trans.objectStore(table); }).map(function (store) {\n                    var keyPath = store.keyPath, autoIncrement = store.autoIncrement;\n                    var compound = isArray(keyPath);\n                    var outbound = keyPath == null;\n                    var indexByKeyPath = {};\n                    var result = {\n                        name: store.name,\n                        primaryKey: {\n                            name: null,\n                            isPrimaryKey: true,\n                            outbound: outbound,\n                            compound: compound,\n                            keyPath: keyPath,\n                            autoIncrement: autoIncrement,\n                            unique: true,\n                            extractKey: getKeyExtractor(keyPath)\n                        },\n                        indexes: arrayify(store.indexNames).map(function (indexName) { return store.index(indexName); })\n                            .map(function (index) {\n                            var name = index.name, unique = index.unique, multiEntry = index.multiEntry, keyPath = index.keyPath;\n                            var compound = isArray(keyPath);\n                            var result = {\n                                name: name,\n                                compound: compound,\n                                keyPath: keyPath,\n                                unique: unique,\n                                multiEntry: multiEntry,\n                                extractKey: getKeyExtractor(keyPath)\n                            };\n                            indexByKeyPath[getKeyPathAlias(keyPath)] = result;\n                            return result;\n                        }),\n                        getIndexByKeyPath: function (keyPath) { return indexByKeyPath[getKeyPathAlias(keyPath)]; }\n                    };\n                    indexByKeyPath[\":id\"] = result.primaryKey;\n                    if (keyPath != null) {\n                        indexByKeyPath[getKeyPathAlias(keyPath)] = result.primaryKey;\n                    }\n                    return result;\n                })\n            },\n            hasGetAll: tables.length > 0 && ('getAll' in trans.objectStore(tables[0])) &&\n                !(typeof navigator !== 'undefined' && /Safari/.test(navigator.userAgent) &&\n                    !/(Chrome\\/|Edge\\/)/.test(navigator.userAgent) &&\n                    [].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1] < 604)\n        };\n    }\n    function makeIDBKeyRange(range) {\n        if (range.type === 3          )\n            return null;\n        if (range.type === 4            )\n            throw new Error(\"Cannot convert never type to IDBKeyRange\");\n        var lower = range.lower, upper = range.upper, lowerOpen = range.lowerOpen, upperOpen = range.upperOpen;\n        var idbRange = lower === undefined ?\n            upper === undefined ?\n                null :\n                IdbKeyRange.upperBound(upper, !!upperOpen) :\n            upper === undefined ?\n                IdbKeyRange.lowerBound(lower, !!lowerOpen) :\n                IdbKeyRange.bound(lower, upper, !!lowerOpen, !!upperOpen);\n        return idbRange;\n    }\n    function createDbCoreTable(tableSchema) {\n        var tableName = tableSchema.name;\n        function mutate(_a) {\n            var trans = _a.trans, type = _a.type, keys$$1 = _a.keys, values = _a.values, range = _a.range, wantResults = _a.wantResults;\n            return new Promise(function (resolve, reject) {\n                resolve = wrap(resolve);\n                var store = trans.objectStore(tableName);\n                var outbound = store.keyPath == null;\n                var isAddOrPut = type === \"put\" || type === \"add\";\n                if (!isAddOrPut && type !== 'delete' && type !== 'deleteRange')\n                    throw new Error(\"Invalid operation type: \" + type);\n                var length = (keys$$1 || values || { length: 1 }).length;\n                if (keys$$1 && values && keys$$1.length !== values.length) {\n                    throw new Error(\"Given keys array must have same length as given values array.\");\n                }\n                if (length === 0)\n                    return resolve({ numFailures: 0, failures: {}, results: [], lastResult: undefined });\n                var results = wantResults && (keys$$1 ?\n                    keys$$1 :\n                    getEffectiveKeys(tableSchema.primaryKey, { type: type, keys: keys$$1, values: values })).slice();\n                var req;\n                var failures = [];\n                var numFailures = 0;\n                var errorHandler = function (event) {\n                    ++numFailures;\n                    preventDefault(event);\n                    if (results)\n                        results[event.target._reqno] = undefined;\n                    failures[event.target._reqno] = event.target.error;\n                };\n                var setResult = function (_a) {\n                    var target = _a.target;\n                    results[target._reqno] = target.result;\n                };\n                if (type === 'deleteRange') {\n                    if (range.type === 4            )\n                        return resolve({ numFailures: numFailures, failures: failures, results: results, lastResult: undefined });\n                    if (range.type === 3          )\n                        req = store.clear();\n                    else\n                        req = store.delete(makeIDBKeyRange(range));\n                }\n                else {\n                    var _a = isAddOrPut ?\n                        outbound ?\n                            [values, keys$$1] :\n                            [values, null] :\n                        [keys$$1, null], args1 = _a[0], args2 = _a[1];\n                    if (isAddOrPut) {\n                        for (var i = 0; i < length; ++i) {\n                            req = (args2 && args2[i] !== undefined ?\n                                store[type](args1[i], args2[i]) :\n                                store[type](args1[i]));\n                            req._reqno = i;\n                            if (results && results[i] === undefined) {\n                                req.onsuccess = setResult;\n                            }\n                            req.onerror = errorHandler;\n                        }\n                    }\n                    else {\n                        for (var i = 0; i < length; ++i) {\n                            req = store[type](args1[i]);\n                            req._reqno = i;\n                            req.onerror = errorHandler;\n                        }\n                    }\n                }\n                var done = function (event) {\n                    var lastResult = event.target.result;\n                    if (results)\n                        results[length - 1] = lastResult;\n                    resolve({\n                        numFailures: numFailures,\n                        failures: failures,\n                        results: results,\n                        lastResult: lastResult\n                    });\n                };\n                req.onerror = function (event) {\n                    errorHandler(event);\n                    done(event);\n                };\n                req.onsuccess = done;\n            });\n        }\n        function openCursor(_a) {\n            var trans = _a.trans, values = _a.values, query = _a.query, reverse = _a.reverse, unique = _a.unique;\n            return new Promise(function (resolve, reject) {\n                resolve = wrap(resolve);\n                var index = query.index, range = query.range;\n                var store = trans.objectStore(tableName);\n                var source = index.isPrimaryKey ?\n                    store :\n                    store.index(index.name);\n                var direction = reverse ?\n                    unique ?\n                        \"prevunique\" :\n                        \"prev\" :\n                    unique ?\n                        \"nextunique\" :\n                        \"next\";\n                var req = values || !('openKeyCursor' in source) ?\n                    source.openCursor(makeIDBKeyRange(range), direction) :\n                    source.openKeyCursor(makeIDBKeyRange(range), direction);\n                req.onerror = eventRejectHandler(reject);\n                req.onsuccess = wrap(function (ev) {\n                    var cursor = req.result;\n                    if (!cursor) {\n                        resolve(null);\n                        return;\n                    }\n                    cursor.___id = ++_id_counter;\n                    cursor.done = false;\n                    var _cursorContinue = cursor.continue.bind(cursor);\n                    var _cursorContinuePrimaryKey = cursor.continuePrimaryKey;\n                    if (_cursorContinuePrimaryKey)\n                        _cursorContinuePrimaryKey = _cursorContinuePrimaryKey.bind(cursor);\n                    var _cursorAdvance = cursor.advance.bind(cursor);\n                    var doThrowCursorIsNotStarted = function () { throw new Error(\"Cursor not started\"); };\n                    var doThrowCursorIsStopped = function () { throw new Error(\"Cursor not stopped\"); };\n                    cursor.trans = trans;\n                    cursor.stop = cursor.continue = cursor.continuePrimaryKey = cursor.advance = doThrowCursorIsNotStarted;\n                    cursor.fail = wrap(reject);\n                    cursor.next = function () {\n                        var _this = this;\n                        var gotOne = 1;\n                        return this.start(function () { return gotOne-- ? _this.continue() : _this.stop(); }).then(function () { return _this; });\n                    };\n                    cursor.start = function (callback) {\n                        var iterationPromise = new Promise(function (resolveIteration, rejectIteration) {\n                            resolveIteration = wrap(resolveIteration);\n                            req.onerror = eventRejectHandler(rejectIteration);\n                            cursor.fail = rejectIteration;\n                            cursor.stop = function (value) {\n                                cursor.stop = cursor.continue = cursor.continuePrimaryKey = cursor.advance = doThrowCursorIsStopped;\n                                resolveIteration(value);\n                            };\n                        });\n                        var guardedCallback = function () {\n                            if (req.result) {\n                                try {\n                                    callback();\n                                }\n                                catch (err) {\n                                    cursor.fail(err);\n                                }\n                            }\n                            else {\n                                cursor.done = true;\n                                cursor.start = function () { throw new Error(\"Cursor behind last entry\"); };\n                                cursor.stop();\n                            }\n                        };\n                        req.onsuccess = wrap(function (ev) {\n                            req.onsuccess = guardedCallback;\n                            guardedCallback();\n                        });\n                        cursor.continue = _cursorContinue;\n                        cursor.continuePrimaryKey = _cursorContinuePrimaryKey;\n                        cursor.advance = _cursorAdvance;\n                        guardedCallback();\n                        return iterationPromise;\n                    };\n                    resolve(cursor);\n                }, reject);\n            });\n        }\n        function query(hasGetAll) {\n            return function (request) {\n                return new Promise(function (resolve, reject) {\n                    resolve = wrap(resolve);\n                    var trans = request.trans, values = request.values, limit = request.limit, query = request.query;\n                    var nonInfinitLimit = limit === Infinity ? undefined : limit;\n                    var index = query.index, range = query.range;\n                    var store = trans.objectStore(tableName);\n                    var source = index.isPrimaryKey ? store : store.index(index.name);\n                    var idbKeyRange = makeIDBKeyRange(range);\n                    if (limit === 0)\n                        return resolve({ result: [] });\n                    if (hasGetAll) {\n                        var req = values ?\n                            source.getAll(idbKeyRange, nonInfinitLimit) :\n                            source.getAllKeys(idbKeyRange, nonInfinitLimit);\n                        req.onsuccess = function (event) { return resolve({ result: event.target.result }); };\n                        req.onerror = eventRejectHandler(reject);\n                    }\n                    else {\n                        var count_1 = 0;\n                        var req_1 = values || !('openKeyCursor' in source) ?\n                            source.openCursor(idbKeyRange) :\n                            source.openKeyCursor(idbKeyRange);\n                        var result_1 = [];\n                        req_1.onsuccess = function (event) {\n                            var cursor = req_1.result;\n                            if (!cursor)\n                                return resolve({ result: result_1 });\n                            result_1.push(values ? cursor.value : cursor.primaryKey);\n                            if (++count_1 === limit)\n                                return resolve({ result: result_1 });\n                            cursor.continue();\n                        };\n                        req_1.onerror = eventRejectHandler(reject);\n                    }\n                });\n            };\n        }\n        return {\n            name: tableName,\n            schema: tableSchema,\n            mutate: mutate,\n            getMany: function (_a) {\n                var trans = _a.trans, keys$$1 = _a.keys;\n                return new Promise(function (resolve, reject) {\n                    resolve = wrap(resolve);\n                    var store = trans.objectStore(tableName);\n                    var length = keys$$1.length;\n                    var result = new Array(length);\n                    var keyCount = 0;\n                    var callbackCount = 0;\n                    var valueCount = 0;\n                    var req;\n                    var successHandler = function (event) {\n                        var req = event.target;\n                        if ((result[req._pos] = req.result) != null)\n                            ++valueCount;\n                        if (++callbackCount === keyCount)\n                            resolve(result);\n                    };\n                    var errorHandler = eventRejectHandler(reject);\n                    for (var i = 0; i < length; ++i) {\n                        var key = keys$$1[i];\n                        if (key != null) {\n                            req = store.get(keys$$1[i]);\n                            req._pos = i;\n                            req.onsuccess = successHandler;\n                            req.onerror = errorHandler;\n                            ++keyCount;\n                        }\n                    }\n                    if (keyCount === 0)\n                        resolve(result);\n                });\n            },\n            get: function (_a) {\n                var trans = _a.trans, key = _a.key;\n                return new Promise(function (resolve, reject) {\n                    resolve = wrap(resolve);\n                    var store = trans.objectStore(tableName);\n                    var req = store.get(key);\n                    req.onsuccess = function (event) { return resolve(event.target.result); };\n                    req.onerror = eventRejectHandler(reject);\n                });\n            },\n            query: query(hasGetAll),\n            openCursor: openCursor,\n            count: function (_a) {\n                var query = _a.query, trans = _a.trans;\n                var index = query.index, range = query.range;\n                return new Promise(function (resolve, reject) {\n                    var store = trans.objectStore(tableName);\n                    var source = index.isPrimaryKey ? store : store.index(index.name);\n                    var idbKeyRange = makeIDBKeyRange(range);\n                    var req = idbKeyRange ? source.count(idbKeyRange) : source.count();\n                    req.onsuccess = wrap(function (ev) { return resolve(ev.target.result); });\n                    req.onerror = eventRejectHandler(reject);\n                });\n            }\n        };\n    }\n    var _a = extractSchema(db, tmpTrans), schema = _a.schema, hasGetAll = _a.hasGetAll;\n    var tables = schema.tables.map(function (tableSchema) { return createDbCoreTable(tableSchema); });\n    var tableMap = {};\n    tables.forEach(function (table) { return tableMap[table.name] = table; });\n    return {\n        stack: \"dbcore\",\n        transaction: db.transaction.bind(db),\n        table: function (name) {\n            var result = tableMap[name];\n            if (!result)\n                throw new Error(\"Table '\" + name + \"' not found\");\n            return tableMap[name];\n        },\n        cmp: cmp,\n        MIN_KEY: -Infinity,\n        MAX_KEY: getMaxKey(IdbKeyRange),\n        schema: schema\n    };\n}\n\nfunction createMiddlewareStack(stackImpl, middlewares) {\n    return middlewares.reduce(function (down, _a) {\n        var create = _a.create;\n        return (__assign({}, down, create(down)));\n    }, stackImpl);\n}\nfunction createMiddlewareStacks(middlewares, idbdb, _a, tmpTrans) {\n    var IDBKeyRange = _a.IDBKeyRange, indexedDB = _a.indexedDB;\n    var dbcore = createMiddlewareStack(createDBCore(idbdb, indexedDB, IDBKeyRange, tmpTrans), middlewares.dbcore);\n    return {\n        dbcore: dbcore\n    };\n}\nfunction generateMiddlewareStacks(db, tmpTrans) {\n    var idbdb = tmpTrans.db;\n    var stacks = createMiddlewareStacks(db._middlewares, idbdb, db._deps, tmpTrans);\n    db.core = stacks.dbcore;\n    db.tables.forEach(function (table) {\n        var tableName = table.name;\n        if (db.core.schema.tables.some(function (tbl) { return tbl.name === tableName; })) {\n            table.core = db.core.table(tableName);\n            if (db[tableName] instanceof db.Table) {\n                db[tableName].core = table.core;\n            }\n        }\n    });\n}\n\nfunction setApiOnPlace(db, objs, tableNames, dbschema) {\n    tableNames.forEach(function (tableName) {\n        var schema = dbschema[tableName];\n        objs.forEach(function (obj) {\n            if (!(tableName in obj)) {\n                if (obj === db.Transaction.prototype || obj instanceof db.Transaction) {\n                    setProp(obj, tableName, { get: function () { return this.table(tableName); } });\n                }\n                else {\n                    obj[tableName] = new db.Table(tableName, schema);\n                }\n            }\n        });\n    });\n}\nfunction removeTablesApi(db, objs) {\n    objs.forEach(function (obj) {\n        for (var key in obj) {\n            if (obj[key] instanceof db.Table)\n                delete obj[key];\n        }\n    });\n}\nfunction lowerVersionFirst(a, b) {\n    return a._cfg.version - b._cfg.version;\n}\nfunction runUpgraders(db, oldVersion, idbUpgradeTrans, reject) {\n    var globalSchema = db._dbSchema;\n    var trans = db._createTransaction('readwrite', db._storeNames, globalSchema);\n    trans.create(idbUpgradeTrans);\n    trans._completion.catch(reject);\n    var rejectTransaction = trans._reject.bind(trans);\n    var transless = PSD.transless || PSD;\n    newScope(function () {\n        PSD.trans = trans;\n        PSD.transless = transless;\n        if (oldVersion === 0) {\n            keys(globalSchema).forEach(function (tableName) {\n                createTable(idbUpgradeTrans, tableName, globalSchema[tableName].primKey, globalSchema[tableName].indexes);\n            });\n            generateMiddlewareStacks(db, idbUpgradeTrans);\n            Promise$1.follow(function () { return db.on.populate.fire(trans); }).catch(rejectTransaction);\n        }\n        else\n            updateTablesAndIndexes(db, oldVersion, trans, idbUpgradeTrans).catch(rejectTransaction);\n    });\n}\nfunction updateTablesAndIndexes(db, oldVersion, trans, idbUpgradeTrans) {\n    var queue = [];\n    var versions = db._versions;\n    var oldVersionStruct = versions.filter(function (version) { return version._cfg.version === oldVersion; })[0];\n    if (!oldVersionStruct)\n        throw new exceptions.Upgrade(\"Dexie specification of currently installed DB version is missing\");\n    var globalSchema = db._dbSchema = oldVersionStruct._cfg.dbschema;\n    var anyContentUpgraderHasRun = false;\n    var versToRun = versions.filter(function (v) { return v._cfg.version > oldVersion; });\n    versToRun.forEach(function (version) {\n        queue.push(function () {\n            var oldSchema = globalSchema;\n            var newSchema = version._cfg.dbschema;\n            adjustToExistingIndexNames(db, oldSchema, idbUpgradeTrans);\n            adjustToExistingIndexNames(db, newSchema, idbUpgradeTrans);\n            globalSchema = db._dbSchema = newSchema;\n            var diff = getSchemaDiff(oldSchema, newSchema);\n            diff.add.forEach(function (tuple) {\n                createTable(idbUpgradeTrans, tuple[0], tuple[1].primKey, tuple[1].indexes);\n            });\n            diff.change.forEach(function (change) {\n                if (change.recreate) {\n                    throw new exceptions.Upgrade(\"Not yet support for changing primary key\");\n                }\n                else {\n                    var store_1 = idbUpgradeTrans.objectStore(change.name);\n                    change.add.forEach(function (idx) { return addIndex(store_1, idx); });\n                    change.change.forEach(function (idx) {\n                        store_1.deleteIndex(idx.name);\n                        addIndex(store_1, idx);\n                    });\n                    change.del.forEach(function (idxName) { return store_1.deleteIndex(idxName); });\n                }\n            });\n            var contentUpgrade = version._cfg.contentUpgrade;\n            if (contentUpgrade) {\n                generateMiddlewareStacks(db, idbUpgradeTrans);\n                anyContentUpgraderHasRun = true;\n                var upgradeSchema_1 = shallowClone(newSchema);\n                diff.del.forEach(function (table) {\n                    upgradeSchema_1[table] = oldSchema[table];\n                });\n                removeTablesApi(db, [db.Transaction.prototype]);\n                setApiOnPlace(db, [db.Transaction.prototype], keys(upgradeSchema_1), upgradeSchema_1);\n                trans.schema = upgradeSchema_1;\n                if (contentUpgrade.constructor === AsyncFunction) {\n                    incrementExpectedAwaits();\n                }\n                var returnValue_1;\n                var promiseFollowed = Promise$1.follow(function () {\n                    returnValue_1 = contentUpgrade(trans);\n                    if (returnValue_1) {\n                        if (returnValue_1.constructor === NativePromise) {\n                            var decrementor = decrementExpectedAwaits.bind(null, null);\n                            returnValue_1.then(decrementor, decrementor);\n                        }\n                    }\n                });\n                return (returnValue_1 && typeof returnValue_1.then === 'function' ?\n                    Promise$1.resolve(returnValue_1) : promiseFollowed.then(function () { return returnValue_1; }));\n            }\n        });\n        queue.push(function (idbtrans) {\n            if (!anyContentUpgraderHasRun || !hasIEDeleteObjectStoreBug) {\n                var newSchema = version._cfg.dbschema;\n                deleteRemovedTables(newSchema, idbtrans);\n            }\n            removeTablesApi(db, [db.Transaction.prototype]);\n            setApiOnPlace(db, [db.Transaction.prototype], db._storeNames, db._dbSchema);\n            trans.schema = db._dbSchema;\n        });\n    });\n    function runQueue() {\n        return queue.length ? Promise$1.resolve(queue.shift()(trans.idbtrans)).then(runQueue) :\n            Promise$1.resolve();\n    }\n    return runQueue().then(function () {\n        createMissingTables(globalSchema, idbUpgradeTrans);\n    });\n}\nfunction getSchemaDiff(oldSchema, newSchema) {\n    var diff = {\n        del: [],\n        add: [],\n        change: []\n    };\n    var table;\n    for (table in oldSchema) {\n        if (!newSchema[table])\n            diff.del.push(table);\n    }\n    for (table in newSchema) {\n        var oldDef = oldSchema[table], newDef = newSchema[table];\n        if (!oldDef) {\n            diff.add.push([table, newDef]);\n        }\n        else {\n            var change = {\n                name: table,\n                def: newDef,\n                recreate: false,\n                del: [],\n                add: [],\n                change: []\n            };\n            if (oldDef.primKey.src !== newDef.primKey.src) {\n                change.recreate = true;\n                diff.change.push(change);\n            }\n            else {\n                var oldIndexes = oldDef.idxByName;\n                var newIndexes = newDef.idxByName;\n                var idxName = void 0;\n                for (idxName in oldIndexes) {\n                    if (!newIndexes[idxName])\n                        change.del.push(idxName);\n                }\n                for (idxName in newIndexes) {\n                    var oldIdx = oldIndexes[idxName], newIdx = newIndexes[idxName];\n                    if (!oldIdx)\n                        change.add.push(newIdx);\n                    else if (oldIdx.src !== newIdx.src)\n                        change.change.push(newIdx);\n                }\n                if (change.del.length > 0 || change.add.length > 0 || change.change.length > 0) {\n                    diff.change.push(change);\n                }\n            }\n        }\n    }\n    return diff;\n}\nfunction createTable(idbtrans, tableName, primKey, indexes) {\n    var store = idbtrans.db.createObjectStore(tableName, primKey.keyPath ?\n        { keyPath: primKey.keyPath, autoIncrement: primKey.auto } :\n        { autoIncrement: primKey.auto });\n    indexes.forEach(function (idx) { return addIndex(store, idx); });\n    return store;\n}\nfunction createMissingTables(newSchema, idbtrans) {\n    keys(newSchema).forEach(function (tableName) {\n        if (!idbtrans.db.objectStoreNames.contains(tableName)) {\n            createTable(idbtrans, tableName, newSchema[tableName].primKey, newSchema[tableName].indexes);\n        }\n    });\n}\nfunction deleteRemovedTables(newSchema, idbtrans) {\n    for (var i = 0; i < idbtrans.db.objectStoreNames.length; ++i) {\n        var storeName = idbtrans.db.objectStoreNames[i];\n        if (newSchema[storeName] == null) {\n            idbtrans.db.deleteObjectStore(storeName);\n        }\n    }\n}\nfunction addIndex(store, idx) {\n    store.createIndex(idx.name, idx.keyPath, { unique: idx.unique, multiEntry: idx.multi });\n}\nfunction readGlobalSchema(db, idbdb, tmpTrans) {\n    db.verno = idbdb.version / 10;\n    var globalSchema = db._dbSchema = {};\n    var dbStoreNames = db._storeNames = slice(idbdb.objectStoreNames, 0);\n    if (dbStoreNames.length === 0)\n        return;\n    dbStoreNames.forEach(function (storeName) {\n        var store = tmpTrans.objectStore(storeName);\n        var keyPath = store.keyPath;\n        var primKey = createIndexSpec(nameFromKeyPath(keyPath), keyPath || \"\", false, false, !!store.autoIncrement, keyPath && typeof keyPath !== 'string');\n        var indexes = [];\n        for (var j = 0; j < store.indexNames.length; ++j) {\n            var idbindex = store.index(store.indexNames[j]);\n            keyPath = idbindex.keyPath;\n            var index = createIndexSpec(idbindex.name, keyPath, !!idbindex.unique, !!idbindex.multiEntry, false, keyPath && typeof keyPath !== 'string');\n            indexes.push(index);\n        }\n        globalSchema[storeName] = createTableSchema(storeName, primKey, indexes);\n    });\n    setApiOnPlace(db, [db._allTables], keys(globalSchema), globalSchema);\n}\nfunction adjustToExistingIndexNames(db, schema, idbtrans) {\n    var storeNames = idbtrans.db.objectStoreNames;\n    for (var i = 0; i < storeNames.length; ++i) {\n        var storeName = storeNames[i];\n        var store = idbtrans.objectStore(storeName);\n        db._hasGetAll = 'getAll' in store;\n        for (var j = 0; j < store.indexNames.length; ++j) {\n            var indexName = store.indexNames[j];\n            var keyPath = store.index(indexName).keyPath;\n            var dexieName = typeof keyPath === 'string' ? keyPath : \"[\" + slice(keyPath).join('+') + \"]\";\n            if (schema[storeName]) {\n                var indexSpec = schema[storeName].idxByName[dexieName];\n                if (indexSpec)\n                    indexSpec.name = indexName;\n            }\n        }\n    }\n    if (typeof navigator !== 'undefined' && /Safari/.test(navigator.userAgent) &&\n        !/(Chrome\\/|Edge\\/)/.test(navigator.userAgent) &&\n        _global.WorkerGlobalScope && _global instanceof _global.WorkerGlobalScope &&\n        [].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1] < 604) {\n        db._hasGetAll = false;\n    }\n}\nfunction parseIndexSyntax(indexes) {\n    var rv = [];\n    indexes.split(',').forEach(function (index) {\n        index = index.trim();\n        var name = index.replace(/([&*]|\\+\\+)/g, \"\");\n        var keyPath = /^\\[/.test(name) ? name.match(/^\\[(.*)\\]$/)[1].split('+') : name;\n        rv.push(createIndexSpec(name, keyPath || null, /\\&/.test(index), /\\*/.test(index), /\\+\\+/.test(index), isArray(keyPath)));\n    });\n    return rv;\n}\n\nvar Version =               (function () {\n    function Version() {\n    }\n    Version.prototype._parseStoresSpec = function (stores, outSchema) {\n        keys(stores).forEach(function (tableName) {\n            if (stores[tableName] !== null) {\n                var indexes = parseIndexSyntax(stores[tableName]);\n                var primKey = indexes.shift();\n                if (primKey.multi)\n                    throw new exceptions.Schema(\"Primary key cannot be multi-valued\");\n                indexes.forEach(function (idx) {\n                    if (idx.auto)\n                        throw new exceptions.Schema(\"Only primary key can be marked as autoIncrement (++)\");\n                    if (!idx.keyPath)\n                        throw new exceptions.Schema(\"Index must have a name and cannot be an empty string\");\n                });\n                outSchema[tableName] = createTableSchema(tableName, primKey, indexes);\n            }\n        });\n    };\n    Version.prototype.stores = function (stores) {\n        var db = this.db;\n        this._cfg.storesSource = this._cfg.storesSource ?\n            extend(this._cfg.storesSource, stores) :\n            stores;\n        var versions = db._versions;\n        var storesSpec = {};\n        versions.forEach(function (version) {\n            extend(storesSpec, version._cfg.storesSource);\n        });\n        var dbschema = (this._cfg.dbschema = {});\n        this._parseStoresSpec(storesSpec, dbschema);\n        db._dbSchema = dbschema;\n        removeTablesApi(db, [db._allTables, db, db.Transaction.prototype]);\n        setApiOnPlace(db, [db._allTables, db, db.Transaction.prototype, this._cfg.tables], keys(dbschema), dbschema);\n        db._storeNames = keys(dbschema);\n        return this;\n    };\n    Version.prototype.upgrade = function (upgradeFunction) {\n        this._cfg.contentUpgrade = upgradeFunction;\n        return this;\n    };\n    return Version;\n}());\n\nfunction createVersionConstructor(db) {\n    return makeClassConstructor(Version.prototype, function Version$$1(versionNumber) {\n        this.db = db;\n        this._cfg = {\n            version: versionNumber,\n            storesSource: null,\n            dbschema: {},\n            tables: {},\n            contentUpgrade: null\n        };\n        this.stores({});\n    });\n}\n\nvar databaseEnumerator;\nfunction DatabaseEnumerator(indexedDB) {\n    var getDatabaseNamesNative = indexedDB && (indexedDB.getDatabaseNames || indexedDB.webkitGetDatabaseNames);\n    var dbNamesTable;\n    if (!getDatabaseNamesNative) {\n        var db = new Dexie(DBNAMES_DB, { addons: [] });\n        db.version(1).stores({ dbnames: 'name' });\n        dbNamesTable = db.table('dbnames');\n    }\n    return {\n        getDatabaseNames: function () {\n            return getDatabaseNamesNative ? new Promise$1(function (resolve, reject) {\n                var req = getDatabaseNamesNative.call(indexedDB);\n                req.onsuccess = function (event) { return resolve(slice(event.target.result, 0)); };\n                req.onerror = eventRejectHandler(reject);\n            }) : dbNamesTable.toCollection().primaryKeys();\n        },\n        add: function (name) {\n            return !getDatabaseNamesNative && name !== DBNAMES_DB && dbNamesTable.put({ name: name }).catch(nop);\n        },\n        remove: function (name) {\n            return !getDatabaseNamesNative && name !== DBNAMES_DB && dbNamesTable.delete(name).catch(nop);\n        }\n    };\n}\nfunction initDatabaseEnumerator(indexedDB) {\n    try {\n        databaseEnumerator = DatabaseEnumerator(indexedDB);\n    }\n    catch (e) { }\n}\n\nfunction vip(fn) {\n    return newScope(function () {\n        PSD.letThrough = true;\n        return fn();\n    });\n}\n\nfunction dexieOpen(db) {\n    var state = db._state;\n    var indexedDB = db._deps.indexedDB;\n    if (state.isBeingOpened || db.idbdb)\n        return state.dbReadyPromise.then(function () { return state.dbOpenError ?\n            rejection(state.dbOpenError) :\n            db; });\n    debug && (state.openCanceller._stackHolder = getErrorWithStack());\n    state.isBeingOpened = true;\n    state.dbOpenError = null;\n    state.openComplete = false;\n    var resolveDbReady = state.dbReadyResolve,\n    upgradeTransaction = null;\n    return Promise$1.race([state.openCanceller, new Promise$1(function (resolve, reject) {\n            if (!indexedDB)\n                throw new exceptions.MissingAPI(\"indexedDB API not found. If using IE10+, make sure to run your code on a server URL \" +\n                    \"(not locally). If using old Safari versions, make sure to include indexedDB polyfill.\");\n            var dbName = db.name;\n            var req = state.autoSchema ?\n                indexedDB.open(dbName) :\n                indexedDB.open(dbName, Math.round(db.verno * 10));\n            if (!req)\n                throw new exceptions.MissingAPI(\"IndexedDB API not available\");\n            req.onerror = eventRejectHandler(reject);\n            req.onblocked = wrap(db._fireOnBlocked);\n            req.onupgradeneeded = wrap(function (e) {\n                upgradeTransaction = req.transaction;\n                if (state.autoSchema && !db._options.allowEmptyDB) {\n                    req.onerror = preventDefault;\n                    upgradeTransaction.abort();\n                    req.result.close();\n                    var delreq = indexedDB.deleteDatabase(dbName);\n                    delreq.onsuccess = delreq.onerror = wrap(function () {\n                        reject(new exceptions.NoSuchDatabase(\"Database \" + dbName + \" doesnt exist\"));\n                    });\n                }\n                else {\n                    upgradeTransaction.onerror = eventRejectHandler(reject);\n                    var oldVer = e.oldVersion > Math.pow(2, 62) ? 0 : e.oldVersion;\n                    runUpgraders(db, oldVer / 10, upgradeTransaction, reject);\n                }\n            }, reject);\n            req.onsuccess = wrap(function () {\n                upgradeTransaction = null;\n                var idbdb = db.idbdb = req.result;\n                var objectStoreNames = slice(idbdb.objectStoreNames);\n                if (objectStoreNames.length > 0)\n                    try {\n                        var tmpTrans = idbdb.transaction(safariMultiStoreFix(objectStoreNames), 'readonly');\n                        if (state.autoSchema)\n                            readGlobalSchema(db, idbdb, tmpTrans);\n                        else\n                            adjustToExistingIndexNames(db, db._dbSchema, tmpTrans);\n                        generateMiddlewareStacks(db, tmpTrans);\n                    }\n                    catch (e) {\n                    }\n                connections.push(db);\n                idbdb.onversionchange = wrap(function (ev) {\n                    state.vcFired = true;\n                    db.on(\"versionchange\").fire(ev);\n                });\n                databaseEnumerator.add(dbName);\n                resolve();\n            }, reject);\n        })]).then(function () {\n        state.onReadyBeingFired = [];\n        return Promise$1.resolve(vip(db.on.ready.fire)).then(function fireRemainders() {\n            if (state.onReadyBeingFired.length > 0) {\n                var remainders = state.onReadyBeingFired.reduce(promisableChain, nop);\n                state.onReadyBeingFired = [];\n                return Promise$1.resolve(vip(remainders)).then(fireRemainders);\n            }\n        });\n    }).finally(function () {\n        state.onReadyBeingFired = null;\n    }).then(function () {\n        state.isBeingOpened = false;\n        return db;\n    }).catch(function (err) {\n        try {\n            upgradeTransaction && upgradeTransaction.abort();\n        }\n        catch (e) { }\n        state.isBeingOpened = false;\n        db.close();\n        state.dbOpenError = err;\n        return rejection(state.dbOpenError);\n    }).finally(function () {\n        state.openComplete = true;\n        resolveDbReady();\n    });\n}\n\nfunction awaitIterator(iterator) {\n    var callNext = function (result) { return iterator.next(result); }, doThrow = function (error) { return iterator.throw(error); }, onSuccess = step(callNext), onError = step(doThrow);\n    function step(getNext) {\n        return function (val) {\n            var next = getNext(val), value = next.value;\n            return next.done ? value :\n                (!value || typeof value.then !== 'function' ?\n                    isArray(value) ? Promise.all(value).then(onSuccess, onError) : onSuccess(value) :\n                    value.then(onSuccess, onError));\n        };\n    }\n    return step(callNext)();\n}\n\nfunction extractTransactionArgs(mode, _tableArgs_, scopeFunc) {\n    var i = arguments.length;\n    if (i < 2)\n        throw new exceptions.InvalidArgument(\"Too few arguments\");\n    var args = new Array(i - 1);\n    while (--i)\n        args[i - 1] = arguments[i];\n    scopeFunc = args.pop();\n    var tables = flatten(args);\n    return [mode, tables, scopeFunc];\n}\nfunction enterTransactionScope(db, mode, storeNames, parentTransaction, scopeFunc) {\n    return Promise$1.resolve().then(function () {\n        var transless = PSD.transless || PSD;\n        var trans = db._createTransaction(mode, storeNames, db._dbSchema, parentTransaction);\n        var zoneProps = {\n            trans: trans,\n            transless: transless\n        };\n        if (parentTransaction) {\n            trans.idbtrans = parentTransaction.idbtrans;\n        }\n        else {\n            trans.create();\n        }\n        if (scopeFunc.constructor === AsyncFunction) {\n            incrementExpectedAwaits();\n        }\n        var returnValue;\n        var promiseFollowed = Promise$1.follow(function () {\n            returnValue = scopeFunc.call(trans, trans);\n            if (returnValue) {\n                if (returnValue.constructor === NativePromise) {\n                    var decrementor = decrementExpectedAwaits.bind(null, null);\n                    returnValue.then(decrementor, decrementor);\n                }\n                else if (typeof returnValue.next === 'function' && typeof returnValue.throw === 'function') {\n                    returnValue = awaitIterator(returnValue);\n                }\n            }\n        }, zoneProps);\n        return (returnValue && typeof returnValue.then === 'function' ?\n            Promise$1.resolve(returnValue).then(function (x) { return trans.active ?\n                x\n                : rejection(new exceptions.PrematureCommit(\"Transaction committed too early. See http://bit.ly/2kdckMn\")); })\n            : promiseFollowed.then(function () { return returnValue; })).then(function (x) {\n            if (parentTransaction)\n                trans._resolve();\n            return trans._completion.then(function () { return x; });\n        }).catch(function (e) {\n            trans._reject(e);\n            return rejection(e);\n        });\n    });\n}\n\nfunction pad(a, value, count) {\n    if (!isArray(a))\n        a = [a];\n    var length = a.length;\n    var result = new Array(length + count);\n    for (var i = a.length + count - 1; i >= length; --i) {\n        result[i] = value;\n    }\n    return result;\n}\nfunction createVirtualIndexMiddleware(down) {\n    return __assign({}, down, { table: function (tableName) {\n            var table = down.table(tableName);\n            var schema = table.schema;\n            var indexLookup = {};\n            var allVirtualIndexes = [];\n            function addVirtualIndexes(keyPath, keyTail, lowLevelIndex) {\n                var keyPathAlias = getKeyPathAlias(keyPath);\n                var indexList = (indexLookup[keyPathAlias] = indexLookup[keyPathAlias] || []);\n                var keyLength = keyPath == null ? 0 : typeof keyPath === 'string' ? 1 : keyPath.length;\n                var isVirtual = keyTail > 0;\n                var virtualIndex = __assign({}, lowLevelIndex, { isVirtual: isVirtual, isPrimaryKey: !isVirtual && lowLevelIndex.isPrimaryKey, keyTail: keyTail,\n                    keyLength: keyLength, extractKey: getKeyExtractor(keyPath), unique: !isVirtual && lowLevelIndex.unique });\n                indexList.push(virtualIndex);\n                if (!virtualIndex.isPrimaryKey) {\n                    allVirtualIndexes.push(virtualIndex);\n                }\n                if (keyLength > 1) {\n                    var virtualKeyPath = keyLength === 2 ?\n                        keyPath[0] :\n                        keyPath.slice(0, keyLength - 1);\n                    addVirtualIndexes(virtualKeyPath, keyTail + 1, lowLevelIndex);\n                }\n                indexList.sort(function (a, b) { return a.keyTail - b.keyTail; });\n                return virtualIndex;\n            }\n            var primaryKey = addVirtualIndexes(schema.primaryKey.keyPath, 0, schema.primaryKey);\n            indexLookup[\":id\"] = [primaryKey];\n            for (var _i = 0, _a = schema.indexes; _i < _a.length; _i++) {\n                var index = _a[_i];\n                addVirtualIndexes(index.keyPath, 0, index);\n            }\n            function findBestIndex(keyPath) {\n                var result = indexLookup[getKeyPathAlias(keyPath)];\n                return result && result[0];\n            }\n            function translateRange(range, keyTail) {\n                return {\n                    type: range.type === 1             ?\n                        2             :\n                        range.type,\n                    lower: pad(range.lower, range.lowerOpen ? down.MAX_KEY : down.MIN_KEY, keyTail),\n                    lowerOpen: true,\n                    upper: pad(range.upper, range.upperOpen ? down.MIN_KEY : down.MAX_KEY, keyTail),\n                    upperOpen: true\n                };\n            }\n            function translateRequest(req) {\n                var index = req.query.index;\n                return index.isVirtual ? __assign({}, req, { query: {\n                        index: index,\n                        range: translateRange(req.query.range, index.keyTail)\n                    } }) : req;\n            }\n            var result = __assign({}, table, { schema: __assign({}, schema, { primaryKey: primaryKey, indexes: allVirtualIndexes, getIndexByKeyPath: findBestIndex }), count: function (req) {\n                    return table.count(translateRequest(req));\n                },\n                query: function (req) {\n                    return table.query(translateRequest(req));\n                },\n                openCursor: function (req) {\n                    var _a = req.query.index, keyTail = _a.keyTail, isVirtual = _a.isVirtual, keyLength = _a.keyLength;\n                    if (!isVirtual)\n                        return table.openCursor(req);\n                    function createVirtualCursor(cursor) {\n                        function _continue(key) {\n                            key != null ?\n                                cursor.continue(pad(key, req.reverse ? down.MAX_KEY : down.MIN_KEY, keyTail)) :\n                                req.unique ?\n                                    cursor.continue(pad(cursor.key, req.reverse ? down.MIN_KEY : down.MAX_KEY, keyTail)) :\n                                    cursor.continue();\n                        }\n                        return __assign({}, cursor, { continue: _continue, continuePrimaryKey: function (key, primaryKey) {\n                                cursor.continuePrimaryKey(pad(key, down.MAX_KEY, keyTail), primaryKey);\n                            }, get key() {\n                                var key = cursor.key;\n                                return keyLength === 1 ?\n                                    key[0] :\n                                    key.slice(0, keyLength);\n                            } });\n                    }\n                    return table.openCursor(translateRequest(req))\n                        .then(function (cursor) { return cursor && createVirtualCursor(cursor); });\n                } });\n            return result;\n        } });\n}\nvar virtualIndexMiddleware = {\n    stack: \"dbcore\",\n    name: \"VirtualIndexMiddleware\",\n    level: 1,\n    create: createVirtualIndexMiddleware\n};\n\nvar hooksMiddleware = {\n    stack: \"dbcore\",\n    name: \"HooksMiddleware\",\n    level: 2,\n    create: function (downCore) { return (__assign({}, downCore, { table: function (tableName) {\n            var downTable = downCore.table(tableName);\n            var primaryKey = downTable.schema.primaryKey;\n            var tableMiddleware = __assign({}, downTable, { mutate: function (req) {\n                    var dxTrans = PSD.trans;\n                    var _a = dxTrans.table(tableName).hook, deleting = _a.deleting, creating = _a.creating, updating = _a.updating;\n                    switch (req.type) {\n                        case 'add':\n                            if (creating.fire === nop)\n                                break;\n                            return dxTrans._promise('readwrite', function () { return addPutOrDelete(req); }, true);\n                        case 'put':\n                            if (creating.fire === nop && updating.fire === nop)\n                                break;\n                            return dxTrans._promise('readwrite', function () { return addPutOrDelete(req); }, true);\n                        case 'delete':\n                            if (deleting.fire === nop)\n                                break;\n                            return dxTrans._promise('readwrite', function () { return addPutOrDelete(req); }, true);\n                        case 'deleteRange':\n                            if (deleting.fire === nop)\n                                break;\n                            return dxTrans._promise('readwrite', function () { return deleteRange(req); }, true);\n                    }\n                    return downTable.mutate(req);\n                    function addPutOrDelete(req) {\n                        var dxTrans = PSD.trans;\n                        var keys$$1 = req.keys || getEffectiveKeys(primaryKey, req);\n                        if (!keys$$1)\n                            throw new Error(\"Keys missing\");\n                        req = req.type === 'add' || req.type === 'put' ? __assign({}, req, { keys: keys$$1, wantResults: true }) :\n                         __assign({}, req);\n                        if (req.type !== 'delete')\n                            req.values = req.values.slice();\n                        if (req.keys)\n                            req.keys = req.keys.slice();\n                        return getExistingValues(downTable, req, keys$$1).then(function (existingValues) {\n                            var contexts = keys$$1.map(function (key, i) {\n                                var existingValue = existingValues[i];\n                                var ctx = { onerror: null, onsuccess: null };\n                                if (req.type === 'delete') {\n                                    deleting.fire.call(ctx, key, existingValue, dxTrans);\n                                }\n                                else if (req.type === 'add' || existingValue === undefined) {\n                                    var generatedPrimaryKey = creating.fire.call(ctx, key, req.values[i], dxTrans);\n                                    if (key == null && generatedPrimaryKey != null) {\n                                        key = generatedPrimaryKey;\n                                        req.keys[i] = key;\n                                        if (!primaryKey.outbound) {\n                                            setByKeyPath(req.values[i], primaryKey.keyPath, key);\n                                        }\n                                    }\n                                }\n                                else {\n                                    var objectDiff = getObjectDiff(existingValue, req.values[i]);\n                                    var additionalChanges_1 = updating.fire.call(ctx, objectDiff, key, existingValue, dxTrans);\n                                    if (additionalChanges_1) {\n                                        var requestedValue_1 = req.values[i];\n                                        Object.keys(additionalChanges_1).forEach(function (keyPath) {\n                                            setByKeyPath(requestedValue_1, keyPath, additionalChanges_1[keyPath]);\n                                        });\n                                    }\n                                }\n                                return ctx;\n                            });\n                            return downTable.mutate(req).then(function (_a) {\n                                var failures = _a.failures, results = _a.results, numFailures = _a.numFailures, lastResult = _a.lastResult;\n                                for (var i = 0; i < keys$$1.length; ++i) {\n                                    var primKey = results ? results[i] : keys$$1[i];\n                                    var ctx = contexts[i];\n                                    if (primKey == null) {\n                                        ctx.onerror && ctx.onerror(failures[i]);\n                                    }\n                                    else {\n                                        ctx.onsuccess && ctx.onsuccess(req.type === 'put' && existingValues[i] ?\n                                            req.values[i] :\n                                            primKey\n                                        );\n                                    }\n                                }\n                                return { failures: failures, results: results, numFailures: numFailures, lastResult: lastResult };\n                            }).catch(function (error) {\n                                contexts.forEach(function (ctx) { return ctx.onerror && ctx.onerror(error); });\n                                return Promise.reject(error);\n                            });\n                        });\n                    }\n                    function deleteRange(req) {\n                        return deleteNextChunk(req.trans, req.range, 10000);\n                    }\n                    function deleteNextChunk(trans, range, limit) {\n                        return downTable.query({ trans: trans, values: false, query: { index: primaryKey, range: range }, limit: limit })\n                            .then(function (_a) {\n                            var result = _a.result;\n                            return addPutOrDelete({ type: 'delete', keys: result, trans: trans }).then(function (res) {\n                                if (res.numFailures > 0)\n                                    return Promise.reject(res.failures[0]);\n                                if (result.length < limit) {\n                                    return { failures: [], numFailures: 0, lastResult: undefined };\n                                }\n                                else {\n                                    return deleteNextChunk(trans, __assign({}, range, { lower: result[result.length - 1], lowerOpen: true }), limit);\n                                }\n                            });\n                        });\n                    }\n                } });\n            return tableMiddleware;\n        } })); }\n};\n\nvar Dexie =               (function () {\n    function Dexie(name, options) {\n        var _this = this;\n        this._middlewares = {};\n        this.verno = 0;\n        var deps = Dexie.dependencies;\n        this._options = options = __assign({\n            addons: Dexie.addons, autoOpen: true,\n            indexedDB: deps.indexedDB, IDBKeyRange: deps.IDBKeyRange }, options);\n        this._deps = {\n            indexedDB: options.indexedDB,\n            IDBKeyRange: options.IDBKeyRange\n        };\n        var addons = options.addons;\n        this._dbSchema = {};\n        this._versions = [];\n        this._storeNames = [];\n        this._allTables = {};\n        this.idbdb = null;\n        var state = {\n            dbOpenError: null,\n            isBeingOpened: false,\n            onReadyBeingFired: null,\n            openComplete: false,\n            dbReadyResolve: nop,\n            dbReadyPromise: null,\n            cancelOpen: nop,\n            openCanceller: null,\n            autoSchema: true\n        };\n        state.dbReadyPromise = new Promise$1(function (resolve) {\n            state.dbReadyResolve = resolve;\n        });\n        state.openCanceller = new Promise$1(function (_, reject) {\n            state.cancelOpen = reject;\n        });\n        this._state = state;\n        this.name = name;\n        this.on = Events(this, \"populate\", \"blocked\", \"versionchange\", { ready: [promisableChain, nop] });\n        this.on.ready.subscribe = override(this.on.ready.subscribe, function (subscribe) {\n            return function (subscriber, bSticky) {\n                Dexie.vip(function () {\n                    var state = _this._state;\n                    if (state.openComplete) {\n                        if (!state.dbOpenError)\n                            Promise$1.resolve().then(subscriber);\n                        if (bSticky)\n                            subscribe(subscriber);\n                    }\n                    else if (state.onReadyBeingFired) {\n                        state.onReadyBeingFired.push(subscriber);\n                        if (bSticky)\n                            subscribe(subscriber);\n                    }\n                    else {\n                        subscribe(subscriber);\n                        var db_1 = _this;\n                        if (!bSticky)\n                            subscribe(function unsubscribe() {\n                                db_1.on.ready.unsubscribe(subscriber);\n                                db_1.on.ready.unsubscribe(unsubscribe);\n                            });\n                    }\n                });\n            };\n        });\n        this.Collection = createCollectionConstructor(this);\n        this.Table = createTableConstructor(this);\n        this.Transaction = createTransactionConstructor(this);\n        this.Version = createVersionConstructor(this);\n        this.WhereClause = createWhereClauseConstructor(this);\n        this.on(\"versionchange\", function (ev) {\n            if (ev.newVersion > 0)\n                console.warn(\"Another connection wants to upgrade database '\" + _this.name + \"'. Closing db now to resume the upgrade.\");\n            else\n                console.warn(\"Another connection wants to delete database '\" + _this.name + \"'. Closing db now to resume the delete request.\");\n            _this.close();\n        });\n        this.on(\"blocked\", function (ev) {\n            if (!ev.newVersion || ev.newVersion < ev.oldVersion)\n                console.warn(\"Dexie.delete('\" + _this.name + \"') was blocked\");\n            else\n                console.warn(\"Upgrade '\" + _this.name + \"' blocked by other connection holding version \" + ev.oldVersion / 10);\n        });\n        this._maxKey = getMaxKey(options.IDBKeyRange);\n        this._createTransaction = function (mode, storeNames, dbschema, parentTransaction) { return new _this.Transaction(mode, storeNames, dbschema, parentTransaction); };\n        this._fireOnBlocked = function (ev) {\n            _this.on(\"blocked\").fire(ev);\n            connections\n                .filter(function (c) { return c.name === _this.name && c !== _this && !c._state.vcFired; })\n                .map(function (c) { return c.on(\"versionchange\").fire(ev); });\n        };\n        this.use(virtualIndexMiddleware);\n        this.use(hooksMiddleware);\n        addons.forEach(function (addon) { return addon(_this); });\n    }\n    Dexie.prototype.version = function (versionNumber) {\n        versionNumber = Math.round(versionNumber * 10) / 10;\n        if (this.idbdb || this._state.isBeingOpened)\n            throw new exceptions.Schema(\"Cannot add version when database is open\");\n        this.verno = Math.max(this.verno, versionNumber);\n        var versions = this._versions;\n        var versionInstance = versions.filter(function (v) { return v._cfg.version === versionNumber; })[0];\n        if (versionInstance)\n            return versionInstance;\n        versionInstance = new this.Version(versionNumber);\n        versions.push(versionInstance);\n        versions.sort(lowerVersionFirst);\n        this._state.autoSchema = false;\n        return versionInstance;\n    };\n    Dexie.prototype._whenReady = function (fn) {\n        var _this = this;\n        return this._state.openComplete || PSD.letThrough ? fn() : new Promise$1(function (resolve, reject) {\n            if (!_this._state.isBeingOpened) {\n                if (!_this._options.autoOpen) {\n                    reject(new exceptions.DatabaseClosed());\n                    return;\n                }\n                _this.open().catch(nop);\n            }\n            _this._state.dbReadyPromise.then(resolve, reject);\n        }).then(fn);\n    };\n    Dexie.prototype.use = function (_a) {\n        var stack = _a.stack, create = _a.create, level = _a.level, name = _a.name;\n        if (name)\n            this.unuse({ stack: stack, name: name });\n        var middlewares = this._middlewares[stack] || (this._middlewares[stack] = []);\n        middlewares.push({ stack: stack, create: create, level: level == null ? 10 : level, name: name });\n        middlewares.sort(function (a, b) { return a.level - b.level; });\n        return this;\n    };\n    Dexie.prototype.unuse = function (_a) {\n        var stack = _a.stack, name = _a.name, create = _a.create;\n        if (stack && this._middlewares[stack]) {\n            this._middlewares[stack] = this._middlewares[stack].filter(function (mw) {\n                return create ? mw.create !== create :\n                    name ? mw.name !== name :\n                        false;\n            });\n        }\n        return this;\n    };\n    Dexie.prototype.open = function () {\n        return dexieOpen(this);\n    };\n    Dexie.prototype.close = function () {\n        var idx = connections.indexOf(this), state = this._state;\n        if (idx >= 0)\n            connections.splice(idx, 1);\n        if (this.idbdb) {\n            try {\n                this.idbdb.close();\n            }\n            catch (e) { }\n            this.idbdb = null;\n        }\n        this._options.autoOpen = false;\n        state.dbOpenError = new exceptions.DatabaseClosed();\n        if (state.isBeingOpened)\n            state.cancelOpen(state.dbOpenError);\n        state.dbReadyPromise = new Promise$1(function (resolve) {\n            state.dbReadyResolve = resolve;\n        });\n        state.openCanceller = new Promise$1(function (_, reject) {\n            state.cancelOpen = reject;\n        });\n    };\n    Dexie.prototype.delete = function () {\n        var _this = this;\n        var hasArguments = arguments.length > 0;\n        var state = this._state;\n        return new Promise$1(function (resolve, reject) {\n            var doDelete = function () {\n                _this.close();\n                var req = _this._deps.indexedDB.deleteDatabase(_this.name);\n                req.onsuccess = wrap(function () {\n                    databaseEnumerator.remove(_this.name);\n                    resolve();\n                });\n                req.onerror = eventRejectHandler(reject);\n                req.onblocked = _this._fireOnBlocked;\n            };\n            if (hasArguments)\n                throw new exceptions.InvalidArgument(\"Arguments not allowed in db.delete()\");\n            if (state.isBeingOpened) {\n                state.dbReadyPromise.then(doDelete);\n            }\n            else {\n                doDelete();\n            }\n        });\n    };\n    Dexie.prototype.backendDB = function () {\n        return this.idbdb;\n    };\n    Dexie.prototype.isOpen = function () {\n        return this.idbdb !== null;\n    };\n    Dexie.prototype.hasBeenClosed = function () {\n        var dbOpenError = this._state.dbOpenError;\n        return dbOpenError && (dbOpenError.name === 'DatabaseClosed');\n    };\n    Dexie.prototype.hasFailed = function () {\n        return this._state.dbOpenError !== null;\n    };\n    Dexie.prototype.dynamicallyOpened = function () {\n        return this._state.autoSchema;\n    };\n    Object.defineProperty(Dexie.prototype, \"tables\", {\n        get: function () {\n            var _this = this;\n            return keys(this._allTables).map(function (name) { return _this._allTables[name]; });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Dexie.prototype.transaction = function () {\n        var args = extractTransactionArgs.apply(this, arguments);\n        return this._transaction.apply(this, args);\n    };\n    Dexie.prototype._transaction = function (mode, tables, scopeFunc) {\n        var _this = this;\n        var parentTransaction = PSD.trans;\n        if (!parentTransaction || parentTransaction.db !== this || mode.indexOf('!') !== -1)\n            parentTransaction = null;\n        var onlyIfCompatible = mode.indexOf('?') !== -1;\n        mode = mode.replace('!', '').replace('?', '');\n        var idbMode, storeNames;\n        try {\n            storeNames = tables.map(function (table) {\n                var storeName = table instanceof _this.Table ? table.name : table;\n                if (typeof storeName !== 'string')\n                    throw new TypeError(\"Invalid table argument to Dexie.transaction(). Only Table or String are allowed\");\n                return storeName;\n            });\n            if (mode == \"r\" || mode === READONLY)\n                idbMode = READONLY;\n            else if (mode == \"rw\" || mode == READWRITE)\n                idbMode = READWRITE;\n            else\n                throw new exceptions.InvalidArgument(\"Invalid transaction mode: \" + mode);\n            if (parentTransaction) {\n                if (parentTransaction.mode === READONLY && idbMode === READWRITE) {\n                    if (onlyIfCompatible) {\n                        parentTransaction = null;\n                    }\n                    else\n                        throw new exceptions.SubTransaction(\"Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY\");\n                }\n                if (parentTransaction) {\n                    storeNames.forEach(function (storeName) {\n                        if (parentTransaction && parentTransaction.storeNames.indexOf(storeName) === -1) {\n                            if (onlyIfCompatible) {\n                                parentTransaction = null;\n                            }\n                            else\n                                throw new exceptions.SubTransaction(\"Table \" + storeName +\n                                    \" not included in parent transaction.\");\n                        }\n                    });\n                }\n                if (onlyIfCompatible && parentTransaction && !parentTransaction.active) {\n                    parentTransaction = null;\n                }\n            }\n        }\n        catch (e) {\n            return parentTransaction ?\n                parentTransaction._promise(null, function (_, reject) { reject(e); }) :\n                rejection(e);\n        }\n        var enterTransaction = enterTransactionScope.bind(null, this, idbMode, storeNames, parentTransaction, scopeFunc);\n        return (parentTransaction ?\n            parentTransaction._promise(idbMode, enterTransaction, \"lock\") :\n            PSD.trans ?\n                usePSD(PSD.transless, function () { return _this._whenReady(enterTransaction); }) :\n                this._whenReady(enterTransaction));\n    };\n    Dexie.prototype.table = function (tableName) {\n        if (!hasOwn(this._allTables, tableName)) {\n            throw new exceptions.InvalidTable(\"Table \" + tableName + \" does not exist\");\n        }\n        return this._allTables[tableName];\n    };\n    return Dexie;\n}());\n\nvar Dexie$1 = Dexie;\nprops(Dexie$1, __assign({}, fullNameExceptions, {\n    delete: function (databaseName) {\n        var db = new Dexie$1(databaseName);\n        return db.delete();\n    },\n    exists: function (name) {\n        return new Dexie$1(name, { addons: [] }).open().then(function (db) {\n            db.close();\n            return true;\n        }).catch('NoSuchDatabaseError', function () { return false; });\n    },\n    getDatabaseNames: function (cb) {\n        return databaseEnumerator ?\n            databaseEnumerator.getDatabaseNames().then(cb) :\n            Promise$1.resolve([]);\n    },\n    defineClass: function () {\n        function Class(content) {\n            extend(this, content);\n        }\n        return Class;\n    },\n    ignoreTransaction: function (scopeFunc) {\n        return PSD.trans ?\n            usePSD(PSD.transless, scopeFunc) :\n            scopeFunc();\n    },\n    vip: vip, async: function (generatorFn) {\n        return function () {\n            try {\n                var rv = awaitIterator(generatorFn.apply(this, arguments));\n                if (!rv || typeof rv.then !== 'function')\n                    return Promise$1.resolve(rv);\n                return rv;\n            }\n            catch (e) {\n                return rejection(e);\n            }\n        };\n    }, spawn: function (generatorFn, args, thiz) {\n        try {\n            var rv = awaitIterator(generatorFn.apply(thiz, args || []));\n            if (!rv || typeof rv.then !== 'function')\n                return Promise$1.resolve(rv);\n            return rv;\n        }\n        catch (e) {\n            return rejection(e);\n        }\n    },\n    currentTransaction: {\n        get: function () { return PSD.trans || null; }\n    }, waitFor: function (promiseOrFunction, optionalTimeout) {\n        var promise = Promise$1.resolve(typeof promiseOrFunction === 'function' ?\n            Dexie$1.ignoreTransaction(promiseOrFunction) :\n            promiseOrFunction)\n            .timeout(optionalTimeout || 60000);\n        return PSD.trans ?\n            PSD.trans.waitFor(promise) :\n            promise;\n    },\n    Promise: Promise$1,\n    debug: {\n        get: function () { return debug; },\n        set: function (value) {\n            setDebug(value, value === 'dexie' ? function () { return true; } : dexieStackFrameFilter);\n        }\n    },\n    derive: derive, extend: extend, props: props, override: override,\n    Events: Events,\n    getByKeyPath: getByKeyPath, setByKeyPath: setByKeyPath, delByKeyPath: delByKeyPath, shallowClone: shallowClone, deepClone: deepClone, getObjectDiff: getObjectDiff, asap: asap,\n    minKey: minKey,\n    addons: [],\n    connections: connections,\n    errnames: errnames,\n    dependencies: (function () {\n        try {\n            return {\n                indexedDB: _global.indexedDB || _global.mozIndexedDB || _global.webkitIndexedDB || _global.msIndexedDB,\n                IDBKeyRange: _global.IDBKeyRange || _global.webkitIDBKeyRange\n            };\n        }\n        catch (e) {\n            return { indexedDB: null, IDBKeyRange: null };\n        }\n    })(),\n    semVer: DEXIE_VERSION, version: DEXIE_VERSION.split('.')\n        .map(function (n) { return parseInt(n); })\n        .reduce(function (p, c, i) { return p + (c / Math.pow(10, i * 2)); }),\n    default: Dexie$1,\n    Dexie: Dexie$1 }));\nDexie$1.maxKey = getMaxKey(Dexie$1.dependencies.IDBKeyRange);\n\ninitDatabaseEnumerator(Dexie.dependencies.indexedDB);\nPromise$1.rejectionMapper = mapError;\nsetDebug(debug, dexieStackFrameFilter);\n\nexport default Dexie;\n//# sourceMappingURL=dexie.mjs.map\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport Dexie from \"dexie\";\nimport { blobToArrayBuffer, arrayBufferToBlob } from \"../blobArrayBufferConversion\";\n/**\n * @class\n * Wrapper class for Dexie library, which wraps IndexedDB.\n */\nvar ServiceWorkerDB = /** @class */ (function (_super) {\n    __extends(ServiceWorkerDB, _super);\n    function ServiceWorkerDB(dbName) {\n        var _this = _super.call(this, dbName) || this;\n        // use queue of items to put in the DB so the inserts can be serialized\n        // and attempting to store the same item twice does not occur.\n        _this.queue = [];\n        /**\n         * Bulk add items to the DB.\n         */\n        _this.putAll = function (items) {\n            return _this.transaction(\"rw\", _this.responses, function () {\n                return Promise.all(items.map(function (item) {\n                    return item.response\n                        .blob()\n                        .then(blobToArrayBuffer)\n                        .then(function (_a) {\n                        var buffer = _a[0], type = _a[1];\n                        return ({\n                            url: item.url,\n                            responseBody: buffer,\n                            blobMIMEType: type,\n                            responseStatus: item.response.status,\n                            responseStatusText: item.response.statusText,\n                            responseHeaders: (function () {\n                                // extract fields from Headers object.\n                                var headers = {};\n                                item.response.headers.forEach(function (key, value) { return (headers[key] = value); });\n                                return headers;\n                            })()\n                        });\n                    });\n                })).then(function (itemData) {\n                    return _this.responses.bulkPut(itemData);\n                });\n            });\n        };\n        // return a promise that resolves to a list of all the keys in the DB.\n        _this.keys = function () { return __awaiter(_this, void 0, void 0, function () { return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, this.responses.toCollection().keys()];\n                case 1: return [2 /*return*/, (_a.sent()).map(function (key) { return key.toString(); })];\n            }\n        }); }); };\n        // flush the database.\n        _this.flush = function () { return _this.responses.clear(); };\n        // 'alert' function, used to signal the queue has been added to.\n        _this.alert = _this.worker;\n        // function responsible for dequeuing items and adding them to the DB.\n        _this.dequeue = function () {\n            return new Promise(function (resolve, reject) {\n                var innerPromise = function () {\n                    return new Promise(function (res, rej) {\n                        _this.queue.length === 0\n                            ? res(null)\n                            : _this.putInDB.apply(_this, _this.queue.shift()).then(innerPromise)\n                                .then(res)\n                                .catch(rej);\n                    });\n                };\n                innerPromise()\n                    .then(resolve)\n                    .catch(reject);\n            });\n        };\n        _this.version(1).stores({\n            responses: \"url\"\n        });\n        _this.responses = _this.table(\"responses\");\n        return _this;\n    }\n    // enqueues a [url, Response] tuple on the input queue and calls alert().\n    ServiceWorkerDB.prototype.put = function (url, response) {\n        this.queue.push([url, response]);\n        this.alert();\n    };\n    // given a key returns the associalted value in the DB if it exists, else\n    // returns undefined.\n    ServiceWorkerDB.prototype.get = function (item) {\n        return __awaiter(this, void 0, void 0, function () {\n            var response;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.responses.get({ url: item })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response\n                                ? new Response(arrayBufferToBlob(response.responseBody, response.blobMIMEType), {\n                                    status: response.responseStatus,\n                                    statusText: response.responseStatusText,\n                                    headers: new Headers(response.responseHeaders)\n                                })\n                                : undefined];\n                }\n            });\n        });\n    };\n    // method resposible for insertion into db.\n    ServiceWorkerDB.prototype.putInDB = function (url, response) {\n        return __awaiter(this, void 0, void 0, function () {\n            var val, _a, buffer, type, _b, headers;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0: return [4 /*yield*/, this.responses.get(url)];\n                    case 1:\n                        val = _c.sent();\n                        if (val) {\n                            return [2 /*return*/, Promise.resolve(\"\")];\n                        }\n                        _b = blobToArrayBuffer;\n                        return [4 /*yield*/, response.blob()];\n                    case 2: return [4 /*yield*/, _b.apply(void 0, [_c.sent()])];\n                    case 3:\n                        _a = _c.sent(), buffer = _a[0], type = _a[1];\n                        headers = {};\n                        response.headers.forEach(function (value, key) { return (headers[key] = value); });\n                        try {\n                            return [2 /*return*/, this.responses.add({\n                                    url: url,\n                                    responseBody: buffer,\n                                    blobMIMEType: type,\n                                    responseStatus: response.status,\n                                    responseStatusText: response.statusText,\n                                    responseHeaders: headers\n                                })];\n                        }\n                        catch (e) {\n                            // \"key already exists\" error, this is fine.\n                            return [2 /*return*/, \"\"];\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Upsert (if not in db, insert, otherwise update).\n     */\n    ServiceWorkerDB.prototype.upsert = function (url, response) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, buffer, type, _b, headers;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        _b = blobToArrayBuffer;\n                        return [4 /*yield*/, response.blob()];\n                    case 1: return [4 /*yield*/, _b.apply(void 0, [_c.sent()])];\n                    case 2:\n                        _a = _c.sent(), buffer = _a[0], type = _a[1];\n                        headers = {};\n                        response.headers.forEach(function (value, key) { return (headers[key] = value); });\n                        return [2 /*return*/, this.responses.put({\n                                url: url,\n                                responseBody: buffer,\n                                blobMIMEType: type,\n                                responseStatus: response.status,\n                                responseStatusText: response.statusText,\n                                responseHeaders: headers\n                            })];\n                }\n            });\n        });\n    };\n    // when 'alert()' function is called, if the worker function is not active\n    // it will be called and will add the items in the queue to the DB.\n    // if the worker function is active calling 'alert()' will have no effect.\n    ServiceWorkerDB.prototype.worker = function () {\n        var _this = this;\n        this.alert = function () { };\n        this.dequeue()\n            .then(function () { return (_this.alert = function () { return _this.worker(); }); })\n            .catch(console.log);\n    };\n    return ServiceWorkerDB;\n}(Dexie));\nexport { ServiceWorkerDB };\n//# sourceMappingURL=index.js.map","/**\n * Converts data stored in an ArrayBuffer to a Blob (with the correct MIME type supplied as a parameter).\n *\n * @param {ArrayBuffer} buffer - The ArrayBuffer to convert.\n * @param {String} type - The MIME type of the Blob.\n * @returns {Blob} The Blob consisting of the data in the ArrayBuffer, with the specified MIME type.\n */\nexport var arrayBufferToBlob = function (buffer, type) {\n    return new Blob([buffer], { type: type });\n};\n/**\n * Asynchronously converts a Blob to an ArrayBuffer.\n *\n * @param {Blob} Blob - The Blob to convert.\n * @returns {Promise<[ArrayBuffer, string]>} Promise resolving to a tuple containing the converted ArrayBuffer and the MIME type of the blob.\n */\nexport var blobToArrayBuffer = function (blob) {\n    return new Promise(function (resolve, reject) {\n        var reader = new FileReader();\n        reader.addEventListener(\"loadend\", function () {\n            return resolve([reader.result, blob.type]);\n        });\n        reader.addEventListener(\"error\", reject);\n        reader.readAsArrayBuffer(blob);\n    });\n};\n//# sourceMappingURL=blobArrayBufferConversion.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { ServiceWorkerDB } from \"./helpers/ServiceWorkerDB\";\nimport { Cache } from \"./types/cache\";\nimportScripts(\"envSW-client.js\");\nvar jobQueue = [];\nvar db = new ServiceWorkerDB(Cache.NAME);\nvar keepFreshUrls = [];\nvar passthroughRegex;\nvar isOniOS;\n/**\n * Check and make sure that we are attached to a client.\n * For some reason on iOS across refreshes the Service Worker loses its ability\n * to intercept requests from the page, so setInterval to periodically\n * ensure we are attached to a client and if not, push a 'claim' job onto\n * the job queue.\n */\nvar checkClaimedClientsIntervalId = setInterval(function () {\n    self.clients.matchAll().then(function (c) {\n        if (c.length === 0) {\n            jobQueue.push({ type: \"claim\" });\n            runJobQueue();\n        }\n    });\n}, 2000);\n// the service worker needs to:\n//  - give the client a list of all available stories & languages (Stored or\n//    retrieved from Craft).\n//  - give the client a list of downloaded stories & languages.\n//  - what else?\nself.addEventListener(\"install\", function (event) {\n    event.waitUntil(db.flush());\n});\nself.addEventListener(\"activate\", function () {\n    self.clients.claim();\n});\nself.addEventListener(\"fetch\", function (event) {\n    fetchHandler(event);\n});\n/**\n * Intercept fetch requests, and either:\n *  - serve response from cache if possible, or,\n *  - make request on behalf of client, store response and give response to client\n *  - (future fetch requests for that resource will be served from the cache).\n * @param {FetchEvent} event\n */\nvar fetchHandler = function (event) {\n    switch (event.request.url) {\n        case Cache.URL_PREFIX + \"/\" + Cache.ASSETS_URL:\n            fetchCache(event);\n            break;\n        case Cache.URL_PREFIX + \"/\" + Cache.FLUSH_URL:\n            flushCache(event);\n            break;\n        // no longer performing file size requests due to performance issues.\n        // case `${Cache.URL_PREFIX}/${Cache.FILE_SIZE}`:\n        // getFileSize(event);\n        // break;\n        // usages of this have been replaced with Cache.WAIT_URL\n        // case `${Cache.URL_PREFIX}/${Cache.GET_URL}`:\n        //   respondWithProgress(event);\n        //   break;\n        case Cache.URL_PREFIX + \"/\" + Cache.WAIT_URL:\n            respondWithProgress(event);\n            break;\n        // this endpoint and its associated method are no longer used.\n        // case `${Cache.URL_PREFIX}/${Cache.CACHE_IN_BACKGROUND}`:\n        //   cacheInBackground(event);\n        //   break;\n        case Cache.URL_PREFIX + \"/\" + Cache.CONFIG_DATA:\n            config(event);\n            break;\n        default:\n            fetchItem(event);\n            break;\n    }\n    runJobQueue();\n};\nvar runJobQueue = function () {\n    var _loop_1 = function () {\n        var job = stripUndefined(jobQueue.shift());\n        switch (job.type) {\n            case \"claim\":\n                self.clients.claim().catch(function () {\n                    // if an error occurs, clear the interval to prevent trying again.\n                    if (checkClaimedClientsIntervalId) {\n                        clearInterval(checkClaimedClientsIntervalId);\n                    }\n                });\n                break;\n            case \"cacheInBackground\":\n                var url_1 = job.data;\n                // queue fetch request.\n                setTimeout(function () {\n                    var request = new Request(url_1);\n                    fetch(request).then(function (response) { return cacheItem(request, response); });\n                });\n                break;\n            default:\n                break;\n        }\n    };\n    while (jobQueue.length > 0) {\n        _loop_1();\n    }\n};\n/**\n * Fetch list of keys currently stored in the cache.\n * @param {FetchEvent} event\n */\nvar fetchCache = function (event) {\n    event.respondWith(db.keys().then(function (keys) {\n        // decodeURI needed so strings match when comparing in the app.\n        return new Response(JSON.stringify(keys.map(function (key) { return decodeURI(key); })), {\n            status: 200,\n            statusText: \"OK\"\n        });\n    }));\n};\n/**\n * Clears the cache, removing all items.\n * @param {FetchEvent} event\n */\nvar flushCache = function (event) {\n    event.waitUntil(db.flush());\n    event.respondWith(Promise.resolve(new Response(new Blob([]), { status: 200, statusText: \"OK\" })));\n};\n/**\n * Adds a given request and its result to the cache.\n * @param {FetchEvent} event - the Event object.\n */\nvar fetchItem = function (event) {\n    // passthrough if matches regular expression\n    if (passthroughRegex && passthroughRegex.test(event.request.url)) {\n        event.respondWith(fetch(event.request));\n        return;\n    }\n    var responsePromise = new Promise(function (resolve, reject) {\n        var tryCacheBeforeFetching = function () {\n            return db.get(event.request.url).then(function (result) {\n                if (result) {\n                    // cache hit - return response\n                    // console.log(\"cache hit:\", event.request.url, result);\n                    resolve(result);\n                }\n                else {\n                    // console.log(\"cache miss:\", event.request, result);\n                    fetch(event.request.mode === \"navigate\"\n                        ? event.request\n                        : new Request(event.request, {\n                            mode: \"cors\",\n                            credentials: \"omit\",\n                            cache: event.request.cache === \"only-if-cached\"\n                                ? \"default\"\n                                : event.request.cache\n                        }))\n                        .then(function (response) {\n                        // check if we received a valid response\n                        if (!response ||\n                            (response.status !== 200 && response.status !== 304)) {\n                            reject(\"Service worker received bad response: \" + event.request.url);\n                        }\n                        else {\n                            resolve(cloneAndCache(event.request, response));\n                        }\n                    })\n                        .catch(reject);\n                }\n            });\n        };\n        // check if request url matches any in keepFreshUrls (and we are online)\n        if (keepFreshUrls.includes(event.request.url) && navigator.onLine) {\n            // if true, try for a fresh copy, falling back to cache.\n            fetch(event.request)\n                .then(function (r) {\n                // cache the fresh result and return\n                resolve(cloneAndUpsert(event.request, r));\n            })\n                .catch(function () {\n                // error fetching. revert to trying to use cached verison.\n                tryCacheBeforeFetching();\n            });\n        }\n        else {\n            // else, try cache before making request.\n            tryCacheBeforeFetching();\n        }\n    });\n    event.respondWith(responsePromise);\n};\n/**\n * Clone the response from the server and store in cache for offline use.\n * return a copy of the response to the browser/client.\n * @param {Request} request\n * @param {Response} response\n */\nvar cloneAndCache = function (request, response) {\n    var clone = response.clone();\n    cacheItem(request, response);\n    return clone;\n};\nvar cacheItemAndWait = function (request, response) {\n    return db.putInDB(request.url, response).catch(function (e) {\n        console.log(\"Error inserting into database:\", e);\n        // try one more time\n        try {\n            return db.putInDB(request.url, response).catch(function (e) { return e; });\n        }\n        catch (e) {\n            console.log(\"Failed again:\", e);\n            return e;\n        }\n    });\n};\nvar cloneAndUpsert = function (request, response) {\n    var clone = response.clone();\n    db.upsert(request.url, response);\n    return clone;\n};\n// does not wait for db store to complete before returning.\nvar cacheItem = function (request, response) {\n    db.put(request.url, response);\n    return Promise.resolve(\"true\");\n};\n/**\n * Pre-fetches and caches from a list of URLs\n * @param {string[]} urls\n */\nvar preCache = function (urls) { return __awaiter(void 0, void 0, void 0, function () {\n    var items;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [4 /*yield*/, Promise.all(urls.map(function (url) { return __awaiter(void 0, void 0, void 0, function () {\n                    var _a;\n                    return __generator(this, function (_b) {\n                        switch (_b.label) {\n                            case 0:\n                                _a = {\n                                    url: url\n                                };\n                                return [4 /*yield*/, fetch(url)];\n                            case 1: return [2 /*return*/, (_a.response = _b.sent(),\n                                    _a)];\n                        }\n                    });\n                }); }))];\n            case 1:\n                items = _a.sent();\n                // await db.putAll(items);\n                items.map(function (item) { return db.put(item.url, item.response); });\n                return [2 /*return*/];\n        }\n    });\n}); };\n/**\n * [UPDATE - No longer provides download progress.]\n * Construct and return a Response object which provides file download progress\n * @param {FetchEvent} event - the Event object.\n */\nvar respondWithProgress = function (event) {\n    event.respondWith(eventData(event, \"url\")\n        .then(function (url) {\n        var request = new Request(url, {\n            // headers: new Headers({\n            //   \"Access-Control-Expose-Headers\": \"Content-Length\"\n            // }),\n            mode: \"cors\"\n        });\n        return Promise.all([fetch(request), Promise.resolve(request)]);\n    })\n        .then(function (_a) {\n        // const clonedResponse = cloneAndCache(request, response);\n        var response = _a[0], request = _a[1];\n        return isOniOS\n            ? /*\n              iOS has issues with indexedDB. For some reason, waiting for the\n              insertion to succeed does not work as expected, and the service\n              worker eventually crashes from apparent overload. For this reason\n              we need to use the older method.\n            */\n                cacheItem(request, response)\n            : cacheItemAndWait(request, response);\n    })\n        .then(function () { return new Response(\"true\"); }));\n};\n// this method and its associated endpoint are no longer used.\n// const cacheInBackground = (event: FetchEvent): void => {\n//   event.request\n//     .json()\n//     .then(data => data.urls)\n//     .then((urls: string[]) =>\n//       jobQueue.push(\n//         ...urls.map(\n//           (url): IJob => ({\n//             type: \"cacheInBackground\",\n//             data: url\n//           })\n//         )\n//       )\n//     );\n//   event.respondWith(new Response());\n// };\n/**\n * Use the configuration data in the event to configure:\n *  - The list of urls to pre-cache.\n *  - The list of urls to try and get a fresh copy of before checking cache.\n *  - The regex pattern that matches requests that should be ignored.\n */\nvar config = function (event) {\n    return event.respondWith(event.request.json().then(function (data) {\n        preCache(data.preCacheUrls);\n        keepFreshUrls.push.apply(keepFreshUrls, data.keepFreshUrls);\n        // remove duplicates\n        keepFreshUrls = Array.from(new Set(keepFreshUrls));\n        passthroughRegex = new RegExp(data.ignoreCacheRegex);\n        isOniOS = data.isOniOS;\n        return new Response();\n    }));\n};\n/**\n * Event data selector - extract data of type T from given FetchEvent.\n * @param {FetchEvent} event\n * @param {string} data\n * @returns {Promise<T>}\n */\nvar eventData = function (event, data) {\n    return event.request.json().then(function (json) { return json[data]; });\n};\n// helper functions inlined instead of importing from spg-common.\n// typescript definition file changes typings for some reason\n// so these functions don't work as expected when imported.\n/**\n * Converts a given value from one type to another, provided it extends the\n * original type.\n *\n * @param value\n */\nexport var typeConvert = function (value) {\n    return value;\n};\n/**\n * Converts a type of type `T | undefined` to type `T`.\n *\n * @param value\n */\nexport var stripUndefined = function (value) {\n    return typeConvert(value);\n};\n//# sourceMappingURL=service_worker.js.map","// eslint-disable-next-line @typescript-eslint/no-namespace\nexport var Cache;\n(function (Cache) {\n    // name of the cache we will be managing.\n    Cache.NAME = \"cache-onedisease\";\n    // special URL used for communicating with the service worker.\n    Cache.URL_PREFIX = origin + \"/sw.js\";\n    // special URL used to send configuration data to the SW, namely:\n    // - urls to pre cache.\n    // - urls to try and use a fresh copy first before falling back to cache\n    // - regex pattern to ignore caching urls that match.\n    Cache.CONFIG_DATA = \"config_data\";\n    Cache.ASSETS_URL = \"cached_assets\";\n    Cache.FLUSH_URL = \"flush_cache\";\n    Cache.WAIT_URL = \"cache_and_wait\";\n    // export const FILE_SIZE: string = \"file_size\";\n    // export const CACHE_IN_BACKGROUND: string = \"cache_in_background\";\n    Cache.CONFIG = {\n        scope: \"/\",\n        updateViaCache: \"none\"\n    };\n})(Cache || (Cache = {}));\n//# sourceMappingURL=cache.js.map"],"sourceRoot":""}